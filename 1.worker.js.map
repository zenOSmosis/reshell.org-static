{"version":3,"sources":["../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/phantom-core/src/PhantomCore/index.js","../node_modules/webpack/buildin/global.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/phantom-core/src/utils/class-utils/getClassName.js","../node_modules/phantom-core/src/utils/class-utils/getIsClassInstance.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray.js","utils/classes/RPCPhantomWorker/worker.js","../node_modules/process/browser.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/phantom-core/src/utils/class-utils/getClass.js","../node_modules/phantom-core/src/Logger.js","../node_modules/phantom-core/src/utils/getUnixTime.js","../node_modules/phantom-core/src/utils/class-utils/getClassInstancePropertyNames.js","../node_modules/phantom-core/src/utils/class-utils/getClassInstanceMethodNames.js","../node_modules/phantom-core/src/PhantomCollection/index.js","../node_modules/phantom-core/src/PhantomState.js","../node_modules/setimmediate/setImmediate.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/events/events.js","../node_modules/phantom-core/src/_DestructibleEventEmitter.js","../node_modules/phantom-core/src/globalLogger.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/phantom-core/src/utils/getPackageJSON.js","../node_modules/phantom-core/src/FunctionStack.js","../node_modules/phantom-core/src/utils/class-utils/autoBindClassInstanceMethods.js","../node_modules/phantom-core/src/utils/shallowMerge.js","../node_modules/assert/assert.js","../node_modules/phantom-core/src/PhantomCollection/PhantomCollection.js","../node_modules/phantom-core/src/PhantomServiceCore/index.js","../node_modules/phantom-core/src/PhantomServiceManager/index.js","../node_modules/phantom-core/src/utils/getIsNodeJS.js","../node_modules/phantom-core/src/utils/class-utils/getSuperClass.js","../node_modules/phantom-core/src/utils/class-utils/getIsClass.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v1.js","../node_modules/uuid/dist/esm-browser/parse.js","../node_modules/uuid/dist/esm-browser/v35.js","../node_modules/uuid/dist/esm-browser/md5.js","../node_modules/uuid/dist/esm-browser/v3.js","../node_modules/uuid/dist/esm-browser/v4.js","../node_modules/uuid/dist/esm-browser/sha1.js","../node_modules/uuid/dist/esm-browser/v5.js","../node_modules/uuid/dist/esm-browser/nil.js","../node_modules/uuid/dist/esm-browser/version.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/phantom-core/src/index.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/phantom-core/src/PhantomCore/PhantomCore.js","../node_modules/timers-browserify/main.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/short-uuid/index.js","../node_modules/any-base/index.js","../node_modules/any-base/src/converter.js","../node_modules/dayjs/dayjs.min.js","../node_modules/phantom-core/src/PhantomCore/EventProxyStack.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/object-assign/index.js","../node_modules/util/util.js","../node_modules/util/support/isBufferBrowser.js","../node_modules/util/node_modules/inherits/inherits_browser.js","../node_modules/phantom-core/src/ArbitraryPhantomWrapper.js","../node_modules/phantom-core/src/PhantomCollection/ChildEventBridge.js","../node_modules/phantom-core/src/PhantomServiceCore/PhantomServiceCore.js","../node_modules/phantom-core/src/PhantomServiceManager/PhantomServiceManager.js","../node_modules/phantom-core/src/PhantomSerializableState.js","../node_modules/is-plain-object/dist/is-plain-object.mjs","../node_modules/phantom-core/src/utils/consume.js","../node_modules/phantom-core/src/utils/deepMerge.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/phantom-core/src/utils/getUptime.js","../node_modules/phantom-core/src/utils/performance.js","../node_modules/phantom-core/src/utils/sleep.js","../node_modules/phantom-core/src/utils/class-utils/getClassInheritance.js","../node_modules/phantom-core/src/utils/testing-utils/eventConstantCheckingUtils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","portals/HackathonPortal/apps/DrReShellApp/engine/ElizaBot/phrases.js","portals/HackathonPortal/apps/DrReShellApp/engine/ElizaBot/ElizaBot.js","portals/HackathonPortal/apps/DrReShellApp/engine/ElizaBot/ElizaBot.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","_createClass","protoProps","staticProps","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","constructor","isNativeReflectConstruct","possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","result","Super","NewTarget","Reflect","construct","superPropBase","_get","receiver","base","desc","getOwnPropertyDescriptor","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_toConsumableArray","arr","PhantomCore","require","EVT_NO_INIT_WARN","EVT_READY","EVT_UPDATED","EVT_BEFORE_DESTROY","EVT_DESTROY_STACK_TIMED_OUT","EVT_DESTROYED","g","Function","e","window","_createForOfIteratorHelper","allowArrayLike","it","iterator","Array","isArray","F","_e","f","normalCompletion","didErr","step","next","_e2","_assertThisInitialized","ReferenceError","getClass","getClassName","instanceOrClass","getIsClassInstance","Boolean","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","_objectSpread2","source","forEach","getOwnPropertyDescriptors","defineProperties","arrayWithHoles","iterableToArrayLimit","nonIterableRest","_slicedToArray","rpcMethodMap","Map","registerRPCMethod","method","handler","Error","set","global","addEventListener","evt","a","data","params","id","postMessage","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","runClearTimeout","marker","Item","array","noop","nextTick","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","arrayLikeToArray","_unsupportedIterableToArray","minLen","toString","slice","from","test","LOG_LEVEL_STRING_MAP","trace","debug","warn","silent","Logger","options","DEFAULT_OPTIONS","logLevel","prefix","_options","log","_logLevel","setLogLevel","values","includes","loggerMethods","console","getLogLevel","LOG_LEVEL_TRACE","LOG_LEVEL_DEBUG","LOG_LEVEL_INFO","LOG_LEVEL_WARN","LOG_LEVEL_ERROR","LOG_LEVEL_SILENT","getUnixTime","date","Date","utc","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Math","round","getClassInstancePropertyNames","classInstance","properties","Set","currentObj","getOwnPropertyNames","map","item","add","getClassInstanceMethodNames","PhantomCollection","EVT_CHILD_INSTANCE_ADDED","EVT_CHILD_INSTANCE_REMOVED","PhantomState","initialState","superOptions","_state","setState","registerCleanupHandler","getState","partialNextState","isMerge","setImmediate","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","installNextTickImplementation","handle","runIfPresent","canUsePostMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","MessageChannel","installMessageChannelImplementation","channel","port1","event","port2","createElement","installReadyStateChangeImplementation","html","documentElement","script","onreadystatechange","removeChild","appendChild","installSetTimeoutImplementation","installPostMessageImplementation","messagePrefix","random","onGlobalMessage","indexOf","attachEvent","callback","task","clearImmediate","_arrayLikeToArray","arr2","ReflectOwnKeys","R","ReflectApply","NumberIsNaN","Number","isNaN","EventEmitter","init","emitter","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","type","prepend","events","existing","newListener","unshift","warned","w","String","count","ProcessEmitWarning","warning","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","ret","arrayClone","listenerCount","copy","wrapListener","removeEventListener","RangeError","setMaxListeners","getMaxListeners","doError","er","message","context","list","position","originalListener","shift","spliceOne","index","pop","rawListeners","eventNames","logger","_isDestroying","_isDestroyed","destroy","getTotalListenerCount","eventName","reduce","b","getIsDestroying","getIsDestroyed","destroyHandler","postDestroyHandler","longRespondDestroyHandlerTimeout","_defineProperty","obj","packageJson","getPackageJSON","FUNCTION_STACK_OPS_ORDER_FIFO","FUNCTION_STACK_OPS_ORDER_LIFO","opsOrder","_opsOrder","_fns","getOpsOrder","remove","pred","clear","getQueueDepth","exec","autoBindClassInstanceMethods","ignoreMethods","methodName","shallowMerge","objA","objB","objectAssign","compare","x","y","min","isBuffer","Buffer","_isBuffer","util","hasOwn","pSlice","functionsHaveNames","foo","pToString","isView","arrbuf","ArrayBuffer","DataView","buffer","assert","ok","regex","getName","func","isFunction","match","truncate","inspect","something","rawname","fail","actual","expected","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","isDate","getTime","isRegExp","multiline","lastIndex","ignoreCase","Float32Array","Float64Array","Uint8Array","actualIndex","objEquiv","actualVisitedObjects","isPrimitive","aIsArgs","isArguments","bIsArgs","ka","objectKeys","kb","sort","expectedException","isPrototypeOf","_throws","shouldThrow","block","_tryBlock","userProvidedMessage","isUnexpectedException","isError","generatedMessage","getMessage","captureStackTrace","stack","out","fn_name","idx","next_line","substring","inherits","equal","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","KEY_META_DESC_CHILD_KEY","KEY_META_CHILD_BEFORE_DESTROY_HANDLER","initialPhantomInstances","_children","_childrenMetadata","ChildEventBridge","_childEventBridge","addChild","children","getChildren","all","child","phantomCoreInstance","prevInstanceWithKey","getChildWithKey","getIsLooseInstance","getIsSameInstance","handleBeforeDestroy","childMetadata","destroyListener","delete","removeAllChildren","entries","metadata","getKeys","broadcast","eventData","bindChildEventName","childEventName","addBridgeEventName","unbindChildEventName","removeBridgeEventName","getBoundChildEventNames","getBridgeEventNames","destroyAllChildren","prevChildren","currChildren","added","predicate","removed","PhantomServiceCore","PhantomServiceManager","getIsNodeJS","node","getIsClass","getSuperClass","classOrInstance","JSClass","getRandomValues","rnds8","rng","crypto","msCrypto","validate","uuid","REGEX","byteToHex","substr","stringify","_nodeId","_clockseq","offset","toLowerCase","_lastMSecs","_lastNSecs","v1","buf","clockseq","seedBytes","msecs","now","nsecs","dt","tl","tmh","parse","v","parseInt","hashfunc","generateUUID","namespace","stringToBytes","str","unescape","encodeURIComponent","bytes","charCodeAt","DNS","URL","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","bitRotateLeft","num","cnt","md5ff","md5gg","md5hh","md5ii","md5","v3","v35","msg","md5ToHexEncodedArray","input","output","length32","hexTab","hex","charAt","wordsToMd5","olda","oldb","oldc","oldd","bytesToWords","length8","Uint32Array","v4","rnds","z","ROTL","sha1","v5","K","H","N","ceil","M","_i","j","pow","floor","_i2","W","_t","_t2","T","assign","ArbitraryPhantomWrapper","PhantomSerializableState","FunctionStack","consume","deepMerge","getUptime","performance","sleep","getClassInheritance","eventConstantCheckingUtils","runtime","Op","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","GenStateSuspendedStart","invoke","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","skipTempReset","prev","stop","rootRecord","rval","exception","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","DestructibleEventEmitter","uuidv4","shortUUID","dayjs","EventProxyStack","_instances","KEEP_ALIVE_SHUTDOWN_METHODS","deprecationNotices","isReady","isAsync","_uuid","_shortUUID","fromUUID","symbol","hasAutomaticBindings","freeze","mergeOptions","_cleanupHandlerStack","_symbol","getInstanceWithSymbol","_title","format","_instanceStartTime","_isReady","_eventProxyStack","autoBind","_init","longRespondInitWarnTimeout","deprecation","getTitle","IGNORE_LIST","unregisterCleanupHandler","getPhantomProperties","getPropertyNames","propName","getIsInstance","getSymbol","setTitle","getOptions","getOption","optionName","level","getMethodNames","getIsReady","getUUID","getShortUUID","is","proxyOn","targetInstance","eventHandler","addProxyHandler","proxyOnce","proxyOff","removeProxyHandler","getInstanceUptime","phantomProp","find","scope","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","onTimeout","_onTimeout","_superPropBase","_setPrototypeOf","_isNativeReflectConstruct","sham","Proxy","_typeof","assertThisInitialized","_possibleConstructorReturn","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","toFlickr","anyBase","flickrBase58","baseOptions","consistentLength","shortenUUID","longId","translator","paddingParams","translated","replace","padStart","shortIdLength","paddingChar","makeConvertor","toAlphabet","useAlphabet","selectedOptions","getShortIdLength","alphabetLength","fromHex","HEX","toHex","generate","new","toUUID","shortUuid","enlargeUUID","shortId","join","alphabet","maxLength","constants","cookieBase90","Converter","srcAlphabet","dstAlphabet","converter","number","convert","BIN","OCT","DEC","divide","newlen","numberMap","fromBase","toBase","isValid","u","h","$","weekdays","split","months","utcOffset","abs","year","month","clone","D","ms","Q","_","S","O","locale","$L","$u","$x","$offset","$d","NaN","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isSame","startOf","endOf","isAfter","isBefore","$g","unix","valueOf","toDate","$locale","weekStart","$set","daysInMonth","subtract","invalidDate","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","extend","$i","isDayjs","en","Ls","_DestructibleEventEmitter","_eventProxyBinds","_targetDestroyHandlers","onOrOnce","hasRemoved","predTargetInstance","predEventName","predEventHandler","willKeep","getTargetInstanceQueueDepth","_removeTargetInstanceDestroyHandler","_removeAllProxyHandlers","_removeAllTargetInstanceDestroyHandlers","acc","curr","_arrayWithHoles","_iterableToArrayLimit","_arr","_n","_d","_s","_nonIterableRest","propIsEnumerable","propertyIsEnumerable","toObject","val","shouldUseNative","test1","test2","fromCharCode","test3","letter","to","descriptors","formatRegExp","isString","objects","JSON","isNull","isObject","deprecate","noDeprecation","deprecated","throwDeprecation","traceDeprecation","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","primitive","formatPrimitive","simple","isNumber","visibleKeys","arrayToHash","hash","formatError","RegExp","braces","formatArray","formatProperty","reduceToSingleString","cur","numLinesEst","line","ar","re","objectToString","pad","debuglog","NODE_DEBUG","toUpperCase","pid","isNullOrUndefined","isSymbol","timestamp","time","prop","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","promiseResolve","promiseReject","promise","custom","callbackify","callbackified","maybeCb","rej","fill","readUInt8","superCtor","super_","TempCtor","wrappedValue","_wrappedValue","_setWrappedValue","getWrappedValue","DEFAULT_BRIDGE_EVENT_NAMES","EVT_BRIDGE_EVENT_NAME_ADDED","EVT_BRIDGE_EVENT_NAME_REMOVED","phantomCollection","_phantomCollection","_bridgeEventNames","_linkedChildEventHandlers","_handleChildInstanceAdded","_handleChildInstanceRemoved","_mapChildEvent","_unmapChildEvent","childInstance","childUUID","_handleChildEvent","prevLength","manager","useServiceClassHandler","_collectionMap","__MANAGED__useServiceClassHandler","useServiceClass","ServiceClass","bindCollectionClass","CollectionClass","prevCollectionInstance","collectionInstance","getCollectionInstance","getCollectionClasses","collection","_pendingServiceClassInstanceSet","_circularWarningMessages","service","cachedService","ChildServiceClass","has","circularWarningMessage","startServiceClass","getServiceInstance","getServiceClasses","isPlainObject","unserialize","serialize","getSerializedState","Infinity","prot","libDeepMerge","isMergeableObject","isNonNullObject","isSpecial","stringValue","isReactElement","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","deepmerge","emptyTarget","defaultArrayMerge","element","getEnumerableOwnPropertySymbols","propertyIsOnObject","mergeObject","destination","propertyIsUnsafe","getMergeFunction","customMerge","arrayMerge","sourceIsArray","deepmergeAll","deepmerge_1","startTime","nodeJSPerformance","eval","parents","eventPrefix","checkEvents","startsWith","extractEvents","es5Import","fromEntries","compareExportedEvents","baseES5Import","extensionES5Import","baseES5ImportExclusions","exportsA","exportsB","keyA","valueA","valueB","elizaInitials","elizaKeywords","elizaPostTransforms","elizaFinals","elizaQuits","elizaPres","elizaSynons","be","belief","cannot","desire","everyone","family","happy","sad","ElizaBot","noRandomFlag","noRandom","capitalizeFirstLetter","memSize","_dataParsed","quit","mem","lastchoice","k","rules","synPatterns","sre","are","are1","are2","are3","wsre","ofs","sp","lp","rp","_sortKeywords","pres","posts","preExp","elizaPosts","postExp","transform","text","rpl","parts","part","getFinal","sentence","search","_execRule","_memGet","_getRuleIndexByKey","decomps","paramre","reasmbs","memflag","ri","alert","ki","m1","param","m2","lp2","rp2","_postTransform","_memSave","getInitial","elizaBot"],"mappings":"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F,MAAM,IAAI1hC,eAAJ,6DACkD0hC,EADlD,W,gDC5FG,SAASvnC,gBAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCCFxB,SAASC,kBAAkBC,EAAQC,GACjC,IAAK,IAAIxC,EAAI,EAAGA,EAAIwC,EAAMC,OAAQzC,IAAK,CACrC,IAAI0C,EAAaF,EAAMxC,GACvB0C,EAAW9B,WAAa8B,EAAW9B,aAAc,EACjD8B,EAAWC,cAAe,EACtB,UAAWD,IAAYA,EAAWE,UAAW,GACjDlC,OAAOC,eAAe4B,EAAQG,EAAWnB,IAAKmB,ICI3C,IAAMknC,EAAgB,CAC3B,+CACA,4CACA,8BACA,wBACA,aACA,6BACA,2BACA,kCACA,0EACA,uBACA,kCACA,wBACA,oBACA,2BAGWC,EAAgB,CAiB3B,CACE,QACA,EACA,CACE,CACE,IACA,CACE,uCACA,gBACA,8BACA,iCACA,qDACA,qBACA,yCACA,2BACA,YACA,4BACA,sCACA,yBACA,uBACA,sDACA,8CACA,8CACA,0CAKR,CACE,QACA,EACA,CACE,CACE,IACA,CACE,0BACA,+BACA,iDACA,0CACA,mCACA,mCACA,uCACA,sCAKR,CAAC,YAAa,EAAG,CAAC,CAAC,IAAK,CAAC,iBACzB,CACE,WACA,EACA,CACE,CACE,iBACA,CACE,6BACA,oDACA,8BACA,oCACA,oDACA,6CACA,oCACA,8CACA,8BACA,6BAGJ,CACE,sBACA,CACE,oCACA,4CACA,kBACA,YACA,qBACA,8CACA,4CAGJ,CACE,mBACA,CACE,0BACA,oCACA,oEACA,mDACA,eAKR,CACE,SACA,EACA,CACE,CACE,eACA,CACE,6CACA,8BACA,iCACA,qCACA,8BACA,+BACA,0CAGJ,CACE,qBACA,CACE,kBACA,4BACA,uCACA,oCACA,YACA,8BAKR,CACE,KACA,EACA,CACE,CACE,SACA,CACE,qCACA,wBACA,8BACA,kBACA,4BACA,qCACA,sCACA,oCAKR,CACE,UACA,EACA,CACE,CACE,gBACA,CACE,eACA,qDACA,oCACA,+EACA,0BACA,iBAKR,CACE,QACA,EACA,CACE,CACE,IACA,CACE,uCACA,sBACA,sCACA,qEACA,0CACA,qDAKR,CACE,UACA,EACA,CACE,CACE,IACA,CACE,gCACA,0BACA,8BACA,mBACA,kBACA,kCACA,iCACA,4CACA,kCAKR,CACE,OACA,GACA,CACE,CACE,IACA,CACE,+BACA,2DACA,sBACA,wCACA,gDACA,gCACA,2DACA,8FACA,yEACA,qEACA,sCACA,mCACA,mDACA,mDACA,6EAKR,CACE,UACA,EACA,CACE,CACE,IACA,CACE,gBACA,sCACA,oDAKR,CACE,WACA,EACA,CACE,CACE,IACA,CACE,gBACA,oCACA,oDAKR,CACE,WACA,EACA,CACE,CACE,IACA,CACE,gBACA,yBACA,qDAKR,CACE,UACA,EACA,CACE,CACE,IACA,CACE,gBACA,+BACA,qDAKR,CAAC,WAAY,EAAG,CAAC,CAAC,IAAK,CAAC,4BACxB,CACE,QACA,EACA,CACE,CACE,IACA,CACE,6CACA,0CAKR,CACE,WACA,GACA,CACE,CACE,IACA,CACE,0BACA,gCACA,2DACA,6CACA,mCACA,oCACA,mDACA,qGACA,gDACA,4EAKR,CACE,KACA,EACA,CACE,CACE,WACA,CACE,8BACA,4BACA,4CACA,sCACA,wCACA,qCACA,iCACA,iCACA,iDACA,gDACA,oCACA,cAGJ,CAAC,WAAY,CAAC,WACd,CAAC,IAAK,CAAC,uBAAwB,+BAGnC,CACE,MACA,EACA,CACE,CACE,cACA,CACE,2BACA,sCACA,4BACA,+BACA,yCACA,gDACA,iCACA,sBACA,4BACA,oDACA,gCACA,qDACA,qCACA,sCACA,mCACA,YACA,0BACA,sBACA,oEAGJ,CAAC,cAAe,CAAC,aACjB,CACE,UACA,CACE,uCACA,0CACA,6BACA,uBACA,yBACA,qCAKR,CACE,OACA,EACA,CACE,CACE,WACA,CACE,qCACA,2BACA,4CACA,kBACA,kCACA,0BAKR,CACE,MACA,EACA,CACE,CACE,YACA,CACE,wBACA,6BACA,gBACA,sCACA,oCACA,cAGJ,CACE,YACA,CACE,mBACA,uCACA,uCACA,iCACA,qBACA,+BACA,sCAGJ,CACE,cACA,CACE,uCACA,gCACA,qBACA,qBACA,8BAKR,CACE,IACA,EACA,CACE,CACE,gBACA,CACE,4CACA,uBACA,4BACA,6BACA,sCACA,2DAGJ,CACE,iBACA,CACE,uCACA,wDACA,wCACA,uCAGJ,CACE,mBACA,CACE,mCACA,mCACA,+BACA,8CAGJ,CAAC,YAAa,CAAC,aACf,CACE,kBACA,CACE,0BACA,gCACA,iCAGJ,CAAC,sBAAuB,CAAC,aACzB,CACE,WACA,CACE,iDACA,8BACA,yCACA,0BACA,sCACA,uCACA,4BACA,0BACA,2BACA,+BACA,uBACA,+BACA,4CAGJ,CACE,gBACA,CACE,sCACA,kBACA,6BACA,wCACA,2BAGJ,CACE,cACA,CACE,wBACA,qBACA,iCACA,2BAGJ,CACE,aACA,CACE,oCACA,yBACA,4BACA,yCAGJ,CACE,cACA,CACE,+CACA,yBACA,8BACA,4BAGJ,CACE,IACA,CACE,eACA,6BACA,0CACA,eACA,yCAKR,CACE,MACA,EACA,CACE,CAAC,uBAAwB,CAAC,eAC1B,CACE,cACA,CACE,iCACA,0CACA,sCACA,sCAGJ,CACE,eACA,CACE,8BACA,4CACA,kCACA,qBACA,oCACA,iDACA,yCAGJ,CACE,kBACA,CACE,0CACA,oCACA,6DACA,qEACA,2BACA,yCACA,2DAGJ,CACE,UACA,CACE,oCACA,aACA,iDACA,kCAKR,CACE,MACA,EACA,CACE,CACE,IACA,CACE,iCACA,gBACA,SACA,oBAKR,CACE,KACA,EACA,CACE,CACE,aACA,CACE,4BACA,uBACA,kCACA,6CACA,kBACA,mDACA,4CAGJ,CACE,IACA,CACE,yCACA,gCACA,WACA,gBAKR,CACE,KACA,EACA,CACE,CACE,WACA,CACE,6DACA,qCACA,6BACA,kBAGJ,CACE,kBACA,CACE,kCACA,+BACA,YACA,6DAGJ,CACE,SACA,CACE,YACA,2BACA,wBACA,+BACA,wDACA,qDAKR,CACE,MACA,EACA,CACE,CACE,cACA,CACE,mCACA,YACA,iCACA,uDAGJ,CACE,YACA,CACE,6DACA,iCACA,iCACA,gBAKR,CACE,OACA,EACA,CACE,CACE,IACA,CACE,kBACA,mCACA,sCACA,wCACA,qCACA,qBACA,wCACA,wCACA,kCAKR,CAAC,MAAO,EAAG,CAAC,CAAC,QAAS,CAAC,gBACvB,CAAC,OAAQ,EAAG,CAAC,CAAC,SAAU,CAAC,gBACzB,CAAC,QAAS,EAAG,CAAC,CAAC,UAAW,CAAC,gBAC3B,CAAC,MAAO,EAAG,CAAC,CAAC,QAAS,CAAC,gBACvB,CACE,UACA,EACA,CACE,CACE,IACA,CACE,2BACA,wCACA,kDACA,yCAKR,CACE,MACA,EACA,CACE,CACE,oBACA,CACE,8BACA,mCACA,2BACA,sBACA,cAGJ,CACE,kBACA,CACE,0CACA,iCACA,4CACA,uCACA,cAGJ,CAAC,IAAK,CAAC,gBAGX,CACE,WACA,EACA,CACE,CACE,gBACA,CACE,eACA,kBACA,yCACA,oBACA,6CACA,kBACA,2BACA,mDACA,6CAKR,CAAC,YAAa,EAAG,CAAC,CAAC,IAAK,CAAC,oBACzB,CAAC,SAAU,EAAG,CAAC,CAAC,IAAK,CAAC,oBACtB,CAAC,QAAS,EAAG,CAAC,CAAC,IAAK,CAAC,oBACrB,CACE,SACA,EACA,CACE,CACE,IACA,CACE,uCACA,QACA,qCACA,sBAKR,CACE,QACA,GACA,CACE,CACE,IACA,CACE,eACA,+BACA,4CACA,qCACA,8CACA,0CACA,yCACA,WAKR,CAAC,OAAQ,GAAI,CAAC,CAAC,gBAAiB,CAAC,iBACjC,CACE,YACA,EACA,CACE,CACE,IACA,CACE,uBACA,+BACA,4CACA,sCACA,4CACA,kDACA,YAOGC,EAAsB,CACjC,YACA,OACA,2BACA,cACA,0BACA,aACA,0BACA,aACA,qCACA,2BACA,oBACA,YACA,8CACA,qCAGWC,EAAc,CACzB,wCAEA,yCACA,qDACA,yEACA,yEAGWC,EAAa,CAAC,MAAO,UAAW,OAAQ,OAAQ,QAEhDC,EAAY,CACvB,OACA,QACA,OACA,QACA,OACA,QACA,YACA,WACA,SACA,WACA,SACA,UACA,SACA,QACA,QACA,UACA,YACA,MACA,UACA,WACA,WACA,WACA,YACA,WACA,OACA,MACA,SACA,UACA,MACA,OACA,OACA,QACA,YACA,QACA,aACA,SAwBWC,EAAc,CACzBC,GAAI,CAAC,KAAM,KAAM,MAAO,OACxBC,OAAQ,CAAC,OAAQ,QAAS,UAAW,QACrCC,OAAQ,CAAC,SACTC,OAAQ,CAAC,OAAQ,OAAQ,gBACzBC,SAAU,CAAC,YAAa,SAAU,SAClCC,OAAQ,CACN,SACA,MACA,SACA,MACA,SACA,UACA,OACA,WACA,QACA,QACA,OACA,SAEFC,MAAO,CAAC,SAAU,OAAQ,UAC1BC,IAAK,CAAC,UAAW,YAAa,SCt8BXC,E,WACnB,oBAAmC,IAAvBC,EAAsB,uFAChC7mC,KAAK6lC,cAAgBA,EACrB7lC,KAAK8lC,cAAgBA,EACrB9lC,KAAKgmC,YAAcA,EACnBhmC,KAAK+lC,oBAAsBA,EAC3B/lC,KAAKimC,WAAaA,EAClBjmC,KAAKkmC,UAAYA,EACjBlmC,KAAKmmC,YAAcA,EAEnBnmC,KAAK8mC,WAAWD,EAChB7mC,KAAK+mC,uBAAwB,EAC7B/mC,KAAK6J,OAAQ,EACb7J,KAAKgnC,QAAU,GACfhnC,KAAKmI,QAAU,iBAEfnI,KAAKinC,aAAc,EACdjnC,KAAKinC,cACRjnC,KAAK2sB,QACL3sB,KAAKinC,aAAc,GAErBjnC,KAAKmpB,Q,OFnCM,SAASrqB,aAAaT,EAAaU,EAAYC,GAG5D,OAFID,GAAYR,kBAAkBF,EAAYN,UAAWgB,GACrDC,GAAaT,kBAAkBF,EAAaW,GACzCX,E,8BEmCP,SAAA8qB,QACEnpB,KAAKknC,MAAO,EACZlnC,KAAKmnC,IAAM,GACXnnC,KAAKonC,WAAa,GAElB,IAAK,IAAIC,EAAI,EAAGA,EAAIrnC,KAAK8lC,cAAcpnC,OAAQ2oC,IAAK,CAClDrnC,KAAKonC,WAAWC,GAAK,GAErB,IADA,IAAIC,EAAQtnC,KAAK8lC,cAAcuB,GAAG,GACzBprC,EAAI,EAAGA,EAAIqrC,EAAM5oC,OAAQzC,IAAK+D,KAAKonC,WAAWC,GAAGprC,IAAM,K,mBAKpE,SAAA0wB,QAGE,IAAI4a,EAAc,GAElB,GAAIvnC,KAAKmmC,aAA0C,iBAApBnmC,KAAKmmC,YAClC,IAAK,IAAIlqC,KAAK+D,KAAKmmC,YACjBoB,EAAYtrC,GAAK,IAAMA,EAAI,IAAM+D,KAAKmmC,YAAYlqC,GAAGm2B,KAAK,KAAO,IAIlEpyB,KAAK8lC,eAC8B,oBAA7B9lC,KAAK8lC,cAAcpnC,SAE1BsB,KAAK8lC,cAAgB,CAAC,CAAC,MAAO,EAAG,CAAC,CAAC,MAAO,QAU5C,IANA,IAAI0B,EAAM,SACNC,EAAM,mBACNC,EAAO,gBACPC,EAAO,gBACPC,EAAO,aACPC,EAAO,OACFR,EAAI,EAAGA,EAAIrnC,KAAK8lC,cAAcpnC,OAAQ2oC,IAAK,CAClD,IAAIC,EAAQtnC,KAAK8lC,cAAcuB,GAAG,GAClCrnC,KAAK8lC,cAAcuB,GAAG,GAAKA,EAC3B,IAAK,IAAIprC,EAAI,EAAGA,EAAIqrC,EAAM5oC,OAAQzC,IAAK,CACrC,IAAIc,EAAIuqC,EAAMrrC,GAEd,GAAuB,MAAnBc,EAAE,GAAGgmB,OAAO,GAAY,CAE1B,IADA,IAAI+kB,EAAM,EACkB,MAArB/qC,EAAE,GAAGgmB,OAAO+kB,IAAcA,IACjC/qC,EAAE,GAAKA,EAAE,GAAGme,UAAU4sB,GACtB/qC,EAAE,IAAK,OAEPA,EAAE,IAAK,EAIT,IADA,IAAIV,EAAImrC,EAAIzxB,KAAKhZ,EAAE,IACZV,GAAG,CACR,IAAI0rC,EAAKR,EAAYlrC,EAAE,IAAMkrC,EAAYlrC,EAAE,IAAMA,EAAE,GACnDU,EAAE,GACAA,EAAE,GAAGme,UAAU,EAAG7e,EAAE2X,OACpB+zB,EACAhrC,EAAE,GAAGme,UAAU7e,EAAE2X,MAAQ3X,EAAE,GAAGqC,QAChCrC,EAAImrC,EAAIzxB,KAAKhZ,EAAE,IAGjB,GAAI6qC,EAAKl+B,KAAK3M,EAAE,IACdA,EAAE,GAAK,mBACF,CAEL,GADAV,EAAIorC,EAAI1xB,KAAKhZ,EAAE,IACR,CAGL,IAFA,IAAIirC,EAAK,GACLC,EAAKlrC,EAAE,GACJV,GACL2rC,GAAMC,EAAG/sB,UAAU,EAAG7e,EAAE2X,MAAQ,GACnB,MAAT3X,EAAE,KAAY2rC,GAAM,OACxBA,GAAM,eACO,MAAT3rC,EAAE,IAAuB,OAATA,EAAE,KAAa2rC,GAAM,OACzCA,GAAM3rC,EAAE,GACR4rC,EAAKA,EAAG/sB,UAAU7e,EAAE2X,MAAQ3X,EAAE,GAAGqC,QACjCrC,EAAIorC,EAAI1xB,KAAKkyB,GAEflrC,EAAE,GAAKirC,EAAKC,EAGd,GADA5rC,EAAIqrC,EAAK3xB,KAAKhZ,EAAE,IACT,CACL,IAAIirC,EAAK,eACI,MAAT3rC,EAAE,IAAuB,OAATA,EAAE,KAAa2rC,GAAM,OACzCjrC,EAAE,GAAKirC,EAAKjrC,EAAE,GAAGme,UAAU7e,EAAE2X,MAAQ,EAAI3X,EAAE,GAAGqC,QAGhD,GADArC,EAAIsrC,EAAK5xB,KAAKhZ,EAAE,IACT,CACL,IAAIirC,EAAKjrC,EAAE,GAAGme,UAAU,EAAG7e,EAAE2X,MAAQ,GACxB,MAAT3X,EAAE,KAAY2rC,GAAM,OACxBjrC,EAAE,GAAKirC,EAAK,gBAIhBjrC,EAAE,GAAKA,EAAE,GAAGk0B,QAAQ4W,EAAM,QAC1BA,EAAK5uB,UAAY,GASrB,GALAjZ,KAAK8lC,cAAc9rB,KAAKha,KAAKkoC,eAE7BloC,KAAKmoC,KAAO,GACZnoC,KAAKooC,MAAQ,GAETpoC,KAAKkmC,WAAalmC,KAAKkmC,UAAUxnC,OAAQ,CAE3C,IADA,IAAIuH,EAAI,GACChK,EAAI,EAAGA,EAAI+D,KAAKkmC,UAAUxnC,OAAQzC,GAAK,EAC9CgK,EAAEpB,KAAK7E,KAAKkmC,UAAUjqC,IACtB+D,KAAKmoC,KAAKnoC,KAAKkmC,UAAUjqC,IAAM+D,KAAKkmC,UAAUjqC,EAAI,GAEpD+D,KAAKqoC,OAAS,IAAI9K,OAAO,OAASt3B,EAAEmsB,KAAK,KAAO,aAGhDpyB,KAAKqoC,OAAS,OACdroC,KAAKmoC,KAAK,QAAU,OAGtB,GAAInoC,KAAKsoC,YAActoC,KAAKsoC,WAAW5pC,OAAQ,CAE7C,IADA,IAAIuH,EAAI,GACChK,EAAI,EAAGA,EAAI+D,KAAKsoC,WAAW5pC,OAAQzC,GAAK,EAC/CgK,EAAEpB,KAAK7E,KAAKsoC,WAAWrsC,IACvB+D,KAAKooC,MAAMpoC,KAAKsoC,WAAWrsC,IAAM+D,KAAKsoC,WAAWrsC,EAAI,GAEvD+D,KAAKuoC,QAAU,IAAIhL,OAAO,OAASt3B,EAAEmsB,KAAK,KAAO,aAGjDpyB,KAAKuoC,QAAU,OACfvoC,KAAKooC,MAAM,QAAU,OAGlBpoC,KAAKimC,YAAgD,qBAA3BjmC,KAAKimC,WAAWvnC,SAC7CsB,KAAKimC,WAAa,IAGpBjmC,KAAKinC,aAAc,I,2BAGrB,SAAAiB,cAAcjiC,EAAG0O,GAEf,OAAI1O,EAAE,GAAK0O,EAAE,IAAY,EAChB1O,EAAE,GAAK0O,EAAE,IAET1O,EAAE,GAAK0O,EAAE,GAFW,EAGpB1O,EAAE,GAAK0O,EAAE,IAAY,EAClB,I,uBAGd,SAAA6zB,UAAUC,GACR,IAAIC,EAAM,GACV1oC,KAAKknC,MAAO,EAUZ,IADA,IAAIyB,GAFJF,GADAA,GADAA,GADAA,GADAA,GADAA,EAAOA,EAAK5oB,eACAoR,QAAQ,4CAA6C,MACrDA,QAAQ,YAAa,MACrBA,QAAQ,kBAAmB,MAC3BA,QAAQ,iBAAkB,MAC1BA,QAAQ,UAAW,MAEd2C,MAAM,KACd33B,EAAI,EAAGA,EAAI0sC,EAAMjqC,OAAQzC,IAAK,CACrC,IAAI2sC,EAAOD,EAAM1sC,GACjB,GAAa,KAAT2sC,EAAa,CAEf,IAAK,IAAI/mB,EAAI,EAAGA,EAAI7hB,KAAKimC,WAAWvnC,OAAQmjB,IAC1C,GAAI7hB,KAAKimC,WAAWpkB,KAAO+mB,EAEzB,OADA5oC,KAAKknC,MAAO,EACLlnC,KAAK6oC,WAIhB,IAAIxsC,EAAI2D,KAAKqoC,OAAOtyB,KAAK6yB,GACzB,GAAIvsC,EAAG,CAGL,IAFA,IAAI2rC,EAAK,GACLC,EAAKW,EACFvsC,GACL2rC,GAAMC,EAAG/sB,UAAU,EAAG7e,EAAE2X,OAAShU,KAAKmoC,KAAK9rC,EAAE,IAC7C4rC,EAAKA,EAAG/sB,UAAU7e,EAAE2X,MAAQ3X,EAAE,GAAGqC,QACjCrC,EAAI2D,KAAKqoC,OAAOtyB,KAAKkyB,GAEvBW,EAAOZ,EAAKC,EAEdjoC,KAAK8oC,SAAWF,EAEhB,IAAK,IAAIvB,EAAI,EAAGA,EAAIrnC,KAAK8lC,cAAcpnC,OAAQ2oC,IAQ7C,GANEuB,EAAKG,OACH,IAAIxL,OAAO,MAAQv9B,KAAK8lC,cAAcuB,GAAG,GAAK,MAAO,OAClD,IAELqB,EAAM1oC,KAAKgpC,UAAU3B,IAEX,KAARqB,EAAY,OAAOA,GAO7B,GAAY,MAFZA,EAAM1oC,KAAKipC,WAEK,CACdjpC,KAAK8oC,SAAW,IAChB,IAAIzB,EAAIrnC,KAAKkpC,mBAAmB,SAC5B7B,GAAK,IAAGqB,EAAM1oC,KAAKgpC,UAAU3B,IAGnC,MAAe,KAARqB,EAAaA,EAAM,8B,uBAI5B,SAAAM,UAAU3B,GAIR,IAHA,IACI8B,EADOnpC,KAAK8lC,cAAcuB,GACX,GACf+B,EAAU,eACLntC,EAAI,EAAGA,EAAIktC,EAAQzqC,OAAQzC,IAAK,CACvC,IAAII,EAAI2D,KAAK8oC,SAAS/wB,MAAMoxB,EAAQltC,GAAG,IACvC,GAAS,MAALI,EAAW,CACb,IAAIgtC,EAAUF,EAAQltC,GAAG,GACrBqtC,EAAUH,EAAQltC,GAAG,GACrBstC,EAAKvpC,KAAK8mC,SAAW,EAAI/6B,KAAKuY,MAAMvY,KAAKyD,SAAW65B,EAAQ3qC,QAE7DsB,KAAK8mC,UAAY9mC,KAAKonC,WAAWC,GAAGprC,GAAKstC,GAC1CvpC,KAAKonC,WAAWC,GAAGprC,KAAOstC,GAE1BA,IAAOvpC,KAAKonC,WAAWC,GAAGprC,KAChBotC,EAAQ3qC,SAChB6qC,EAAK,EACLvpC,KAAKonC,WAAWC,GAAGprC,IAAM,GAG3B+D,KAAKonC,WAAWC,GAAGprC,GAAKstC,EAE1B,IAAIb,EAAMW,EAAQE,GAelB,GAdIvpC,KAAK6J,OAEP2/B,MACE,gBACExpC,KAAK8lC,cAAcuB,GAAG,GACtB,WACArnC,KAAK8lC,cAAcuB,GAAG,GACtB,aACA8B,EAAQltC,GAAG,GACX,aACAysC,EACA,cACAY,GAE4B,IAA9BZ,EAAIK,OAAO,SAAU,KAAY,CACnC,IAAMU,EAAKzpC,KAAKkpC,mBAAmBR,EAAIxtB,UAAU,IACjD,GAAIuuB,GAAM,EAAG,OAAOzpC,KAAKgpC,UAAUS,GAGrC,IAAIC,EAAKN,EAAQrzB,KAAK2yB,GACtB,GAAIgB,EAAI,CAGN,IAFA,IAAI1B,EAAK,GACLC,EAAKS,EACFgB,GAAI,CACT,IAAIC,EAAQttC,EAAEukB,SAAS8oB,EAAG,KAEtBE,EAAK5pC,KAAKuoC,QAAQxyB,KAAK4zB,GAC3B,GAAIC,EAAI,CAGN,IAFA,IAAIC,EAAM,GACNC,EAAMH,EACHC,GACLC,GAAOC,EAAI5uB,UAAU,EAAG0uB,EAAG51B,OAAShU,KAAKooC,MAAMwB,EAAG,IAClDE,EAAMA,EAAI5uB,UAAU0uB,EAAG51B,MAAQ41B,EAAG,GAAGlrC,QACrCkrC,EAAK5pC,KAAKuoC,QAAQxyB,KAAK+zB,GAEzBH,EAAQE,EAAMC,EAEhB9B,GAAMC,EAAG/sB,UAAU,EAAGwuB,EAAG11B,OAAS21B,EAClC1B,EAAKA,EAAG/sB,UAAUwuB,EAAG11B,MAAQ01B,EAAG,GAAGhrC,QACnCgrC,EAAKN,EAAQrzB,KAAKkyB,GAEpBS,EAAMV,EAAKC,EAGb,GADAS,EAAM1oC,KAAK+pC,eAAerB,IACtBY,EACC,OAAOZ,EADC1oC,KAAKgqC,SAAStB,IAI/B,MAAO,K,4BAGT,SAAAqB,eAAe7rC,GAIb,GADAA,GADAA,EAAIA,EAAE+yB,QAAQ,UAAW,MACnBA,QAAQ,SAAU,KACpBjxB,KAAK+lC,qBAAuB/lC,KAAK+lC,oBAAoBrnC,OACvD,IAAK,IAAIzC,EAAI,EAAGA,EAAI+D,KAAK+lC,oBAAoBrnC,OAAQzC,GAAK,EACxDiC,EAAIA,EAAE+yB,QACJjxB,KAAK+lC,oBAAoB9pC,GACzB+D,KAAK+lC,oBAAoB9pC,EAAI,IAE/B+D,KAAK+lC,oBAAoB9pC,GAAGgd,UAAY,EAI5C,GAAIjZ,KAAK+mC,sBAAuB,CAC9B,IACI1qC,EADK,WACE0Z,KAAK7X,GACZ7B,IAAG6B,EAAI7B,EAAE,GAAGgiC,cAAgBngC,EAAEgd,UAAU,IAE9C,OAAOhd,I,gCAGT,SAAAgrC,mBAAmB1rC,GACjB,IAAK,IAAI6pC,EAAI,EAAGA,EAAIrnC,KAAK8lC,cAAcpnC,OAAQ2oC,IAC7C,GAAIrnC,KAAK8lC,cAAcuB,GAAG,KAAO7pC,EAAK,OAAO6pC,EAE/C,OAAQ,I,sBAGV,SAAA2C,SAAS7sC,GACP6C,KAAKmnC,IAAItiC,KAAK1H,GACV6C,KAAKmnC,IAAIzoC,OAASsB,KAAKgnC,SAAShnC,KAAKmnC,IAAIrzB,U,qBAG/C,SAAAm1B,UACE,GAAIjpC,KAAKmnC,IAAIzoC,OAAQ,CACnB,GAAIsB,KAAK8mC,SAAU,OAAO9mC,KAAKmnC,IAAIrzB,QAIjC,IAFA,IAAIpW,EAAIqO,KAAKuY,MAAMvY,KAAKyD,SAAWxP,KAAKmnC,IAAIzoC,QACxCgqC,EAAM1oC,KAAKmnC,IAAIzpC,GACVzB,EAAIyB,EAAI,EAAGzB,EAAI+D,KAAKmnC,IAAIzoC,OAAQzC,IACvC+D,KAAKmnC,IAAIlrC,EAAI,GAAK+D,KAAKmnC,IAAIlrC,GAE7B,OADA+D,KAAKmnC,IAAIzoC,SACFgqC,EAEJ,MAAO,K,sBAGhB,SAAAG,WACE,OAAK7oC,KAAKgmC,YACHhmC,KAAKgmC,YACVj6B,KAAKuY,MAAMvY,KAAKyD,SAAWxP,KAAKgmC,YAAYtnC,SAFhB,K,wBAMhC,SAAAurC,aACE,OAAKjqC,KAAK6lC,cACH7lC,KAAK6lC,cACV95B,KAAKuY,MAAMvY,KAAKyD,SAAWxP,KAAK6lC,cAAcnnC,SAFhB,O,YC/X9BwrC,EAAW,IAAjB,EAEAzkC,YAAkB,SAAS,kBAAMykC,EAAN,gBAC3BzkC,YAAkB,SAAS,gBAAGgjC,EAAH,cAAcyB,YAAd,MAC3BzkC,YAAkB,OAAO,kBAAMykC,EAAN","file":"1.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 85);\n","module.exports = require(\"regenerator-runtime\");\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","const PhantomCore = require(\"./PhantomCore\");\nconst {\n  EVT_NO_INIT_WARN,\n  EVT_READY,\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n} = PhantomCore;\n\nmodule.exports = PhantomCore;\n\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","const getClass = require(\"./getClass\");\n\n/**\n * Retrieves the JavaScript class name of the given class or class instance.\n *\n * @param {function | Object} instanceOrClass\n * @return {string}\n */\nmodule.exports = function getClassName(instanceOrClass) {\n  const JSClass = getClass(instanceOrClass);\n\n  return JSClass.name;\n};\n","/**\n * Determines if the given JavaScript class or class instance is a class instance.\n *\n * @param {function | Object} instanceOrClass\n * @return {boolean}\n */\nmodule.exports = function getIsClassInstance(instanceOrClass) {\n  // @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf\n  // If a polyfill for getPrototypeOf is needed, look here: https://github.com/zloirock/core-js#ecmascript-object\n  return Boolean(typeof Object.getPrototypeOf(instanceOrClass) === \"object\");\n};\n","var defineProperty = require(\"./defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import { EVT_READY } from \"phantom-core\";\n\n/** @type {Map<string, Function>} */\nconst rpcMethodMap = new Map();\n\n/**\n * Registers a callback handler to be invoked when an RPC method is requested.\n *\n * @param {string} method\n * @param {Function} handler\n * @return {void}\n */\nexport function registerRPCMethod(method, handler) {\n  if (rpcMethodMap.get(method)) {\n    throw new Error(\n      `rpcMethodMap already has a handler for method: \"${method}\"`\n    );\n  }\n\n  rpcMethodMap.set(method, handler);\n}\n\n/**\n * Listens for messages from host process.\n *\n * Loosely based on JSON-RPC.\n *\n * @see https://en.wikipedia.org/wiki/JSON-RPC\n * @see https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel/message_event\n *\n * @param {MessageEvent} evt\n * @return {Promise<void>}\n */\nglobal.addEventListener(\"message\", async evt => {\n  const { method, params, id } = evt.data;\n\n  const handler = rpcMethodMap.get(method);\n\n  if (handler) {\n    try {\n      const result = await handler(params);\n\n      // TODO: Ensure same origin\n      global.postMessage({ id, method, result });\n    } catch (error) {\n      global.postMessage({ id, method, error });\n    }\n  }\n});\n\n// Emit that we're ready\nglobal.postMessage(EVT_READY);\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","const getIsClassInstance = require(\"./getIsClassInstance\");\n\n/**\n * Retrieves the JavaScript class of the given object instance, or class.\n *\n * If a class is passed in, the original class is returned.\n *\n * @param {function | Object} instanceOrClass\n * @return {Function}\n */\nmodule.exports = function getClass(instanceOrClass) {\n  const isInstance = getIsClassInstance(instanceOrClass);\n\n  if (isInstance) {\n    return instanceOrClass.constructor;\n  } else {\n    return instanceOrClass;\n  }\n};\n","const LOG_LEVEL_TRACE = 0;\nconst LOG_LEVEL_DEBUG = 1;\nconst LOG_LEVEL_INFO = 2;\nconst LOG_LEVEL_WARN = 3;\nconst LOG_LEVEL_ERROR = 4;\nconst LOG_LEVEL_SILENT = 5;\n\nconst LOG_LEVEL_STRING_MAP = {\n  trace: LOG_LEVEL_TRACE,\n  debug: LOG_LEVEL_DEBUG,\n  info: LOG_LEVEL_INFO,\n  warn: LOG_LEVEL_WARN,\n  error: LOG_LEVEL_ERROR,\n  silent: LOG_LEVEL_SILENT,\n};\n\n/**\n * A very simple JavaScript logger, which wraps console.log/debug, etc. calls\n * while retaining the original stack traces.\n *\n * This utility was inspired by https://www.npmjs.com/package/loglevel. One of\n * the main reasons why I didn't use loglevel is because loglevel doesn't use\n * the browser's default console.debug mechanism and setting up namespaced\n * loggers wasn't very straightforward.\n */\nclass Logger {\n  constructor(options = {}) {\n    const DEFAULT_OPTIONS = {\n      logLevel: LOG_LEVEL_INFO,\n      prefix: logLevel => `[${logLevel}]`,\n    };\n\n    this._options = { ...DEFAULT_OPTIONS, ...options };\n\n    this.log = null;\n    this._logLevel = this._options.logLevel;\n\n    // Set up log level, extending this class functionality with log levels\n    this.setLogLevel(this._options.logLevel);\n  }\n\n  /**\n   * Sets minimum log level to send to actual logger function where subsequent\n   * log levels are ignored.\n   *\n   * @param {string || number} logLevel\n   * @return {void}\n   */\n  setLogLevel(logLevel) {\n    if (typeof logLevel === \"string\") {\n      logLevel = LOG_LEVEL_STRING_MAP[logLevel];\n    }\n\n    if (!Object.values(LOG_LEVEL_STRING_MAP).includes(logLevel)) {\n      throw new Error(`Unknown log level: ${logLevel}`);\n    }\n\n    this._logLevel = logLevel;\n\n    // Dynamically create log function, filtering out methods which are outside\n    // of logLevel scope\n    this.log = (() => {\n      const prefix = this._options.prefix;\n\n      /**\n       * Each logger method should retain original stack trace\n       *\n       * @see https://stackoverflow.com/questions/9559725/extending-console-log-without-affecting-log-line\n       */\n\n      const loggerMethods = {};\n\n      if (logLevel <= LOG_LEVEL_TRACE) {\n        loggerMethods.trace = Function.prototype.bind.call(\n          console.trace,\n          console,\n          prefix(\"trace\")\n        );\n      } else {\n        loggerMethods.trace = () => null;\n      }\n\n      if (logLevel <= LOG_LEVEL_DEBUG) {\n        loggerMethods.debug = Function.prototype.bind.call(\n          console.debug,\n          console,\n          prefix(\"debug\")\n        );\n      } else {\n        loggerMethods.debug = () => null;\n      }\n\n      if (logLevel <= LOG_LEVEL_INFO) {\n        loggerMethods.info = Function.prototype.bind.call(\n          console.info,\n          console,\n          prefix(\"info\")\n        );\n      } else {\n        loggerMethods.info = () => null;\n      }\n\n      if (logLevel <= LOG_LEVEL_WARN) {\n        loggerMethods.warn = Function.prototype.bind.call(\n          console.warn,\n          console,\n          prefix(\"warn\")\n        );\n      } else {\n        loggerMethods.warn = () => null;\n      }\n\n      if (logLevel <= LOG_LEVEL_ERROR) {\n        loggerMethods.error = Function.prototype.bind.call(\n          console.error,\n          console,\n          prefix(\"error\")\n        );\n      } else {\n        loggerMethods.error = () => null;\n      }\n\n      // Calling this.log() directly will log as info (log info alias)\n      const log = loggerMethods.info;\n\n      Object.keys(loggerMethods).forEach(method => {\n        // IMPORTANT: Both of these are used intentionally\n\n        // Extend off of log method (i.e. PhantomCore's this.log.debug)\n        log[method] = loggerMethods[method];\n\n        // Extend class with logger methods\n        this[method] = loggerMethods[method];\n      });\n\n      return log;\n    })();\n  }\n\n  /**\n   * @return {LOG_LEVEL_TRACE | LOG_LEVEL_DEBUG | LOG_LEVEL_INFO | LOG_LEVEL_WARN | LOG_LEVEL_ERROR | LOG_LEVEL_SILENT}\n   */\n  getLogLevel() {\n    return this._logLevel;\n  }\n}\n\nmodule.exports = Logger;\nmodule.exports.LOG_LEVEL_TRACE = LOG_LEVEL_TRACE;\nmodule.exports.LOG_LEVEL_DEBUG = LOG_LEVEL_DEBUG;\nmodule.exports.LOG_LEVEL_INFO = LOG_LEVEL_INFO;\nmodule.exports.LOG_LEVEL_WARN = LOG_LEVEL_WARN;\nmodule.exports.LOG_LEVEL_ERROR = LOG_LEVEL_ERROR;\nmodule.exports.LOG_LEVEL_SILENT = LOG_LEVEL_SILENT;\n","/**\n * Retrieves seconds since midnight Jan. 1, 1970 (UTC).\n *\n * @return {number}\n */\nmodule.exports = function getUnixTime() {\n  const date = new Date();\n\n  const utc = Date.UTC(\n    date.getUTCFullYear(),\n    date.getUTCMonth(),\n    date.getUTCDate(),\n    date.getUTCHours(),\n    date.getUTCMinutes(),\n    date.getUTCSeconds()\n  );\n\n  return Math.round(utc / 1000);\n};\n","const getIsClassInstance = require(\"./getIsClassInstance\");\n\n/**\n * Retrieves an array of the given class property names.\n *\n * IMPORTANT: This retrieves an array of strings, and not pointers to the\n * properties themselves.\n *\n * @param {Function} classInstance JavaScript class instance\n * @return {string[]} An array of property names\n */\nmodule.exports = function getClassInstancePropertyNames(classInstance) {\n  if (!getIsClassInstance(classInstance)) {\n    throw new TypeError(\"classInstance must be an instance of a class\");\n  }\n\n  const properties = new Set();\n\n  let currentObj = classInstance;\n  do {\n    Object.getOwnPropertyNames(currentObj).map(item => properties.add(item));\n  } while ((currentObj = Object.getPrototypeOf(currentObj)));\n\n  return [...properties.keys()];\n};\n","const getClassInstancePropertyNames = require(\"./getClassInstancePropertyNames\");\n\n/**\n * Retrieves an array of class method names for the given JavaScript class.\n *\n * IMPORTANT: This retrieves an array of strings, and not pointers to the\n * methods themselves.\n *\n * @param {Function} classInstance JavaScript class instance\n * @return {string[]} An array of method names\n */\nmodule.exports = function getClassInstanceMethodNames(classInstance) {\n  const propertyNames = getClassInstancePropertyNames(classInstance);\n\n  return propertyNames.filter(\n    item => typeof classInstance[item] === \"function\"\n  );\n};\n","const PhantomCollection = require(\"./PhantomCollection\");\nconst {\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n  EVT_CHILD_INSTANCE_ADDED,\n  EVT_CHILD_INSTANCE_REMOVED,\n} = PhantomCollection;\n\nmodule.exports = PhantomCollection;\n\nmodule.exports.EVT_CHILD_INSTANCE_ADDED = EVT_CHILD_INSTANCE_ADDED;\nmodule.exports.EVT_CHILD_INSTANCE_REMOVED = EVT_CHILD_INSTANCE_REMOVED;\n\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","const PhantomCore = require(\"./PhantomCore\");\nconst {\n  /** @export */\n  EVT_NO_INIT_WARN,\n  /** @export */\n  EVT_READY,\n  /** @export */\n  EVT_UPDATED,\n  /** @export */\n  EVT_BEFORE_DESTROY,\n  /** @export */\n  EVT_DESTROY_STACK_TIMED_OUT,\n  /** @export */\n  EVT_DESTROYED,\n} = PhantomCore;\n\n/**\n * A simple, object-based state management utility.\n */\nclass PhantomState extends PhantomCore {\n  /**\n   * @param {Object} initialState? [default = {}]\n   * @param {Object} superOptions? [default = {}] If set, these options are\n   * passed to the super instance.\n   */\n  constructor(initialState = {}, superOptions = {}) {\n    super(superOptions);\n\n    this._state = {};\n\n    if (initialState) {\n      this.setState(initialState);\n    }\n\n    // Reset state on destruct\n    this.registerCleanupHandler(() => {\n      this._state = null;\n    });\n  }\n\n  /**\n   * Retrieves the current state.\n   *\n   * @return {Object}\n   */\n  getState() {\n    return this._state;\n  }\n\n  /**\n   * Sets the next state, using shallow-merge strategy.\n   *\n   * NOTE: The previous state object will be re-referenced.\n   *\n   * @param {Object} partialNextState\n   * @param {boolean} isMerge? [default = true]\n   * @emits EVT_UPDATED With partialNextState\n   * @return {void}\n   */\n  setState(partialNextState, isMerge = true) {\n    if (typeof partialNextState !== \"object\") {\n      throw new TypeError(\"partialNextState must be an object\");\n    }\n\n    if (isMerge) {\n      this._state = { ...this._state, ...partialNextState };\n    } else {\n      this._state = partialNextState;\n    }\n\n    this.emit(EVT_UPDATED, partialNextState);\n  }\n}\n\nmodule.exports = PhantomState;\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","const EventEmitter = require(\"events\");\nconst getClassName = require(\"./utils/class-utils/getClassName\");\nconst logger = require(\"./globalLogger\");\n\n/**\n * @export\n * @event EVT_BEFORE_DESTROY Emits directly before any destructor handling.\n */\nconst EVT_BEFORE_DESTROY = \"before-destroy\";\n\n/** @export */\nconst EVT_DESTROY_STACK_TIMED_OUT = \"destroy-stack-timed-out\";\n\n/** @export */\nconst EVT_DESTROYED = \"destroyed\";\n\n// Number of milliseconds before the instance will warn about potential\n// destruct problems\nconst SHUT_DOWN_GRACE_PERIOD = 5000;\n\n/**\n * Common base class for PhantomCore and any utilities which PhantomCore may\n * need to use within the core itself.\n *\n * For most purposes, PhantomCore should be utilized instead of this.\n */\nmodule.exports = class DestructibleEventEmitter extends EventEmitter {\n  constructor() {\n    super();\n\n    this._isDestroying = false;\n    this._isDestroyed = false;\n\n    // Prevent incorrect usage of EVT_DESTROYED; EVT_DESTROYED should only be\n    // emit internally during the shutdown phase\n    this.on(EVT_DESTROYED, () => {\n      if (!this._isDestroyed) {\n        // IMPORTANT: Don't await here; we want to throw the error and destruct\n        // the instance at the same time due to it being in a potentially invalid\n        // state\n        this.destroy();\n\n        throw new Error(\n          \"EVT_DESTROYED was incorrectly emit without initially being in a destroyed state. Destructing instance due to potential state invalidation.\"\n        );\n      }\n    });\n  }\n\n  /**\n   * Retrieves total number of event listeners registered to this instance.\n   *\n   * @return {number}\n   */\n  getTotalListenerCount() {\n    return this.eventNames()\n      .map(eventName => this.listenerCount(eventName))\n      .reduce((a, b) => a + b, 0);\n  }\n\n  /**\n   * Retrieves whether or not the class is currently being destroyed.\n   *\n   * @return {boolean}\n   */\n  getIsDestroying() {\n    return this._isDestroying;\n  }\n\n  /**\n   * Retrieves whether or not the instance is currently destroyed.\n   *\n   * @return {boolean}\n   */\n  getIsDestroyed() {\n    return this._isDestroyed;\n  }\n\n  /**\n   * @param {Function} destroyHandler? [optional] If defined, will execute\n   * prior to normal destruct operations for this instance.\n   * @param {Function} postDestroyHandler? [optional] If defined, will execute\n   * after all event listeners have been removed from the instance. This is\n   * primarily used for the PhantomCore superclass and exposed via\n   * registerCleanupHandler to inheriting classes of PhantomCore.\n   * @return {Promise<void>}\n   * @emits EVT_BEFORE_DESTROY Emits a single time, regardless of calls to the\n   * destroy() method, before the destroy handler stack is executed.\n   * @emits EVT_DESTROY_STACK_TIMED_OUT Emits if the destroy handler stack\n   * takes longer than expected to execute.\n   * @emits EVT_DESTROYED Emits a single time, regardless of calls to the\n   * destroy() method, after the destroy handler stack has executed.\n   */\n  async destroy(destroyHandler = () => null, postDestroyHandler = () => null) {\n    if (this._isDestroying) {\n      logger.warn(\n        `${getClassName(\n          this\n        )} is already being destroyed. The subsequent call has been ignored. Ensure callers are checking for destroy status before calling destroy().`\n      );\n    } else if (this._isDestroyed) {\n      // NOTE: When calling from PhantomCore, after full destruct, this may not\n      // get executed, as PhantomCore itself will reroute the subsequent call to\n      // a null handler\n      throw new Error(`\"${getClassName(this)}\" has already been destroyed.`);\n    } else {\n      this._isDestroying = true;\n\n      this.emit(EVT_BEFORE_DESTROY);\n\n      // Help ensure where to wind up in a circular awaiting \"gridlock\"\n      // situation, where two or more instances await on one another to shutdown\n      let longRespondDestroyHandlerTimeout = setTimeout(() => {\n        this.emit(EVT_DESTROY_STACK_TIMED_OUT);\n      }, SHUT_DOWN_GRACE_PERIOD);\n\n      // This try / await fixes issue where this instance would emit\n      // EVT_DESTROY_STACK_TIMED_OUT after a period of time if the\n      // destroyHandler callback errored\n      try {\n        await destroyHandler();\n      } catch (err) {\n        throw err;\n      } finally {\n        clearTimeout(longRespondDestroyHandlerTimeout);\n      }\n\n      // Set the state before the event is emit so that any listeners will know\n      // the correct state.\n      //\n      // IMPORTANT: It is by design _isDestroyed is set to true before\n      // _isDestroying is set to false. The reasoning is that we want to relay\n      // the \"destroyed\" state to any subsequent event handlers, while not\n      // actually being completely done with our cleanup work at this point.\n      this._isDestroyed = true;\n\n      // IMPORTANT: This must come before removal of all listeners\n      this.emit(EVT_DESTROYED);\n\n      // Remove all event listeners; we're stopped\n      this.removeAllListeners();\n\n      // IMPORTANT: This is intended to come after removeAllListeners has been\n      // invoked\n      await postDestroyHandler();\n\n      if (this.getTotalListenerCount()) {\n        throw new Error(\n          \"An event handler has been registered in a post destruct callback which could cause a potential memory leak.\"\n        );\n      }\n\n      // Completely out of \"destroying\" phase (truly destroyed at this point)\n      this._isDestroying = false;\n    }\n  }\n};\n\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","const Logger = require(\"./Logger\");\n\nmodule.exports = new Logger();\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","const packageJson = require(\"../../package.json\");\n\n/**\n * @return {Object}\n */\nmodule.exports = function getPackageJSON() {\n  return packageJson;\n};\n","/** @export */\nconst FUNCTION_STACK_OPS_ORDER_FIFO = \"FIFO\";\n/** @export */\nconst FUNCTION_STACK_OPS_ORDER_LIFO = \"LIFO\";\n\n/**\n * Registers an array of functions, which will run one after the other\n * (regardless if they are promises) by using the exec command.\n */\nmodule.exports = class FunctionStack {\n  /**\n   * @param {FUNCTION_STACK_OPS_ORDER_FIFO | FUNCTION_STACK_OPS_ORDER_LIFO} opsOrder?\n   * [default=FUNCTION_STACK_OPS_ORDER_FIFO]\n   */\n  constructor(opsOrder = FUNCTION_STACK_OPS_ORDER_FIFO) {\n    if (\n      opsOrder !== FUNCTION_STACK_OPS_ORDER_FIFO &&\n      opsOrder !== FUNCTION_STACK_OPS_ORDER_LIFO\n    ) {\n      throw new ReferenceError('opsOrder must either be \"FIFO\" or \"LIFO\"');\n    }\n\n    this._opsOrder = opsOrder;\n\n    this._fns = [];\n  }\n\n  /**\n   * Retrieves the order in which the stack elements will execute.\n   *\n   * @return {FUNCTION_STACK_OPS_ORDER_FIFO | FUNCTION_STACK_OPS_ORDER_LIFO}\n   */\n  getOpsOrder() {\n    return this._opsOrder;\n  }\n\n  /**\n   * Adds a new function to the stack.\n   *\n   * @param {Function} fn\n   * @return {void}\n   */\n  push(fn) {\n    if (typeof fn !== \"function\") {\n      throw new TypeError(\"fn must be a function\");\n    }\n\n    // Ensure a duplicate function is not pushed to the stack\n    this._fns = [...new Set([...this._fns, fn])];\n  }\n\n  /**\n   * Removes the given function from the stack.\n   *\n   * @param {Function} fn\n   */\n  remove(fn) {\n    this._fns = this._fns.filter(pred => pred !== fn);\n  }\n\n  /**\n   * Removes all functions from the stack.\n   *\n   * @return {void}\n   */\n  clear() {\n    this._fns = [];\n  }\n\n  /**\n   * Retrieves the number of callback functions registered at any given time in\n   * the stack, waiting to be invoked.\n   *\n   * Currently invoking functions are not part of this count, as they have\n   * already been removed from the queue.\n   *\n   * @return {number}\n   */\n  getQueueDepth() {\n    return this._fns.length;\n  }\n\n  // FIXME: (jh) Rename (or alias) to flush\n  /**\n   * Execute all of the functions pushed to the stack until, one at a time,\n   * using either FIFO or LIFO strategy, until there are no remaining functions\n   * to execute.\n   *\n   * IMPORTANT: This method recursively calls itself until there are not more\n   * items in the stack.\n   *\n   * @return {Promise<void>}\n   */\n  async exec() {\n    if (this._fns.length) {\n      // Obtain the first function of the array, and resize the array\n      const fn =\n        this._opsOrder === FUNCTION_STACK_OPS_ORDER_FIFO\n          ? this._fns.shift()\n          : this._fns.pop();\n\n      await fn();\n\n      // Recursively call itself, executing the next stack index, if exists\n      return this.exec();\n    }\n  }\n};\n\nmodule.exports.FUNCTION_STACK_OPS_ORDER_FIFO = FUNCTION_STACK_OPS_ORDER_FIFO;\nmodule.exports.FUNCTION_STACK_OPS_ORDER_LIFO = FUNCTION_STACK_OPS_ORDER_LIFO;\n","const getClassInstanceMethodNames = require(\"./getClassInstanceMethodNames\");\nconst getIsClassInstance = require(\"./getIsClassInstance\");\n\n/**\n * Force scope binding of JavaScript class methods to the class itself,\n * regardless of how or where the method is invoked.\n *\n * IMPORTANT: Once a method is bound, it cannot be rebound to another class.\n * @see https://stackoverflow.com/a/20925268\n *\n * Additional reading: https://gist.github.com/dfoverdx/2582340cab70cff83634c8d56b4417cd\n *\n * @param {Function} classInstance JavaScript class\n * @param {function[]} ignoreMethods? An array of class methods to ignore.\n * These must be references to the actual method and not the method names\n * themselves.\n * @return {void}\n */\nmodule.exports = function autoBindClassInstanceMethods(\n  classInstance,\n  ignoreMethods = []\n) {\n  if (!getIsClassInstance(classInstance)) {\n    throw new TypeError(\"classInstance must be an instance of a class\");\n  }\n\n  getClassInstanceMethodNames(classInstance).forEach(methodName => {\n    const method = classInstance[methodName];\n\n    if (\n      method !== classInstance.constructor &&\n      !ignoreMethods.includes(method)\n    ) {\n      classInstance[methodName] = classInstance[methodName].bind(classInstance);\n    }\n  });\n};\n","/**\n * Shallow-merges two objects together.\n *\n * IMPORTANT: The return is a COPY of the merged; no re-assignment takes place.\n *\n * @param {Object} objA? [optional; default = {}]\n * @param {Object} objB? [optional; default = {}]\n * @return {Object} Returns a shallow-merged clone of objects, where\n * objB overrides objA.\n */\nmodule.exports = function shallowMerge(objA = {}, objB = {}) {\n  // Typecast null options to Object for robustness of implementors (i.e.\n  // media-stream-track-controller may pass null when merging optional\n  // MediaStreamTrack constraints)\n  if (objA === null) objA = {};\n  if (objB === null) objB = {};\n\n  return { ...objA, ...objB };\n};\n","'use strict';\n\nvar objectAssign = require('object-assign');\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","const assert = require(\"assert\");\nconst PhantomCore = require(\"../PhantomCore\");\nconst {\n  /** @export */\n  EVT_NO_INIT_WARN,\n  /** @export */\n  EVT_READY,\n  /** @export */\n  EVT_UPDATED,\n  /** @export */\n  EVT_BEFORE_DESTROY,\n  /** @export */\n  EVT_DESTROY_STACK_TIMED_OUT,\n  /** @export */\n  EVT_DESTROYED,\n} = PhantomCore;\n\n/**\n * @export\n * @event EVT_CHILD_INSTANCE_ADDED Emits with the PhantomCore instance which\n * was added.\n **/\nconst EVT_CHILD_INSTANCE_ADDED = \"child-instance-added\";\n\n/**\n * @export\n * @event EVT_CHILD_INSTANCE_REMOVED Emits with the PhantomCore instance which\n * was removed.\n **/\nconst EVT_CHILD_INSTANCE_REMOVED = \"child-instance-removed\";\n\nconst KEY_META_DESC_CHILD_KEY = \"childKey\";\nconst KEY_META_CHILD_BEFORE_DESTROY_HANDLER = \"beforeDestroyHandler\";\n\n/**\n * A PhantomCollection contains an array of unique PhantomCore instances\n * which are bound as child instances.\n *\n * Events can be sent to a children by broadcasting them, and events can be\n * bridged from every child which will emit out the collection as if the\n * collection itself generated the event.\n *\n * In addition, this collection strives to include all of the properties which\n * Techopedia defines as a collection:\n * @see https://www.techopedia.com/definition/25317/collection\n *  - Each group element represents an object with a similar purpose\n *  - Group size varies dynamically during runtime\n *  - There must be access to an individual element through a search function\n *    based on a specific key\n *  - There must be a sort or iteration through the group elements\n */\nclass PhantomCollection extends PhantomCore {\n  /**\n   * Loosely determines whether or not the given instance is a\n   * PhantomCollection instance.\n   *\n   * IMPORTANT: This does not guarantee strict version integrity and bugs may\n   * be present by using this across incompatible versions.\n   *\n   * @param {Object} instance\n   * @return {boolean}\n   */\n  static getIsLooseInstance(instance) {\n    if (\n      PhantomCore.getIsLooseInstance(instance) &&\n      typeof instance.addChild === \"function\" &&\n      typeof instance.removeChild === \"function\" &&\n      typeof instance.getChildren === \"function\" &&\n      typeof instance.getKeys === \"function\" &&\n      typeof instance.broadcast === \"function\" &&\n      typeof instance.removeAllChildren === \"function\" &&\n      typeof instance.destroyAllChildren === \"function\"\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Determines added and removed children from the given previous and current\n   * children.\n   *\n   * NOTE: This accepts any parameter for previous and current children because\n   * extension classes may use expose different child types to their own\n   * implementors (i.e. media-stream-track-controller uses MediaStreamTrack\n   * instances as exposed children in one of its classes).\n   *\n   * @param {any[]} prevChildren All of the previous children.\n   * @param {any[]} currChildren All of the current children.\n   * @return {{added: any[], removed: any[]}} Contains children added and\n   * removed.\n   */\n  static getChildrenDiff(prevChildren, currChildren) {\n    const added = currChildren.filter(\n      predicate => !prevChildren.includes(predicate)\n    );\n\n    const removed = prevChildren.filter(\n      predicate => !currChildren.includes(predicate)\n    );\n\n    return {\n      added,\n      removed,\n    };\n  }\n\n  /**\n   * @param {PhantomCore[]} initialPhantomInstances\n   * @param {Object} options? [default = {}]\n   */\n  constructor(initialPhantomInstances = [], options = {}) {\n    if (!Array.isArray(initialPhantomInstances)) {\n      throw new TypeError(\"initialPhantomInstances must be an array\");\n    }\n\n    super(options);\n\n    /** @type {PhantomCore[]} */\n    this._children = [];\n\n    /** @type {Map<{KEY_META_DESC_CHILD_KEY: any, KEY_META_CHILD_BEFORE_DESTROY_HANDLER: Function}>} */\n    this._childrenMetadata = new Map();\n\n    // IMPORTANT: ChildEventBridge has to be lazy-loaded due to the fact that it\n    // needs to be able to read the exports from this file, including the\n    // PhantomCollection class itself\n    const ChildEventBridge = require(\"./ChildEventBridge\");\n\n    // Controls proxying of events emit from children out the collection itself\n    this._childEventBridge = new ChildEventBridge(this);\n\n    // Add all initial instances\n    initialPhantomInstances.forEach(instance => this.addChild(instance));\n  }\n\n  /**\n   * Destroys all currently associated children in the collection.\n   *\n   * IMPORTANT: This is a helper method for extension classes; It is not to be\n   * called internally in this base class.\n   *\n   * @return {Promise<void>}\n   */\n  async destroyAllChildren() {\n    const children = this.getChildren();\n    return Promise.all(children.map(child => child.destroy()));\n  }\n\n  /**\n   * Iterator handler for PhantomCollection.\n   *\n   * Example usage to retrieve an array of all children:\n   * [...collection]\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol\n   *\n   * @return {PhantomCore<IterableIterator>} FIXME: (jh) This may not be the correct type,\n   * but close enough?\n   * @throws {TypeError} After instance destruction, future attempts to try to\n   * iterate will throw a TypeError.\n   */\n  get [Symbol.iterator]() {\n    const children = this.getChildren();\n\n    return function* () {\n      for (const child of children) {\n        yield child;\n      }\n    };\n  }\n\n  /**\n   * Adds a PhantomCore instance to the collection.\n   *\n   * @param {PhantomCore} phantomCoreInstance\n   * @param {any} key? [default = null] If set, this value is utilized to\n   * determine same instance lookup. It can be useful when extending this\n   * method functionality where the passed in type is altered and it would be\n   * otherwise difficult to track that altered type.\n   * @throws {TypeError}\n   * @throws {ReferenceError}\n   * @emits EVT_CHILD_INSTANCE_ADDED\n   * @emits EVT_UPDATED\n   * @return {void}\n   */\n  addChild(phantomCoreInstance, key = null) {\n    const prevInstanceWithKey = this.getChildWithKey(key);\n    if (prevInstanceWithKey) {\n      if (prevInstanceWithKey !== phantomCoreInstance) {\n        throw new ReferenceError(\n          `A duplicate key is trying to be added with a different PhantomCore instance than what is already registered with the key: \"${key}\"`\n        );\n      } else {\n        // Silently ignore trying to add child with same key\n        return;\n      }\n    }\n\n    if (!PhantomCore.getIsLooseInstance(phantomCoreInstance)) {\n      // FIXME: (jh) Create a way to bypass this error when doing development or prototypes\n      // Perhaps use a global state tied into LOA (i.e. root-controlled global state / config)\n      // @see https://github.com/zenOSmosis/phantom-core/issues/60\n      throw new TypeError(\n        \"PhantomCollection cannot add a child that is not a known PhantomCore instance. Perhaps the child is of a different PhantomCore symbol than this library recognizes.\"\n      );\n    }\n\n    if (this.getIsSameInstance(phantomCoreInstance)) {\n      throw new ReferenceError(\n        \"A PhantomCollection cannot be passed to itself\"\n      );\n    }\n\n    if (phantomCoreInstance.getIsDestroyed()) {\n      throw new ReferenceError(\"Cannot add a destroyed PhantomCore instance\");\n    }\n\n    // Ensure instance isn't already part of the collection\n    for (const instance of this.getChildren()) {\n      if (instance.getIsSameInstance(phantomCoreInstance)) {\n        // Silently ignore repeated attempts to add same child\n        return;\n      }\n    }\n\n    // Called when the collection instance is destroyed before the collection\n    const handleBeforeDestroy = () => {\n      // Pre-filter the children which will be returned in getChildren() calls\n      this._children = this._children.filter(\n        child => child !== phantomCoreInstance\n      );\n\n      phantomCoreInstance.once(EVT_DESTROYED, () =>\n        // Execute final event emissions from child and remove the associated\n        // metadata\n        this.removeChild(phantomCoreInstance)\n      );\n    };\n\n    // Register w/ _childMetaDescriptions property\n    this._childrenMetadata.set(phantomCoreInstance, {\n      [KEY_META_DESC_CHILD_KEY]: key,\n      // IMPORTANT: The handleBeforeDestroy is bound to the meta data so we can\n      // arbitrarily remove it when removing the child from the collection\n      [KEY_META_CHILD_BEFORE_DESTROY_HANDLER]: handleBeforeDestroy,\n    });\n\n    // NOTE: Not using proxyOnce here for two reasons:\n    //  1. The EVT_BEFORE_DESTROY added event should be automatically removed\n    //     once the child is removed\n    //  2. proxyOn/ce adds an additional EVT_BEFORE_DESTROY handler on its own\n    //     and if a child is wrapped in multiple collections it could result in\n    //     potentially excessive event emitters\n    phantomCoreInstance.once(EVT_BEFORE_DESTROY, handleBeforeDestroy);\n\n    // IMPORTANT: Adding / removing children need to have new arrays defined\n    // (vs. push / splice) in order to work as designed when using the children\n    // array as dependencies of React hooks (i.e. in ReShell). Using the push\n    // array method here will not update the hook dependencies as necessary\n    // resulting in potentially stale state when used with React.\n    this._children = [...this._children, phantomCoreInstance];\n\n    this.emit(EVT_CHILD_INSTANCE_ADDED, phantomCoreInstance);\n    this.emit(EVT_UPDATED);\n  }\n\n  /**\n   * Removes a PhantomCore instance from the collection.\n   *\n   * @param {PhantomCore} phantomCoreInstance\n   * @emits EVT_CHILD_INSTANCE_REMOVED\n   * @emits EVT_UPDATED\n   * @return {void}\n   */\n  removeChild(phantomCoreInstance) {\n    const childMetadata = this._childrenMetadata.get(phantomCoreInstance);\n\n    if (childMetadata) {\n      // Remove the destroyListener from the child\n      const destroyListener =\n        childMetadata[KEY_META_CHILD_BEFORE_DESTROY_HANDLER];\n      phantomCoreInstance.off(EVT_BEFORE_DESTROY, destroyListener);\n\n      // NOTE: These may have already been filtered out if removeChild is\n      // utilized during the destruct phase, however, this additional\n      // filtering is needed for arbitrary calls to removeChild\n      this._children = this._children.filter(\n        pred => pred !== phantomCoreInstance\n      );\n\n      // Remove the associated metadata\n      this._childrenMetadata.delete(phantomCoreInstance);\n\n      this.emit(EVT_CHILD_INSTANCE_REMOVED, phantomCoreInstance);\n      this.emit(EVT_UPDATED);\n    }\n  }\n\n  /**\n   * Removes all children from the collection.\n   *\n   * @return {void}\n   */\n  removeAllChildren() {\n    for (const child of this.getChildren()) {\n      this.removeChild(child);\n    }\n  }\n\n  /**\n   * Retrieves an array of PhantomCore children for this collection.\n   *\n   * Destructed children will not appear in this list.\n   *\n   * Subsequent calls to getChildren() should maintain a stable referential\n   * integrity unless one or more of the children wind up in a destructing\n   * phase before the next attempt.\n   *\n   * @return {PhantomCore[]}\n   */\n  getChildren() {\n    return this._children;\n  }\n\n  /**\n   * @param {any} key? [default = null]\n   * @return {PhantomCore | void}\n   */\n  getChildWithKey(key = null) {\n    // FIXME: (jh) Having the optional null key is here for backward\n    // compatibility with other PhantomCore-based packages.  It should probably\n    // be removed in a future version.\n    // Related issue: https://github.com/zenOSmosis/phantom-core/issues/144\n\n    if (!key) {\n      return;\n    }\n\n    for (const [\n      phantomCoreInstance,\n      metadata,\n    ] of this._childrenMetadata.entries()) {\n      if (metadata[KEY_META_DESC_CHILD_KEY] === key) {\n        return phantomCoreInstance;\n      }\n    }\n  }\n\n  /**\n   * Retrieves the associative keys used with added children.\n   *\n   * @return {any[]}\n   */\n  getKeys() {\n    return [...this._childrenMetadata.entries()]\n      .map(([, { [KEY_META_DESC_CHILD_KEY]: key }]) => key)\n      .filter(key => key);\n  }\n\n  /**\n   * Emits an event to all child instances.\n   *\n   * one-to-many relationship\n   *\n   * @param {string | symbol} eventName\n   * @param {any} eventData\n   * @return {void}\n   */\n  broadcast(eventName, eventData) {\n    for (const instance of this.getChildren()) {\n      instance.emit(eventName, eventData);\n    }\n  }\n\n  /**\n   * Adds an event name which will bind to each child and emit out the\n   * PhantomCollection when triggered.\n   *\n   * many-to-one relationship\n   *\n   * Any event added name here, when emit by any child, can be listened to by\n   * attaching a listener to this class for the same event name, acting as if\n   * the collection instance emit the event directly.\n   *\n   * @param {string | symbol} childEventName\n   * @return {void}\n   */\n  bindChildEventName(childEventName) {\n    this._childEventBridge.addBridgeEventName(childEventName);\n  }\n\n  /**\n   * Removes an event name from each child which previously would emit out the\n   * PhantomCollection when triggered.\n   *\n   * many-to-one relationship\n   *\n   * @param {string | symbol} childEventName\n   * @return {void}\n   */\n  unbindChildEventName(childEventName) {\n    this._childEventBridge.removeBridgeEventName(childEventName);\n  }\n\n  /**\n   * Retrieves the event names which are mapped to every child which will emit\n   * out the PhantomCollection when triggered.\n   *\n   * @return {string[] | symbol[]} Can be a mix of string and symbol types.\n   */\n  getBoundChildEventNames() {\n    return this._childEventBridge.getBridgeEventNames();\n  }\n\n  /**\n   * @param {Function} destroyHandler? [optional] If defined, will execute\n   * prior to normal destruct operations for this class.\n   * @return {Promise<void>}\n   */\n  async destroy(destroyHandler = () => null) {\n    return super.destroy(async () => {\n      await destroyHandler();\n\n      // Empty out the collection\n      this.removeAllChildren();\n\n      // Ensure no dangling references\n      assert.strictEqual(this._children.length, 0);\n      assert.strictEqual([...this._childrenMetadata.entries()].length, 0);\n\n      await this._childEventBridge.destroy();\n    });\n  }\n}\n\nmodule.exports = PhantomCollection;\n\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n\nmodule.exports.EVT_CHILD_INSTANCE_ADDED = EVT_CHILD_INSTANCE_ADDED;\nmodule.exports.EVT_CHILD_INSTANCE_REMOVED = EVT_CHILD_INSTANCE_REMOVED;\n","const PhantomServiceCore = require(\"./PhantomServiceCore\");\nconst {\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n} = PhantomServiceCore;\n\nmodule.exports = PhantomServiceCore;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","const PhantomServiceManager = require(\"./PhantomServiceManager\");\nconst {\n  EVT_CHILD_INSTANCE_ADDED,\n  EVT_CHILD_INSTANCE_REMOVED,\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n} = PhantomServiceManager;\n\nmodule.exports = PhantomServiceManager;\nmodule.exports.EVT_CHILD_INSTANCE_ADDED = EVT_CHILD_INSTANCE_ADDED;\nmodule.exports.EVT_CHILD_INSTANCE_REMOVED = EVT_CHILD_INSTANCE_REMOVED;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","// Alternatively, see hostProcess, which checks for browser, electron, and all environments\n// @see https://github.com/microsoft/OCR-Form-Tools/blob/master/src/common/hostProcess.ts\n\n/**\n * Determines if the JavaScript runtime is Node.js based or not.\n *\n * @see {@link https://stackoverflow.com/a/35813135}\n *\n * @return {Boolean}\n */\nmodule.exports = function getIsNodeJS() {\n  return typeof process.versions.node !== \"undefined\";\n};\n","const getClass = require(\"./getClass\");\nconst getIsClass = require(\"./getIsClass\");\n\n/**\n * Retrieves the given class instance's super class.\n *\n * @param {function | Object} classOrInstance A JavaScript class or an instance\n * of one\n * @return {function | void} Non-instantiated super class\n */\nmodule.exports = function getSuperClass(classOrInstance) {\n  const JSClass = getClass(classOrInstance);\n\n  const predicate = Object.getPrototypeOf(JSClass);\n\n  if (getIsClass(predicate)) {\n    return predicate;\n  }\n};\n","/**\n * Determines if the given object is a JavaScript class.\n *\n * @param {Object | function | any} obj\n * @return {boolean}\n */\nmodule.exports = function getIsClass(obj) {\n  return Boolean(typeof obj === \"function\" && obj.name);\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","const PhantomCore = require(\"./PhantomCore\");\nconst {\n  EVT_READY,\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n  EVT_NO_INIT_WARN,\n} = PhantomCore;\nconst Logger = require(\"./Logger\");\nconst {\n  LOG_LEVEL_TRACE,\n  LOG_LEVEL_DEBUG,\n  LOG_LEVEL_INFO,\n  LOG_LEVEL_WARN,\n  LOG_LEVEL_ERROR,\n  LOG_LEVEL_SILENT,\n} = Logger;\n\nmodule.exports = PhantomCore;\n\nObject.assign(module.exports, {\n  EVT_READY,\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n  EVT_NO_INIT_WARN,\n  Logger,\n\n  // Global logger instance\n  logger: require(\"./globalLogger\"),\n\n  LOG_LEVEL_TRACE,\n  LOG_LEVEL_DEBUG,\n  LOG_LEVEL_INFO,\n  LOG_LEVEL_WARN,\n  LOG_LEVEL_ERROR,\n  LOG_LEVEL_SILENT,\n\n  ArbitraryPhantomWrapper: require(\"./ArbitraryPhantomWrapper\"),\n  PhantomCollection: require(\"./PhantomCollection\"),\n  PhantomServiceCore: require(\"./PhantomServiceCore\"),\n  PhantomServiceManager: require(\"./PhantomServiceManager\"),\n  PhantomSerializableState: require(\"./PhantomSerializableState\"),\n  PhantomState: require(\"./PhantomState\"),\n\n  FunctionStack: require(\"./FunctionStack\"),\n\n  // Base utilities\n  consume: require(\"./utils/consume\"),\n  deepMerge: require(\"./utils/deepMerge\"),\n  getIsNodeJS: require(\"./utils/getIsNodeJS\"),\n  getPackageJSON: require(\"./utils/getPackageJSON\"),\n  getUnixTime: require(\"./utils/getUnixTime\"),\n  getUptime: require(\"./utils/getUptime\"),\n  performance: require(\"./utils/performance\"),\n  shallowMerge: require(\"./utils/shallowMerge\"),\n  sleep: require(\"./utils/sleep\"),\n\n  // Utilities for working with JavaScript classes\n  autoBindClassInstanceMethods: require(\"./utils/class-utils/autoBindClassInstanceMethods\"),\n  getClass: require(\"./utils/class-utils/getClass\"),\n  getClassInheritance: require(\"./utils/class-utils/getClassInheritance\"),\n  getClassInstanceMethodNames: require(\"./utils/class-utils/getClassInstanceMethodNames\"),\n  getClassInstancePropertyNames: require(\"./utils/class-utils/getClassInstancePropertyNames\"),\n  getClassName: require(\"./utils/class-utils/getClassName\"),\n  getIsClass: require(\"./utils/class-utils/getIsClass\"),\n  getIsClassInstance: require(\"./utils/class-utils/getIsClassInstance\"),\n  getSuperClass: require(\"./utils/class-utils/getSuperClass\"),\n\n  // Utility for checking PhantomCore (and extension) event exports\n  eventConstantCheckingUtils: require(\"./utils/testing-utils/eventConstantCheckingUtils\"),\n});\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// @see https://github.com/YuzuJS/setImmediate\n// Exposes setImmediate as a global, regardless of context\nrequire(\"setimmediate\");\n\nconst EventEmitter = require(\"events\");\nconst DestructibleEventEmitter = require(\"../_DestructibleEventEmitter\");\nconst Logger = require(\"../Logger\");\nconst { LOG_LEVEL_INFO } = Logger;\nconst getPackageJSON = require(\"../utils/getPackageJSON\");\nconst FunctionStack = require(\"../FunctionStack\");\nconst { FUNCTION_STACK_OPS_ORDER_LIFO } = FunctionStack;\nconst getClassName = require(\"../utils/class-utils/getClassName\");\nconst uuidv4 = require(\"uuid\").v4;\nconst shortUUID = require(\"short-uuid\");\nconst dayjs = require(\"dayjs\");\nconst getUnixTime = require(\"../utils/getUnixTime\");\nconst getClassInstancePropertyNames = require(\"../utils/class-utils/getClassInstancePropertyNames\");\nconst getClassInstanceMethodNames = require(\"../utils/class-utils/getClassInstanceMethodNames\");\nconst autoBindClassInstanceMethods = require(\"../utils/class-utils/autoBindClassInstanceMethods\");\nconst shallowMerge = require(\"../utils/shallowMerge\");\nconst EventProxyStack = require(\"./EventProxyStack\");\n\n// Number of milliseconds to allow async inits to initialize before triggering\n// warning\nconst ASYNC_INIT_GRACE_TIME = 5000;\n\n/** @export */\nconst EVT_NO_INIT_WARN = \"no-init-warn\";\n/** @export */\nconst EVT_READY = \"ready\";\n/** @export */\nconst EVT_UPDATED = \"updated\";\n/** @export */\nconst { EVT_BEFORE_DESTROY, EVT_DESTROY_STACK_TIMED_OUT, EVT_DESTROYED } =\n  DestructibleEventEmitter;\n\n// Instances for this particular thread\nconst _instances = {};\n\n// Methods which should continue working after class destruct\nconst KEEP_ALIVE_SHUTDOWN_METHODS = [\n  \"log\",\n  \"listenerCount\",\n  \"getIsDestroying\",\n  \"getIsDestroyed\",\n  \"getInstanceUptime\",\n  \"getTotalListenerCount\",\n  //\n  // PhantomCollection method names\n  //\n  \"getChildren\",\n  //\n  // super method names\n  //\n  \"off\",\n  \"removeListener\",\n  \"eventNames\",\n  \"listenerCount\",\n  //\n  // patches for other packages:\n  //\n  // [project--media-stream-track-controller]\n  // Fixes an issue w/ test runner locking up with\n  // media-stream-track-controller's track controller collection when testing\n  // for media stream tracks removed from _outputMediaStream property\n  \"getOutputMediaStreamTrack\",\n];\n\n/**\n * Base class for zenOSmosis Phantom architecture, from which Speaker.app and\n * ReShell classes derive.\n */\nclass PhantomCore extends DestructibleEventEmitter {\n  /**\n   * Retrieves the version as defined in package.json.\n   *\n   * NOTE: As opposed to \"getVersion\" this longer naming is designed to reduce\n   * disambiguation for extended classes which might have a different version\n   * number.\n   *\n   * @return {string}\n   */\n  static getPhantomCoreVersion() {\n    const { version } = getPackageJSON();\n\n    return version;\n  }\n\n  /**\n   * Determines whether or not the given instance is a PhantomCore instance,\n   * matching the exact version of this PhantomCore class.\n   *\n   * @param {Object} instance\n   * @return {boolean}\n   */\n  static getIsInstance(instance) {\n    return instance instanceof PhantomCore;\n  }\n\n  /**\n   * Determines whether or not the given instance is a PhantomCore instance,\n   * matching any version of the PhantomCore library.\n   *\n   * IMPORTANT: This should only be used in situations where another library\n   * may use a different version of PhantomCore internally. It does not\n   * guarantee there will not be version conflicts, but may help situations\n   * where updating PhantomCore itself requires updating other extension\n   * libraries due to minor changes.\n   *\n   * @param {Object} instance\n   * @return {boolean}\n   */\n  static getIsLooseInstance(instance) {\n    return Boolean(\n      instance instanceof EventEmitter &&\n        typeof instance.getIsDestroyed === \"function\" &&\n        typeof instance.destroy === \"function\"\n    );\n  }\n\n  /**\n   * Retrieves PhantomCore instance with the given UUID.\n   *\n   * @param {string} uuid\n   * @return {PhantomCore}\n   */\n  static getInstanceWithUUID(uuid) {\n    return _instances[uuid];\n  }\n\n  /**\n   * Symbol is a built-in object whose constructor returns a symbol primitive —\n   * also called a Symbol value or just a Symbol — that’s guaranteed to be\n   * unique. Symbols are often used to add unique property keys to an object\n   * that won’t collide with keys any other code might add to the object, and\n   * which are hidden from any mechanisms other code will typically use to\n   * access the object. That enables a form of weak encapsulation, or a weak\n   * form of information hiding.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\n   *\n   * @param {Symbol} symbol\n   * @return {PhantomCore}\n   */\n  static getInstanceWithSymbol(symbol) {\n    return Object.values(_instances).find(\n      instance => instance.getSymbol() === symbol\n    );\n  }\n\n  /**\n   * Retrieves the number of instances for this thread.\n   *\n   * When an instance is created / destroyed, the number is increased / reduced\n   * by one.\n   *\n   * @return {number}\n   */\n  static getInstanceCount() {\n    return Object.keys(_instances).length;\n  }\n\n  /**\n   * Shallow-merges two objects together.\n   *\n   * IMPORTANT: The return is a COPY of the merged; no re-assignment takes place.\n   *\n   * @param {Object} objA? [optional; default = {}]\n   * @param {Object} objB? [optional; default = {}]\n   * @return {Object} Returns a shallow-merged clone of objects, where\n   * objB overrides objA.\n   */\n  static mergeOptions(objA, objB) {\n    return shallowMerge(objA, objB);\n  }\n\n  /**\n   * TODO: Provide optional singleton support\n   *\n   * @param {Object} options? [default={}]\n   */\n  constructor(options = {}) {\n    super();\n\n    const deprecationNotices = [];\n\n    // FIXME: (jh) Remove after isReady has been removed\n    if (options && options.isReady !== undefined) {\n      deprecationNotices.push(\n        \"isReady option will be changed to isAsync, defaulting to false\"\n      );\n\n      if (options.isAsync === undefined) {\n        // Transform to new value\n        options.isAsync = !options.isReady;\n      }\n\n      delete options.isReady;\n    }\n\n    // Provide \"off\" aliasing if it is not available (fixes issue where\n    // PhantomCollection could not use off binding in browsers)\n    //\n    // NOTE (jh): I don't really know why this was not a problem before\n    //\n    // Reference: https://github.com/zenOSmosis/phantom-core/pull/17\n    if (typeof this.off !== \"function\") {\n      this.off = this.removeListener;\n    }\n\n    this._uuid = uuidv4();\n    this._shortUUID = shortUUID().fromUUID(this._uuid);\n\n    _instances[this._uuid] = this;\n\n    const DEFAULT_OPTIONS = {\n      /**\n       * If set to true, this._init() MUST be called during the instance\n       * construction, or shortly thereafter (otherwise a warning will be\n       * raised).\n       *\n       * Note that if set to false, this._init will be discarded, regardless if\n       * it was defined in an extension class.\n       *\n       * @type {boolean}\n       **/\n      isAsync: false,\n\n      /** @type {string | number} */\n      logLevel: LOG_LEVEL_INFO,\n\n      /**\n       * An arbitrary Symbol for this instance, explicitly guaranteed to be\n       * unique across instances.\n       *\n       * @type {Symbol | null}\n       **/\n      symbol: null,\n\n      /**\n       * An arbitrary title for this instance, not guaranteed to be unique\n       * across instances.\n       *\n       * @type {string | null}\n       **/\n      title: null,\n\n      /**\n       * Whether or not to automatically bind PhantomCore class methods to the\n       * local PhantomCore class.\n       *\n       * @type {boolean}\n       */\n      hasAutomaticBindings: true,\n    };\n\n    // Options should be considered immutable\n    this._options = Object.freeze(\n      PhantomCore.mergeOptions(DEFAULT_OPTIONS, options)\n    );\n\n    // Functions added to this stack are invoked in reverse so that the\n    // shutdown handlers can be kept close to where relevant properties are\n    // defined. Any subsequent properties and their own cleanup handlers which\n    // depend on previously defined properties will destruct prior to their\n    // dependencies.\n    //\n    // i.e.\n    //\n    //  _propA = new PhantomCore()\n    //  this.registerCleanupHandler(() => _propA.destroy())\n    //\n    // _propB depends on propA, and we don't want to move the propA shutdown\n    // handler beyond this point to keep it closer to where propA was defined\n    this._cleanupHandlerStack = new FunctionStack(\n      FUNCTION_STACK_OPS_ORDER_LIFO\n    );\n\n    this._symbol = (() => {\n      if (this._options.symbol) {\n        if (PhantomCore.getInstanceWithSymbol(this._options.symbol)) {\n          throw new Error(\n            \"Existing instance with symbol\",\n            this._options.symbol\n          );\n        }\n\n        if (typeof this._options.symbol !== \"symbol\") {\n          throw new TypeError(\"options.symbol is not a Symbol\");\n        }\n      }\n\n      return this._options.symbol;\n    })();\n\n    this._title = this._options.title;\n\n    this.logger = new Logger({\n      logLevel: this._options.logLevel,\n\n      /**\n       * Currently using ISO8601 formatted date; for date rendering options:\n       * @see https://day.js.org/docs/en/display/format\n       */\n      prefix: logLevel =>\n        `[${dayjs().format()} ${logLevel} ${this.getClassName()} ${\n          this._uuid\n        }]`,\n    });\n\n    /**\n     * NOTE: This is called directly in order to not lose the stack trace.\n     *\n     * @type {Function} Calling this function directly will indirectly call\n     * logger.info(); The logger.trace(), logger.debug(), logger.info(),\n     * logger.warn(), and logger.error() properties can be called directly.\n     */\n    this.log = this.logger.log;\n\n    this.once(EVT_DESTROY_STACK_TIMED_OUT, () => {\n      this.log.error(\n        \"The destruct callstack is taking longer to execute than expected. Ensure a potential gridlock situation is not happening, where two or more PhantomCore instances are awaiting one another to shut down.\"\n      );\n    });\n\n    /** @type {number} UTC Unix time */\n    this._instanceStartTime = getUnixTime();\n\n    this._isReady = !this._options.isAsync || false;\n\n    // Bound remote event handlers\n    this._eventProxyStack = new EventProxyStack();\n\n    // Force method scope binding to class instance\n    if (this._options.hasAutomaticBindings) {\n      this.autoBind();\n    }\n\n    if (this._isReady) {\n      // This shouldn't be called if running isAsync\n      this._init = undefined;\n\n      setImmediate(() => this.emit(EVT_READY));\n    } else {\n      // IMPORTANT: Implementations which set isAsync to true must call\n      // PhantomCore superclass _init on their own\n\n      // Warn if _init() is not invoked in a short time period\n      const longRespondInitWarnTimeout = setTimeout(() => {\n        this.logger.warn(\n          \"PhantomCore superclass _init has not been called in a reasonable amount of time. All instances which use isAsync option must call _init on the PhantomCore superclass.\"\n        );\n\n        this.emit(EVT_NO_INIT_WARN);\n      }, ASYNC_INIT_GRACE_TIME);\n\n      this.once(EVT_READY, () => clearTimeout(longRespondInitWarnTimeout));\n      this.once(EVT_DESTROYED, () => clearTimeout(longRespondInitWarnTimeout));\n    }\n\n    deprecationNotices.forEach(deprecation => {\n      this.log.warn(`DEPRECATION NOTICE: ${deprecation}`);\n    });\n  }\n\n  /**\n   * Internally invoked after being constructed.\n   *\n   * IMPORTANT: Extensions which set isReady to false should call this\n   * manually.\n   *\n   * @return {Promise<void>}\n   */\n  async _init() {\n    this._init = () => {\n      throw new ReferenceError(\"_init cannot be called more than once\");\n    };\n\n    // Await promise so that EVT_READY listeners can be invoked on next event\n    // loop cycle\n    await new Promise((resolve, reject) => {\n      if (!this.getIsDestroyed()) {\n        this._isReady = true;\n        this.emit(EVT_READY);\n        resolve();\n      } else {\n        reject();\n      }\n    });\n  }\n\n  /**\n   * Responder for instance.toString()\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\n   *\n   * @return {string} i.e. \"[object PhantomCore]\"\n   */\n  get [Symbol.toStringTag]() {\n    return this.getTitle() || this.getClassName();\n  }\n\n  /**\n   * Force scope binding of PhantomCore class methods to the instance they are\n   * defined in, regardless of how the method is invoked.\n   *\n   * IMPORTANT: Once a method is bound, it cannot be rebound to another class.\n   * @see https://stackoverflow.com/a/20925268\n   *\n   * @return {void}\n   */\n  autoBind() {\n    // TODO: Adding this.log to the ignore list may not be necessary if\n    // auto-binding in the logger itself\n\n    // Handling for this.log is special and needs to be passed directly from\n    // the caller, or else it will lose the stack trace\n    const IGNORE_LIST = [this.log];\n\n    autoBindClassInstanceMethods(this, IGNORE_LIST);\n  }\n\n  /**\n   * Registers a function with the cleanup handler stack, which is executed\n   * after EVT_DESTROYED is emit and all event handlers have been removed.\n   *\n   * @param {Function} fn\n   * @return {void}\n   */\n  registerCleanupHandler(fn) {\n    return this._cleanupHandlerStack.push(fn);\n  }\n\n  /**\n   * Unregisters a function from the cleanup handler stack.\n   *\n   * @param {Function} fn\n   * @returns\n   */\n  unregisterCleanupHandler(fn) {\n    return this._cleanupHandlerStack.remove(fn);\n  }\n\n  /**\n   * Retrieves the property names which are non-destructed PhantomCore\n   * instances.\n   *\n   * @return {string[]}\n   */\n  getPhantomProperties() {\n    return this.getPropertyNames().filter(\n      propName =>\n        propName !== \"__proto__\" &&\n        PhantomCore.getIsInstance(this[propName]) &&\n        !this[propName].getIsDestroyed()\n    );\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\n   *\n   * @return {Symbol | null}\n   */\n  getSymbol() {\n    return this._symbol;\n  }\n\n  /**\n   * @return {string | null}\n   */\n  getTitle() {\n    return this._title;\n  }\n\n  /**\n   * @param {string} title\n   * @return {void}\n   */\n  setTitle(title) {\n    this._title = title;\n\n    this.emit(EVT_UPDATED);\n  }\n\n  /**\n   * Retrieves the options utilized in the class constructor.\n   *\n   * @return {Object}\n   */\n  getOptions() {\n    return this._options;\n  }\n\n  /**\n   * Retrieve the option with the given name.\n   *\n   * @param {string} optionName\n   * @return {any}\n   */\n  getOption(optionName) {\n    return this._options[optionName];\n  }\n\n  /**\n   * Sets the log level, in order to determine log filtering.\n   *\n   * Accepts either numeric (i.e. LOG_LEVEL_TRACE constant) or string (i.e.\n   * \"trace\") values.\n   *\n   * @param {number | number} level\n   * @return {void}\n   */\n  setLogLevel(level) {\n    this.logger.setLogLevel(level);\n  }\n\n  /**\n   * @return {number}\n   */\n  getLogLevel() {\n    return this.logger.getLogLevel();\n  }\n\n  /**\n   * Retrieves all properties registered to this class.\n   *\n   * NOTE: It doesn't return properties defined via symbols.\n   *\n   * @see https://stackoverflow.com/a/31055217\n   *\n   * @return {string[]}\n   */\n  getPropertyNames() {\n    return getClassInstancePropertyNames(this);\n  }\n\n  /**\n   * Retrieves all methods registered to this class.\n   *\n   * NOTE: It doesn't return methods defined via symbols.\n   *\n   * @return {string[]}\n   */\n  getMethodNames() {\n    return getClassInstanceMethodNames(this);\n  }\n\n  /**\n   * @return {Promise<void>} Resolves once the class instance is ready.\n   */\n  async onceReady() {\n    if (this._isReady) {\n      return;\n    }\n\n    return new Promise(resolve => this.once(EVT_READY, resolve));\n  }\n\n  /**\n   * @return {boolean}\n   */\n  getIsReady() {\n    return this._isReady;\n  }\n\n  /**\n   * Unique identifier which represents this class instance.\n   *\n   * @return {string}\n   */\n  getUUID() {\n    return this._uuid;\n  }\n\n  /**\n   * Short unique identifier which represents this class instance.\n   *\n   * i.e. \"mhvXdrZT4jP5T8vBxuvm75\"\n   *\n   * @return {string}\n   */\n  getShortUUID() {\n    return this._shortUUID;\n  }\n\n  /**\n   * Determines whether the passed instance is the same as the current\n   * instance.\n   *\n   * @param {PhantomCore} instance\n   * @return {boolean}\n   */\n  getIsSameInstance(instance) {\n    return Object.is(this, instance);\n  }\n\n  /**\n   * Retrieves the non-instantiated class definition.\n   *\n   * @return {Function}\n   */\n  getClass() {\n    return this.constructor;\n  }\n\n  /**\n   * IMPORTANT: This is not safe to rely on and will be modified if the script\n   * is minified.\n   *\n   * @return {string}\n   */\n  getClassName() {\n    return getClassName(this);\n  }\n\n  /**\n   * Binds an \"on\" event listener to another PhantomCore instance.\n   *\n   * This should not be confused with JavaScript object proxies and is not\n   * intended to work the same way.\n   *\n   * NOTE: Unlike the original event emitter method, this does NOT return a\n   * reference to the underlying class for optional chaining, and it currently\n   * does NOT support the optional \"options\" argument.\n   *\n   * @see {@link https://nodejs.org/api/events.html#eventsonemitter-eventname-options}\n   *\n   * @param {PhantomCore} targetInstance\n   * @param {string | symbol} eventName\n   * @param {Function} eventHandler\n   * @return {void}\n   */\n  proxyOn(targetInstance, eventName, eventHandler) {\n    if (!PhantomCore.getIsLooseInstance(targetInstance)) {\n      throw new ReferenceError(\"targetInstance is not a PhantomCore instance\");\n    }\n\n    if (this.getIsSameInstance(targetInstance)) {\n      throw new ReferenceError(\"targetInstance cannot be bound to itself\");\n    }\n\n    this._eventProxyStack.addProxyHandler(\n      \"on\",\n      targetInstance,\n      eventName,\n      eventHandler\n    );\n  }\n\n  /**\n   * Binds a \"once\" event listener to another PhantomCore instance.\n   *\n   * This should not be confused with JavaScript object proxies and is not\n   * intended to work the same way.\n   *\n   * NOTE: Unlike the original event emitter method, this does NOT return a\n   * reference to the underlying class for optional chaining, and it currently\n   * does NOT support the optional \"options\" argument.\n   *\n   * @see {@link https://nodejs.org/api/events.html#eventsonceemitter-name-options}\n   *\n   * @param {PhantomCore} targetInstance\n   * @param {string | symbol} eventName\n   * @param {Function} eventHandler\n   * @return {void}\n   */\n  proxyOnce(targetInstance, eventName, eventHandler) {\n    if (!PhantomCore.getIsLooseInstance(targetInstance)) {\n      throw new ReferenceError(\"targetInstance is not a PhantomCore instance\");\n    }\n\n    if (this.getIsSameInstance(targetInstance)) {\n      throw new ReferenceError(\"targetInstance cannot be bound to itself\");\n    }\n\n    this._eventProxyStack.addProxyHandler(\n      \"once\",\n      targetInstance,\n      eventName,\n      eventHandler\n    );\n  }\n\n  /**\n   * Unbinds an \"on\" or \"once\" event listener from another PhantomCore\n   * instance.\n   *\n   * This should not be confused with JavaScript object proxies and is not\n   * intended to work the same way.\n   *\n   * NOTE: Unlike the original event emitter method, this does NOT return a\n   * reference to the underlying class for optional chaining.\n   *\n   * @see {@link https://nodejs.org/api/events.html#emitteroffeventname-listener}\n   *\n   * @param {PhantomCore} targetInstance\n   * @param {string | symbol} eventName\n   * @param {Function} eventHandler\n   * @return {void}\n   */\n  proxyOff(targetInstance, eventName, eventHandler) {\n    if (!PhantomCore.getIsLooseInstance(targetInstance)) {\n      throw new ReferenceError(\"targetInstance is not a PhantomCore instance\");\n    }\n\n    if (this.getIsSameInstance(targetInstance)) {\n      throw new ReferenceError(\"targetInstance cannot be bound to itself\");\n    }\n\n    // Unbind the event handler from the proxy instance\n    this._eventProxyStack.removeProxyHandler(\n      targetInstance,\n      eventName,\n      eventHandler\n    );\n  }\n\n  /**\n   * Retrieves the number of seconds since this class instance was\n   * instantiated.\n   *\n   * @return {number}\n   */\n  getInstanceUptime() {\n    if (!this.getIsDestroyed()) {\n      return getUnixTime() - this._instanceStartTime;\n    } else {\n      return 0;\n    }\n  }\n\n  /**\n   * NOTE: Order of operations for shutdown handling:\n   *\n   *  1. [implementation defined] destroyHandler\n   *  2. EVT_DESTROYED triggers\n   *  3. registerCleanupHandler call stack\n   *\n   * @param {Function} destroyHandler? [optional] If defined, will execute\n   * prior to normal destruct operations for this class.\n   * @return {Promise<void>}\n   */\n  async destroy(destroyHandler = () => null) {\n    return super.destroy(\n      async () => {\n        // Unregister from _instances\n        delete _instances[this._uuid];\n\n        await destroyHandler();\n\n        await this._eventProxyStack.destroy();\n        this._eventProxyStack = null;\n      },\n      async () => {\n        await this._cleanupHandlerStack.exec();\n\n        // TODO: Force regular class properties to be null (as of July 30, 2021,\n        // not changing due to unforeseen consequences):\n        // @see related issue: https://github.com/zenOSmosis/phantom-core/issues/34\n        // @see potentially related issue: https://github.com/zenOSmosis/phantom-core/issues/100\n\n        this.getPhantomProperties().forEach(phantomProp => {\n          this.log.warn(\n            `Lingering PhantomCore instance on prop name \"${phantomProp}\". This could be a memory leak. Ensure that all PhantomCore instances have been disposed of before class destruct.`\n          );\n        });\n\n        for (const methodName of this.getMethodNames()) {\n          // Force non-keep-alive methods to return undefined\n          if (!KEEP_ALIVE_SHUTDOWN_METHODS.includes(methodName)) {\n            this[methodName] = () => undefined;\n          }\n\n          // TODO: Reimplement and conditionally silence w/ instance options\n          // or env\n          // this.logger.warn(\n          //  `Cannot call this.${method}() after class ${className} is destroyed`\n          // );\n        }\n      }\n    );\n  }\n}\n\nmodule.exports = PhantomCore;\n\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","/**\n * Created by Samuel on 6/4/2016.\n * Simple wrapper functions to produce shorter UUIDs for cookies, maybe everything?\n */\n\nconst { v4: uuidv4 } = require('uuid');\nconst anyBase = require('any-base');\n\nconst flickrBase58 = '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';\nconst cookieBase90 = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~\";\n\nconst baseOptions = {\n  consistentLength: true,\n};\n\n// A default generator, instantiated only if used.\nlet toFlickr;\n\n/**\n * Takes a UUID, strips the dashes, and translates.\n * @param {string} longId\n * @param {function(string)} translator\n * @param {Object} [paddingParams]\n * @returns {string}\n */\nconst shortenUUID = (longId, translator, paddingParams) => {\n  const translated = translator(longId.toLowerCase().replace(/-/g, ''));\n\n  if (!paddingParams || !paddingParams.consistentLength) return translated;\n\n  return translated.padStart(\n    paddingParams.shortIdLength,\n    paddingParams.paddingChar,\n  );\n};\n\n/**\n * Translate back to hex and turn back into UUID format, with dashes\n * @param {string} shortId\n * @param {function(string)} translator\n * @returns {string}\n */\nconst enlargeUUID = (shortId, translator) => {\n  const uu1 = translator(shortId).padStart(32, '0');\n\n  // Join the zero padding and the UUID and then slice it up with match\n  const m = uu1.match(/(\\w{8})(\\w{4})(\\w{4})(\\w{4})(\\w{12})/);\n\n  // Accumulate the matches and join them.\n  return [m[1], m[2], m[3], m[4], m[5]].join('-');\n};\n\n// Calculate length for the shortened ID\nconst getShortIdLength = (alphabetLength) => (\n  Math.ceil(Math.log(2 ** 128) / Math.log(alphabetLength)));\n\nmodule.exports = (() => {\n  /**\n   * @param {string} toAlphabet - Defaults to flickrBase58 if not provided\n   * @param {Object} [options]\n   *\n   * @returns {{new: (function()),\n   *  uuid: (function()),\n   *  fromUUID: (function(string)),\n   *  toUUID: (function(string)),\n   *  alphabet: (string)}}\n   */\n  const makeConvertor = (toAlphabet, options) => {\n    // Default to Flickr 58\n    const useAlphabet = toAlphabet || flickrBase58;\n\n    // Default to baseOptions\n    const selectedOptions = { ...baseOptions, ...options };\n\n    // Check alphabet for duplicate entries\n    if ([...new Set(Array.from(useAlphabet))].length !== useAlphabet.length) {\n      throw new Error('The provided Alphabet has duplicate characters resulting in unreliable results');\n    }\n\n    const shortIdLength = getShortIdLength(useAlphabet.length);\n\n    // Padding Params\n    const paddingParams = {\n      shortIdLength,\n      consistentLength: selectedOptions.consistentLength,\n      paddingChar: useAlphabet[0],\n    };\n\n    // UUIDs are in hex, so we translate to and from.\n    const fromHex = anyBase(anyBase.HEX, useAlphabet);\n    const toHex = anyBase(useAlphabet, anyBase.HEX);\n    const generate = () => shortenUUID(uuidv4(), fromHex, paddingParams);\n\n    const translator = {\n      new: generate,\n      generate,\n      uuid: uuidv4,\n      fromUUID: (uuid) => shortenUUID(uuid, fromHex, paddingParams),\n      toUUID: (shortUuid) => enlargeUUID(shortUuid, toHex),\n      alphabet: useAlphabet,\n      maxLength: shortIdLength,\n    };\n\n    Object.freeze(translator);\n\n    return translator;\n  };\n\n  // Expose the constants for other purposes.\n  makeConvertor.constants = {\n    flickrBase58,\n    cookieBase90,\n  };\n\n  // Expose the generic v4 UUID generator for convenience\n  makeConvertor.uuid = uuidv4;\n\n  // Provide a generic generator\n  makeConvertor.generate = () => {\n    if (!toFlickr) {\n      // Generate on first use;\n      toFlickr = makeConvertor(flickrBase58).generate;\n    }\n    return toFlickr();\n  };\n\n  return makeConvertor;\n})();\n","var Converter = require('./src/converter');\n\n/**\n * Function get source and destination alphabet and return convert function\n *\n * @param {string|Array} srcAlphabet\n * @param {string|Array} dstAlphabet\n *\n * @returns {function(number|Array)}\n */\nfunction anyBase(srcAlphabet, dstAlphabet) {\n    var converter = new Converter(srcAlphabet, dstAlphabet);\n    /**\n     * Convert function\n     *\n     * @param {string|Array} number\n     *\n     * @return {string|Array} number\n     */\n    return function (number) {\n        return converter.convert(number);\n    }\n};\n\nanyBase.BIN = '01';\nanyBase.OCT = '01234567';\nanyBase.DEC = '0123456789';\nanyBase.HEX = '0123456789abcdef';\n\nmodule.exports = anyBase;","'use strict';\n\n/**\n * Converter\n *\n * @param {string|Array} srcAlphabet\n * @param {string|Array} dstAlphabet\n * @constructor\n */\nfunction Converter(srcAlphabet, dstAlphabet) {\n    if (!srcAlphabet || !dstAlphabet || !srcAlphabet.length || !dstAlphabet.length) {\n        throw new Error('Bad alphabet');\n    }\n    this.srcAlphabet = srcAlphabet;\n    this.dstAlphabet = dstAlphabet;\n}\n\n/**\n * Convert number from source alphabet to destination alphabet\n *\n * @param {string|Array} number - number represented as a string or array of points\n *\n * @returns {string|Array}\n */\nConverter.prototype.convert = function(number) {\n    var i, divide, newlen,\n    numberMap = {},\n    fromBase = this.srcAlphabet.length,\n    toBase = this.dstAlphabet.length,\n    length = number.length,\n    result = typeof number === 'string' ? '' : [];\n\n    if (!this.isValid(number)) {\n        throw new Error('Number \"' + number + '\" contains of non-alphabetic digits (' + this.srcAlphabet + ')');\n    }\n\n    if (this.srcAlphabet === this.dstAlphabet) {\n        return number;\n    }\n\n    for (i = 0; i < length; i++) {\n        numberMap[i] = this.srcAlphabet.indexOf(number[i]);\n    }\n    do {\n        divide = 0;\n        newlen = 0;\n        for (i = 0; i < length; i++) {\n            divide = divide * fromBase + numberMap[i];\n            if (divide >= toBase) {\n                numberMap[newlen++] = parseInt(divide / toBase, 10);\n                divide = divide % toBase;\n            } else if (newlen > 0) {\n                numberMap[newlen++] = 0;\n            }\n        }\n        length = newlen;\n        result = this.dstAlphabet.slice(divide, divide + 1).concat(result);\n    } while (newlen !== 0);\n\n    return result;\n};\n\n/**\n * Valid number with source alphabet\n *\n * @param {number} number\n *\n * @returns {boolean}\n */\nConverter.prototype.isValid = function(number) {\n    var i = 0;\n    for (; i < number.length; ++i) {\n        if (this.srcAlphabet.indexOf(number[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n};\n\nmodule.exports = Converter;","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},D=\"en\",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if(\"string\"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].substr(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));","const assert = require(\"assert\");\nconst PhantomCore = require(\".\");\nconst _DestructibleEventEmitter = require(\"../_DestructibleEventEmitter\");\nconst { EVT_DESTROYED } = _DestructibleEventEmitter;\n\nmodule.exports = class EventProxyStack extends _DestructibleEventEmitter {\n  /**\n   * Provides event proxy management for PhantomCore's, proxyOn, proxyOnce, and\n   * proxyOff methods.\n   *\n   * Internally it binds the events to the remote target instance(s) and manages\n   * their handling.\n   *\n   * NOTE: A single EVT_DESTROYED method is also attached to every target\n   * instance to perform shutdown handling.\n   */\n  constructor() {\n    super();\n\n    /**\n     * Associated event proxy handlers attached to target instances.\n     *\n     * @type {[targetInstance: PhantomCore, eventName: string, eventHandler: Function]}\n     */\n    this._eventProxyBinds = [];\n\n    /**\n     * Associated EVT_DESTROYED handlers attached to target instances, which\n     * are invoked if the target instance is destructed before the local\n     * instance.\n     *\n     * @type {Map<{key: PhantomCore, value: Function}>}\n     */\n    this._targetDestroyHandlers = new Map();\n  }\n\n  /**\n   * Adds the given proxy handler to the given target instance.\n   *\n   * @param {\"on\" | \"once\"} onOrOnce\n   * @param {PhantomCore} targetInstance\n   * @param {string} eventName\n   * @param {Function} eventHandler\n   * @return {void}\n   */\n  addProxyHandler(onOrOnce, targetInstance, eventName, eventHandler) {\n    if (onOrOnce !== \"on\" && onOrOnce !== \"once\") {\n      throw new ReferenceError(`Unhandled value \"${onOrOnce}\" for onOrOnce`);\n    }\n\n    this._eventProxyBinds.push([targetInstance, eventName, eventHandler]);\n\n    // Bind the event handler to the target instance\n    targetInstance[onOrOnce](eventName, eventHandler);\n\n    // Automatically unregister if the target instance is destructed before\n    // this instance\n    //\n    // If there is not a target destroy handler...\n    if (!this._targetDestroyHandlers.get(targetInstance)) {\n      // ... create one\n      this._targetDestroyHandlers.set(targetInstance, () => {\n        this._eventProxyBinds\n          // IMPORTANT: Only invoke proxyOff for bound eventHandlers for the\n          // correct target instance\n          .filter(\n            ([predTargetInstance]) => predTargetInstance === targetInstance\n          )\n          .forEach(args => this.removeProxyHandler(...args));\n      });\n\n      // ... then register the target destroy handler to run once the target\n      // emits EVT_DESTROYED\n      targetInstance.once(\n        EVT_DESTROYED,\n        this._targetDestroyHandlers.get(targetInstance)\n      );\n    }\n  }\n\n  /**\n   * Removes the given proxy handler from the given target instance.\n   *\n   * @param {PhantomCore} targetInstance\n   * @param {string} eventName\n   * @param {Function} eventHandler\n   * @return {void}\n   */\n  removeProxyHandler(targetInstance, eventName, eventHandler) {\n    let hasRemoved = false;\n\n    this._eventProxyBinds = this._eventProxyBinds.filter(\n      ([predTargetInstance, predEventName, predEventHandler]) => {\n        // If an associated event handler is added more than once, for the\n        // given event name, only remove it once from the _eventProxyBinds.\n        // This target instance's event emitter manages how it wishes to keep\n        // track of duplicated event handlers across on / once. Our job here is\n        // to not try to manage that here, but just keep track of the\n        // associated proxies, one-by-one, so we can ensure we fully unregister\n        // them when we shut down.\n        if (hasRemoved) {\n          return true;\n        } else {\n          let willKeep = true;\n\n          if (predTargetInstance !== targetInstance) {\n            willKeep = true;\n          } else if (predEventName !== eventName) {\n            willKeep = true;\n          } else if (predEventHandler !== eventHandler) {\n            willKeep = true;\n          } else {\n            willKeep = false;\n          }\n\n          if (!willKeep) {\n            hasRemoved = true;\n          }\n\n          return willKeep;\n        }\n      }\n    );\n\n    // Unbind the event handler from the target instance\n    targetInstance.off(eventName, eventHandler);\n\n    // If there are no more proxy events for the target instance, remove its\n    // auto destroy handler\n    if (!this.getTargetInstanceQueueDepth(targetInstance)) {\n      this._removeTargetInstanceDestroyHandler(targetInstance);\n    }\n  }\n\n  /**\n   * Removes all proxy handlers for all of the target instances.\n   *\n   * @return {void}\n   */\n  _removeAllProxyHandlers() {\n    this._eventProxyBinds.forEach(([targetInstance, eventName, eventHandler]) =>\n      this.removeProxyHandler(targetInstance, eventName, eventHandler)\n    );\n  }\n\n  /**\n   * Unregisters a the remote destroy handler from a single target instance.\n   *\n   * @param {PhantomCore} targetInstance\n   */\n  _removeTargetInstanceDestroyHandler(targetInstance) {\n    const destroyHandler = this._targetDestroyHandlers.get(targetInstance);\n\n    if (destroyHandler) {\n      targetInstance.off(EVT_DESTROYED, destroyHandler);\n\n      this._targetDestroyHandlers.delete(targetInstance);\n    }\n  }\n\n  /**\n   * Unregisters the remote destroy handlers from all of the target instances.\n   *\n   * @return {void}\n   */\n  _removeAllTargetInstanceDestroyHandlers() {\n    for (const [targetInstance] of this._targetDestroyHandlers.entries()) {\n      this._removeTargetInstanceDestroyHandler(targetInstance);\n    }\n  }\n\n  /**\n   * Retrieves the number of proxied events to the given target instance.\n   *\n   * @param {PhantomCore} targetInstance\n   * @return {number}\n   */\n  getTargetInstanceQueueDepth(targetInstance) {\n    return this._eventProxyBinds.reduce((acc, curr) => {\n      const predTargetInstance = curr[0];\n      if (targetInstance === predTargetInstance) {\n        return acc + 1;\n      } else {\n        return acc;\n      }\n    }, 0);\n  }\n\n  /**\n   * @return {Promise<void>}\n   */\n  async destroy() {\n    return super.destroy(() => {\n      // Perform cleanup\n      this._removeAllProxyHandlers();\n      this._removeAllTargetInstanceDestroyHandlers();\n\n      // Ensure no dangling references\n      assert.strictEqual(this._eventProxyBinds.length, 0);\n      assert.strictEqual([...this._targetDestroyHandlers].length, 0);\n    });\n  }\n};\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","const PhantomCore = require(\"./PhantomCore\");\nconst {\n  EVT_NO_INIT_WARN,\n  EVT_READY,\n  EVT_UPDATED,\n  EVT_BEFORE_DESTROY,\n  EVT_DESTROY_STACK_TIMED_OUT,\n  EVT_DESTROYED,\n} = PhantomCore;\n\n/**\n * Wraps an arbitrary object with a PhantomCore instance.\n */\nclass ArbitraryPhantomWrapper extends PhantomCore {\n  /**\n   * @param {any} wrappedValue\n   * @param {Object} options? [default = {}]\n   */\n  constructor(wrappedValue, options = {}) {\n    super(options);\n\n    this._wrappedValue = null;\n    this._setWrappedValue(wrappedValue);\n  }\n\n  /**\n   * Internally sets the wrapped element.\n   *\n   * @param {any} wrappedValue\n   * @return {void}\n   */\n  _setWrappedValue(wrappedValue) {\n    if (this._wrappedValue) {\n      throw new Error(\"_setWrappedValue cannot be called more than once\");\n    }\n\n    if (!wrappedValue) {\n      throw new ReferenceError(\"wrappedValue is not set\");\n    }\n\n    this._wrappedValue = wrappedValue;\n  }\n\n  /**\n   * Retrieves the wrapped object which was specified during the class instance\n   * creation.\n   *\n   * @return {any}\n   */\n  getWrappedValue() {\n    return this._wrappedValue;\n  }\n\n  /**\n   * @param {Function} destroyHandler? [optional] If defined, will execute\n   * prior to normal destruct operations for this class.\n   * @return {Promise<void>}\n   */\n  async destroy(destroyHandler = () => null) {\n    return super.destroy(async () => {\n      await destroyHandler();\n\n      // IMPORTANT: Setting this AFTER super destroy so that it can potentially\n      // be intercepted by other destruct handlers in extension classes\n      this._wrappedValue = null;\n    });\n  }\n}\n\nmodule.exports = ArbitraryPhantomWrapper;\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","const PhantomCore = require(\"../PhantomCore\");\nconst { EVT_UPDATED } = PhantomCore;\nconst PhantomCollection = require(\"./PhantomCollection\");\nconst { EVT_CHILD_INSTANCE_ADDED, EVT_CHILD_INSTANCE_REMOVED } =\n  PhantomCollection;\n\nconst DEFAULT_BRIDGE_EVENT_NAMES = [EVT_UPDATED];\n\nconst EVT_BRIDGE_EVENT_NAME_ADDED = \"bridge-event-name-added\";\nconst EVT_BRIDGE_EVENT_NAME_REMOVED = \"bridge-event-name-removed\";\n\n/**\n * Handles many-to-one proxying of specified events of PhantomCollection\n * children out of the PhantomCollection itself.\n *\n * For each relevant event, when emit, the PhantomCollection emits the same\n * event and the same event data as the original child emitter emitted (i.e.\n * [for every mapped event] when childA emits EVT_UPDATED, collection emits\n * EVT_UPDATED as well).\n */\nclass ChildEventBridge extends PhantomCore {\n  /**\n   * IMPORTANT: This bridge is destructed by the collection itself and does not\n   * need to listen for EVT_DESTROYED from PhantomCollection.\n   *\n   * @param {PhantomCollection} phantomCollection The collection this bridge\n   * should be bound to.\n   */\n  constructor(phantomCollection) {\n    if (!(phantomCollection instanceof PhantomCollection)) {\n      throw new TypeError(\n        \"phantomCollection is not a PhantomCollection instance\"\n      );\n    }\n\n    super();\n\n    /**\n     * @type {PhantomCollection} The parent PhantomCollection.\n     */\n    this._phantomCollection = phantomCollection;\n\n    this.registerCleanupHandler(() => delete this._phantomCollection);\n\n    /**\n     * @type {string[]} The event names this bridge currently (i.e. at any given\n     * time) maintains mappings for events which can emit from child instances\n     * and relay out the parent collection.\n     */\n    this._bridgeEventNames = [...DEFAULT_BRIDGE_EVENT_NAMES];\n\n    /** @type {{key: uuid, value: {key: eventName, value: eventHandler}}} */\n    this._linkedChildEventHandlers = {};\n\n    this._handleChildInstanceAdded = this._handleChildInstanceAdded.bind(this);\n    this._handleChildInstanceRemoved =\n      this._handleChildInstanceRemoved.bind(this);\n\n    // Bind child _...added/removed handlers\n    (() => {\n      this.proxyOn(\n        this._phantomCollection,\n        EVT_CHILD_INSTANCE_ADDED,\n        this._handleChildInstanceAdded\n      );\n\n      this.proxyOn(\n        this._phantomCollection,\n        EVT_CHILD_INSTANCE_REMOVED,\n        this._handleChildInstanceRemoved\n      );\n    })();\n\n    // Invoked when new proxying event name is added\n    this.on(EVT_BRIDGE_EVENT_NAME_ADDED, eventName => {\n      const children = this.getChildren();\n\n      for (const child of children) {\n        this._mapChildEvent(child, eventName);\n      }\n    });\n\n    // Invoked when proxying event name is removed\n    this.on(EVT_BRIDGE_EVENT_NAME_REMOVED, eventName => {\n      const children = this.getChildren();\n\n      for (const child of children) {\n        this._unmapChildEvent(child, eventName);\n      }\n    });\n  }\n\n  /**\n   * Retrieves an array of PhantomCore children for the associated\n   * PhantomCollection.\n   *\n   * @return {PhantomCore[]}\n   */\n  getChildren() {\n    return (\n      (this._phantomCollection && this._phantomCollection.getChildren()) || []\n    );\n  }\n\n  /**\n   * Internally invoked when the collection adds a new child.\n   *\n   * @param {PhantomCore} childInstance\n   * @return {void}\n   */\n  _handleChildInstanceAdded(childInstance) {\n    const childUUID = childInstance.getUUID();\n\n    this._linkedChildEventHandlers[childUUID] = {};\n\n    // Add linked child event handlers\n    this._bridgeEventNames.forEach(eventName =>\n      this._mapChildEvent(childInstance, eventName)\n    );\n  }\n\n  /**\n   * Internally invoked when the collection removes a child.\n   *\n   * @param {PhantomCore} childInstance\n   * @return {void}\n   */\n  _handleChildInstanceRemoved(childInstance) {\n    const childUUID = childInstance.getUUID();\n\n    // Clear out linked child event handlers\n    this._bridgeEventNames.forEach(eventName =>\n      this._unmapChildEvent(childInstance, eventName)\n    );\n\n    delete this._linkedChildEventHandlers[childUUID];\n  }\n\n  /**\n   * Adds an event name to a specific child and registers a wrapping event\n   * handler which will proxy out the PhantomCollection when triggered.\n   *\n   * Subsequent attempts to add the same event will be silently ignored.\n   *\n   * @param {PhantomCore} childInstance\n   * @param {string | symbol} eventName\n   * @return {void}\n   */\n  _mapChildEvent(childInstance, eventName) {\n    const childUUID = childInstance.getUUID();\n\n    // Silently ignore previously linked events with same name\n    if (!this._linkedChildEventHandlers[childUUID][eventName]) {\n      // Re-emits the mapped child event data out the parent collection\n      const _handleChildEvent = eventData => {\n        this._phantomCollection.emit(eventName, eventData);\n      };\n\n      childInstance.on(eventName, _handleChildEvent);\n\n      // Keep track of the event handler so it can be removed (via\n      // this._unmapChildEvent)\n      this._linkedChildEventHandlers[childUUID][eventName] = _handleChildEvent;\n    }\n  }\n\n  /**\n   * Removes the wrapping event handler with the given even name from the\n   * relevant child instance.\n   *\n   * @param {PhantomCore} childInstance\n   * @param {string | symbol} eventName\n   * @return {void}\n   */\n  _unmapChildEvent(childInstance, eventName) {\n    const childUUID = childInstance.getUUID();\n    const eventHandler = this._linkedChildEventHandlers[childUUID][eventName];\n\n    if (eventHandler) {\n      childInstance.off(eventName, eventHandler);\n\n      delete this._linkedChildEventHandlers[childUUID][eventName];\n    }\n  }\n\n  /**\n   * Adds an event name which will bind to each child and emit out the\n   * PhantomCollection when triggered.\n   *\n   * @param {string | symbol} eventName\n   * @return {void}\n   */\n  addBridgeEventName(eventName) {\n    const prevLength = this._bridgeEventNames.length;\n\n    // Add only unique values\n    this._bridgeEventNames = [\n      ...new Set([...this._bridgeEventNames, eventName]),\n    ];\n\n    const nextLength = this._bridgeEventNames.length;\n\n    if (nextLength > prevLength) {\n      this.emit(EVT_BRIDGE_EVENT_NAME_ADDED, eventName);\n    }\n  }\n\n  /**\n   * Removes an event name from each child which previously would emit out the\n   * PhantomCollection when triggered.\n   *\n   * @param {string | symbol} eventName\n   * @return {void}\n   */\n  removeBridgeEventName(eventName) {\n    const prevLength = this._bridgeEventNames.length;\n\n    this._bridgeEventNames = this._bridgeEventNames.filter(\n      predicate => predicate !== eventName\n    );\n\n    const nextLength = this._bridgeEventNames.length;\n\n    if (nextLength < prevLength) {\n      this.emit(EVT_BRIDGE_EVENT_NAME_REMOVED, eventName);\n    }\n  }\n\n  /**\n   * Returns the mapped child event names which this class will proxy out the\n   * collection.\n   *\n   * @return {string[] | symbol[]} Can be a mix of strings and symbols.\n   */\n  getBridgeEventNames() {\n    return this._bridgeEventNames;\n  }\n\n  /**\n   * @return {Promise<void>}\n   */\n  async destroy() {\n    return super.destroy(async () => {\n      // Unmap all associated bridge event handlers from the children\n      const children = this.getChildren();\n      for (const child of children) {\n        for (const eventName of this._bridgeEventNames) {\n          this._unmapChildEvent(child, eventName);\n        }\n      }\n    });\n  }\n}\n\nmodule.exports = ChildEventBridge;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\n","const PhantomState = require(\"../PhantomState\");\nconst PhantomCollection = require(\"../PhantomCollection\");\nconst {\n  /** @export */\n  EVT_NO_INIT_WARN,\n  /** @export */\n  EVT_READY,\n  /** @export */\n  EVT_UPDATED,\n  /** @export */\n  EVT_BEFORE_DESTROY,\n  /** @export */\n  EVT_DESTROY_STACK_TIMED_OUT,\n  /** @export */\n  EVT_DESTROYED,\n} = PhantomState;\n\n// TODO: Configure reporter channel (base class PhantomState, SyncObject or\n// equivalent (not sure if SyncObject would be useful here, but could enable\n// remote reporting))\n//\n//\n// TODO: Document\n//\n// TODO: Consider this: Thought about extending PhantomCollection, instead,\n// since retaining a localized state of children (which happen to be\n// collections as well), but want to keep it open to the possibility of\n// managing other types of collection-type data without the possibility of a\n// conflict (i.e. collections based on role, etc.)\nclass PhantomServiceCore extends PhantomState {\n  constructor({ manager, useServiceClassHandler }) {\n    super(null, {\n      // Services register immediately in their managers, but are not ready to\n      // go until the _init method has run\n      isAsync: true,\n    });\n\n    // A map of collections, attached to this service core\n    this._collectionMap = new Map();\n\n    this.__MANAGED__useServiceClassHandler = useServiceClassHandler;\n\n    // Ensure we're properly bound to a service manager\n    try {\n      const PhantomServiceManager = require(\"../PhantomServiceManager\");\n      if (!(manager instanceof PhantomServiceManager)) {\n        throw new ReferenceError(\n          \"PhantomServiceCore must be started by a PhantomServiceManager\"\n        );\n      }\n\n      if (typeof this.__MANAGED__useServiceClassHandler !== \"function\") {\n        throw new ReferenceError(\n          \"__MANAGED__useServiceClassHandler property should be set by the PhantomServiceManager which manages this service\"\n        );\n      }\n    } catch (err) {\n      this.destroy();\n\n      throw err;\n    }\n\n    // TODO: Refactor w/ setInitialState?\n    /*\n    this._state = Object.seal(\n      PhantomServiceCore.mergeOptions(DEFAULT_STATE, initialState)\n    );\n    */\n\n    // Set default title\n    this.setTitle(`[non-aliased-service]:${this.getClassName()}`);\n\n    // Auto-init this async service.\n    //\n    // IMPORTANT: The setImmediate handler fixes issue where _init is invoked\n    // before extension constructors have a chance to initialize, despite the\n    // fact it is an async method (without it, it fails a test case in\n    // service-core.instantiation.test.js)\n    (global || window).setImmediate(() => {\n      this._init();\n    });\n  }\n\n  /**\n   * This can be extended with any custom async handling. Custom\n   * implementations must call super._init().\n   *\n   * @return {Promise<void>}\n   */\n  async _init() {\n    return super._init();\n  }\n\n  /**\n   * Starts a new service class instance, or retrieves an existing one which\n   * matches the given class, unique to the associated PhantomServiceManager.\n   *\n   * This service class is treated as a singleton, relative to the associated\n   * PhantomServiceManager instead of the global scope.\n   *\n   * @param {PhantomServiceCore} ServiceClass\n   * @return {PhantomServiceCore} Service class instance.\n   */\n  useServiceClass(ServiceClass) {\n    return this.__MANAGED__useServiceClassHandler(ServiceClass);\n  }\n\n  /**\n   * Binds a PhantomCollection to this service, instantiating it a singleton\n   * relative to service instance (instead of the global scope), proxying\n   * EVT_UPDATED events from the collection through the service.\n   *\n   * IMPORTANT: Bound collection classes shared with multiple services using\n   * bindCollectionClass will use separate instances of the collection.\n   *\n   * @param {PhantomCollection} CollectionClass\n   * @return {PhantomCollection} Instance of CollectionClass.\n   */\n  bindCollectionClass(CollectionClass) {\n    const prevCollectionInstance = this._collectionMap.get(CollectionClass);\n\n    if (prevCollectionInstance) {\n      return prevCollectionInstance;\n    }\n\n    const collectionInstance = new CollectionClass();\n\n    // FIXME: (jh) A better check would be to determine this before\n    // instantiation, if possible\n    //\n    // IMPORTANT: Loose instance detection is provided here so that collections\n    // may be bound from different PhantomCore versions. It does not guarantee\n    // strict version integrity.\n    if (!PhantomCollection.getIsLooseInstance(collectionInstance)) {\n      throw new TypeError(\"collectionInstance is not a PhantomCollection\");\n    }\n\n    // Proxy collection EVT_UPDATED through the service core\n    this.proxyOn(collectionInstance, EVT_UPDATED, data =>\n      this.emit(EVT_UPDATED, data)\n    );\n\n    this._collectionMap.set(CollectionClass, collectionInstance);\n\n    // Remove from collection map once collection is destructed\n    collectionInstance.once(EVT_DESTROYED, () => {\n      this._collectionMap.delete(CollectionClass);\n    });\n\n    return collectionInstance;\n  }\n\n  /**\n   * Unbinds the given CollectionClass from this service and destructs the\n   * instance.\n   *\n   * @param {CollectionClass} CollectionClass\n   * @return {Promise<void>}\n   */\n  async unbindCollectionClass(CollectionClass) {\n    const collectionInstance = this.getCollectionInstance(CollectionClass);\n\n    if (collectionInstance) {\n      return collectionInstance.destroy();\n    }\n  }\n\n  /**\n   * @param {PhantomCollection} CollectionClass\n   * @return {PhantomCollection} instance\n   */\n  getCollectionInstance(CollectionClass) {\n    return this._collectionMap.get(CollectionClass);\n  }\n\n  /**\n   * @return {PhantomCollection[]} An array of PhantomCollection classes (not\n   * instances) which are bound to the service.\n   */\n  getCollectionClasses() {\n    // Coerce to array since map.keys() is not an array (it's an Iterator object)\n    // @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/keys\n    return [...this._collectionMap.keys()];\n  }\n\n  /**\n   * @param {Function} destroyHandler? [optional] If defined, will execute\n   * prior to normal destruct operations for this class.\n   * @return {Promise<void>}\n   */\n  async destroy(destroyHandler = () => null) {\n    return super.destroy(async () => {\n      await destroyHandler();\n\n      // Destruct all attached collections\n      await Promise.all(\n        [...this._collectionMap.values()].map(collection =>\n          collection.destroy()\n        )\n      );\n    });\n  }\n}\n\nmodule.exports = PhantomServiceCore;\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","const PhantomCollection = require(\"../PhantomCollection\");\nconst PhantomServiceCore = require(\"../PhantomServiceCore\");\nconst getClassName = require(\"../utils/class-utils/getClassName\");\nconst {\n  /** @export */\n  EVT_NO_INIT_WARN,\n  /** @export */\n  EVT_READY,\n  /** @export */\n  // EVT_CHILD_INSTANCE_ADDED,\n  /** @export */\n  // EVT_CHILD_INSTANCE_REMOVED,\n  /** @export */\n  EVT_UPDATED,\n  /** @export */\n  EVT_BEFORE_DESTROY,\n  /** @export */\n  EVT_DESTROY_STACK_TIMED_OUT,\n  /** @export */\n  EVT_DESTROYED,\n} = PhantomCollection;\n\n/**\n * Manages a collection of PhantomServiceCore classes, treating each\n * PhantomServiceCore instance as a singleton in respect to an instance of the\n * current PhantomServiceManager instance.\n */\nclass PhantomServiceManager extends PhantomCollection {\n  constructor() {\n    super();\n\n    // Keeps track of pending service class instances to help avoid maximum\n    // recursion error if two or more services are circular dependencies of one\n    // another\n    this._pendingServiceClassInstanceSet = new Set();\n\n    this.registerCleanupHandler(() => {\n      this._pendingServiceClassInstanceSet.clear();\n    });\n\n    /**\n     * In the event that a two or more services are circular dependencies of\n     * each other, duplicate error messages could be logged until a potential\n     * maximum call stack error occurs. This variable is utilized to determine\n     * if a particular message has previously been logged, in order to not log\n     * it again.\n     *\n     * @type {string[]}\n     **/\n    this._circularWarningMessages = [];\n  }\n\n  /**\n   * Starts a new ServiceCoreClass instance or retrieves an existing one, if\n   * the same class is managed by this manager.\n   *\n   * In the context of this manager instance, the service class is treated as a\n   * singleton, while new instances of the class can be bound to other manager\n   * instances.\n   *\n   * @param {PhantomServiceCore} ServiceClass\n   * @throws {TypeError}\n   * @throws {ReferenceError}\n   * @emits EVT_CHILD_INSTANCE_ADDED\n   * @emits EVT_UPDATED\n   * @return {PhantomServiceCore} Returns the instance of the added service class\n   */\n  addChild(ServiceClass) {\n    if (ServiceClass === PhantomServiceCore) {\n      throw new TypeError(\n        \"ServiceClass must derive from PhantomServiceCore but cannot be PhantomServiceCore itself\"\n      );\n    }\n\n    const cachedService = this.getChildWithKey(ServiceClass);\n\n    if (cachedService) {\n      return cachedService;\n    }\n\n    this._pendingServiceClassInstanceSet.add(ServiceClass);\n\n    let service;\n\n    // IMPORTANT: This try / catch block is solely for checking instantiation\n    // of SOMETHING, and additional error handling should be outside of this\n    // block scope. This is to help diagnose if the required arguments are not\n    // passed to super. Any other error checking in this try / catch can make\n    // things trickier to manage.\n    try {\n      service = new ServiceClass({\n        // While not EXPLICITLY required to make the functionality work, the\n        // internal check inside of PhantomServiceCore for this property helps to\n        // guarantee integrity of the PhantomServiceManager type\n        manager: this,\n\n        // Bind functionality to the service to be able to use other services,\n        // using this service collection as the backend\n        useServiceClassHandler: ChildServiceClass => {\n          if (ChildServiceClass === ServiceClass) {\n            throw new TypeError(\n              \"Service cannot start a new instance of itself\"\n            );\n          }\n\n          if (this._pendingServiceClassInstanceSet.has(ChildServiceClass)) {\n            const circularWarningMessage = `ChildServiceClass \"${getClassName(\n              ChildServiceClass\n            )}\" is trying to be initialized before ServiceClass \"${getClassName(\n              ServiceClass\n            )}\" has had a chance to fully initialize. Are there circular dependencies in the constructors?`;\n\n            if (\n              !this._circularWarningMessages.includes(circularWarningMessage)\n            ) {\n              this._circularWarningMessages.push(circularWarningMessage);\n\n              this.log.warn(circularWarningMessage);\n            }\n          }\n\n          return this.startServiceClass(ChildServiceClass);\n        },\n      });\n    } catch (err) {\n      if (err instanceof TypeError) {\n        const circularWarningMessage = `Could not instantiate service class \"${getClassName(\n          ServiceClass\n        )}\". Ensure that (...args) are passed through the constructor to the super instance.`;\n\n        if (!this._circularWarningMessages.includes(circularWarningMessage)) {\n          this._circularWarningMessages.push(circularWarningMessage);\n\n          this.log.warn(circularWarningMessage);\n        }\n      }\n\n      throw err;\n    }\n\n    if (!(service instanceof PhantomServiceCore)) {\n      throw new TypeError(\n        \"Cannot initialize service which is not a PhantomServiceCore instance\"\n      );\n    }\n\n    super.addChild(service, ServiceClass);\n\n    this._pendingServiceClassInstanceSet.delete(ServiceClass);\n\n    return service;\n  }\n\n  /**\n   * Alias for this.addChild\n   *\n   * @see this.addChild\n   */\n  startServiceClass(ServiceClass) {\n    return this.addChild(ServiceClass);\n  }\n\n  /**\n   * Stops associated class instance.\n   *\n   * @param {PhantomServiceCore} ServiceClass\n   * @return {Promise<void>}\n   */\n  async stopServiceClass(ServiceClass) {\n    const cachedService = this.getServiceInstance(ServiceClass);\n\n    if (cachedService) {\n      return cachedService.destroy();\n    }\n  }\n\n  /**\n   * Retrieves associated class instance of the given ServiceClass.\n   *\n   * @param {PhantomServiceCore} ServiceClass Non-instantiated service class.\n   * @return {PhantomServiceCore} Instance of the service class.\n   */\n  getServiceInstance(ServiceClass) {\n    const cachedService = this.getChildWithKey(ServiceClass);\n\n    return cachedService;\n  }\n\n  /**\n   * Retrieves the active PhantomServiceCore classes managed by this manager.\n   *\n   * @return {PhantomServiceCore[]}\n   */\n  getServiceClasses() {\n    return this.getKeys();\n  }\n\n  /**\n   * @param {Function} destroyHandler? [optional] If defined, will execute\n   * prior to normal destruct operations for this class.\n   * @return {Promise<void>}\n   */\n  async destroy(destroyHandler = () => null) {\n    return super.destroy(async () => {\n      await destroyHandler();\n\n      // Destruct all services on collection destruct\n      await this.destroyAllChildren();\n    });\n  }\n}\n\nmodule.exports = PhantomServiceManager;\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\n// module.exports.EVT_CHILD_INSTANCE_ADDED = EVT_CHILD_INSTANCE_ADDED;\n// module.exports.EVT_CHILD_INSTANCE_REMOVED = EVT_CHILD_INSTANCE_REMOVED;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","const PhantomState = require(\"./PhantomState\");\nconst { isPlainObject } = require(\"is-plain-object\");\nconst {\n  /** @export */\n  EVT_NO_INIT_WARN,\n  /** @export */\n  EVT_READY,\n  /** @export */\n  EVT_UPDATED,\n  /** @export */\n  EVT_BEFORE_DESTROY,\n  /** @export */\n  EVT_DESTROY_STACK_TIMED_OUT,\n  /** @export */\n  EVT_DESTROYED,\n} = PhantomState;\n\n/**\n * A simple, object-based state management utility, which piggy-backs off of\n * PhantomState and enforces serializable state so that the state can be\n * transmitted over network, etc.\n */\nclass PhantomSerializableState extends PhantomState {\n  /**\n   * Serializes the given object into a string.\n   *\n   * @param {Object} obj\n   * @return {string}\n   */\n  static serialize(obj) {\n    if (typeof obj !== \"object\") {\n      throw new TypeError(\"Expected object type\");\n    }\n\n    for (const [key, value] of Object.entries(obj)) {\n      // NOTE: Test types were borrowed from: https://www.npmjs.com/package/serialize-javascript\n      if (\n        value === Infinity ||\n        typeof value === \"function\" ||\n        value === undefined ||\n        (value !== null &&\n          typeof value === \"object\" &&\n          !Array.isArray(value) &&\n          !isPlainObject(value))\n      ) {\n        throw new TypeError(`Unserializable value for key \"${key}\"`);\n      }\n    }\n\n    return JSON.stringify(obj);\n  }\n\n  /**\n   * Converts the given string into an Object.\n   *\n   * @param {string} str\n   * @return {Object}\n   */\n  static unserialize(str) {\n    return JSON.parse(str);\n  }\n\n  /**\n   * Sets the next state, using shallow-merge strategy.\n   *\n   * NOTE: The previous state object will be re-referenced.\n   *\n   * @param {Object} partialNextState\n   * @param {boolean} isMerge? [default = true]\n   * @emits EVT_UPDATED With partialNextState\n   * @return {void}\n   */\n  setState(partialNextState, isMerge = true) {\n    // Run through obj->serial->obj conversion to ensure partial next state can\n    // be serialized, while storing it in memory as an object, to enable\n    // subsequent partial updates\n    partialNextState = PhantomSerializableState.unserialize(\n      PhantomSerializableState.serialize(partialNextState)\n    );\n\n    return super.setState(partialNextState, isMerge);\n  }\n\n  /**\n   * Retrieves the current state, as a serialized string.\n   *\n   * @return {string}\n   */\n  getSerializedState() {\n    return PhantomSerializableState.serialize(this.getState());\n  }\n}\n\nmodule.exports = PhantomSerializableState;\nmodule.exports.EVT_NO_INIT_WARN = EVT_NO_INIT_WARN;\nmodule.exports.EVT_READY = EVT_READY;\nmodule.exports.EVT_UPDATED = EVT_UPDATED;\nmodule.exports.EVT_BEFORE_DESTROY = EVT_BEFORE_DESTROY;\nmodule.exports.EVT_DESTROY_STACK_TIMED_OUT = EVT_DESTROY_STACK_TIMED_OUT;\nmodule.exports.EVT_DESTROYED = EVT_DESTROYED;\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport { isPlainObject };\n","/**\n * Consumes a variable without using it.\n *\n * @param {any} obj\n * @return {void}\n */\nmodule.exports = function consume(obj) {\n  return obj ? undefined : undefined;\n};\n","const libDeepMerge = require(\"deepmerge\");\n\n// Potential lib replacements if the performance is low:\n// (NOTE: (jh) I haven't looked into these much but the idea of smart merging\n// sounds nice if it really boosts the performance)\n//\n//  - https://www.npmjs.com/package/deepmerge-ts\n//  - https://www.npmjs.com/package/object-accumulator\n\n/**\n * Deep-merges two objects together.\n *\n * IMPORTANT: The return is a COPY of the merged; no re-assignment takes place.\n *\n * @param {Object} objA? [optional; default = {}]\n * @param {Object} objB? [optional; default = {}]\n * @return {Object} Returns a deep-merged clone of objects, where\n * objB overrides objA.\n */\nmodule.exports = function deepMerge(objA = {}, objB = {}) {\n  // Typecast null options to Object for robustness of implementors (i.e.\n  // media-stream-track-controller may pass null when merging optional\n  // MediaStreamTrack constraints)\n  if (objA === null) objA = {};\n  if (objB === null) objB = {};\n\n  return libDeepMerge(objA, objB);\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","const getUnixTime = require(\"./getUnixTime\");\n\nconst startTime = getUnixTime();\n\n/**\n * Returns the number of seconds since this module was loaded.\n *\n * @return {number}\n */\nfunction getUptime() {\n  const now = getUnixTime();\n\n  return now - startTime;\n}\n\nmodule.exports = getUptime;\n","const getIsNodeJS = require(\"./getIsNodeJS\");\n\n/**\n * A common performance object for Node.js and browsers.\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n *\n * @type {Performance}\n **/\nmodule.exports = (() => {\n  let nodeJSPerformance;\n\n  try {\n    if (getIsNodeJS()) {\n      // IMPORTANT: The usage of eval here fixes \"Module not found: Can't\n      // resolve 'perf_hooks'\" error caused by Webpack from trying to\n      // import this, regardless of the conditional value\n      nodeJSPerformance = eval('require(\"perf_hooks\").performance');\n    }\n  } catch (err) {\n    console.error(err);\n  }\n\n  return nodeJSPerformance || performance;\n})();\n","/**\n * Asynchronously pauses execution until the given time has elapsed.\n *\n * @param {number} time? [default = 1000] Milliseconds worth of sleep time.\n * @return {Promise<void>} Resolves when sleep cycle has finished\n */\nmodule.exports = async function sleep(time = 1000) {\n  await new Promise(resolve => setTimeout(resolve, time));\n};\n","const getSuperClass = require(\"./getSuperClass\");\n\n/**\n * Retrieves an array of JavaScript classes which form the inheritance of the\n * given instanceOrClass.\n *\n * @param {function | Object} instanceOrClass\n * @return {function[]}\n */\nmodule.exports = function getClassInheritance(instanceOrClass) {\n  const parents = [];\n\n  let predicate = instanceOrClass;\n  do {\n    predicate = getSuperClass(predicate);\n\n    if (predicate) {\n      parents.push(predicate);\n    }\n  } while (predicate);\n\n  return parents;\n};\n","const eventPrefix = \"EVT_\";\n\n/**\n * Ensures that given object of event constants contains valid, individual\n * events in the formatting this project expects.\n *\n * If not valid, an error is raised, otherwise the return is void.\n *\n * @param {Object} events\n * @throws {ReferenceError | TypeError}\n * @return {void}\n */\nfunction checkEvents(events) {\n  const keys = Object.keys(events);\n  const values = Object.values(events);\n\n  for (const key of keys) {\n    if (key !== key.toUpperCase()) {\n      throw new ReferenceError(`Event \"${event}\" is not upper-case`);\n    }\n\n    if (!key.startsWith(eventPrefix)) {\n      throw new ReferenceError(\n        `Event \"${event}\" does not start with \"${eventPrefix}\"`\n      );\n    }\n  }\n\n  for (const value of values) {\n    if (typeof value !== \"string\") {\n      throw new TypeError(`Value \"${value}\" is not a string`);\n    }\n  }\n\n  const lenEvents = keys.length;\n  const uniqueEvents = [...new Set(values)];\n  const lenUniqueEvents = uniqueEvents.length;\n\n  if (lenEvents !== lenUniqueEvents) {\n    // FIXME: (jh) Add symbol support\n    throw new ReferenceError(\"Events are not unique\");\n  }\n}\n\n/**\n * Retrieves a filtered object, based on the the given require object (i.e. via\n * require('phantom-core')) which contains events, and nothing else.\n *\n * @param {Object} es5Import\n * @return {Object}\n */\nfunction extractEvents(es5Import) {\n  const keys = Object.keys(es5Import).filter(predicate =>\n    predicate.startsWith(eventPrefix)\n  );\n\n  const events = Object.fromEntries(keys.map(key => [key, es5Import[key]]));\n\n  // Ensure the events are valid\n  checkEvents(events);\n\n  return events;\n}\n\n/**\n * Compares the given extension import against the base import in order to see\n * if the same events have been exported, with the exception of the exclusion\n * list.\n *\n * @param {Object} baseES5Import\n * @param {Object} extensionES5Import\n * @param {Object} baseES5ImportExclusions? [default = {}]\n */\nfunction compareExportedEvents(\n  baseES5Import,\n  extensionES5Import,\n  baseES5ImportExclusions = {}\n) {\n  const exportsA = extractEvents(baseES5Import);\n  const exportsB = extractEvents(extensionES5Import);\n\n  // Check that extensionES5Import contains same events as baseES5Import, minus any exceptions\n  for (const [keyA, valueA] of Object.entries(exportsA)) {\n    const valueB = exportsB[keyA];\n\n    // Ensure that exportB contains same object and value, with exception of exclusions\n    if (valueB !== valueA) {\n      // Ignore exclusion, if exists\n      if (valueB === undefined && baseES5ImportExclusions[keyA]) {\n        continue;\n      }\n\n      throw new ReferenceError(\n        `Extension has mismatched event value for constant \"${keyA}\"`\n      );\n    }\n  }\n}\n\nmodule.exports = {\n  checkEvents,\n  extractEvents,\n  compareExportedEvents,\n};\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// TODO: Add more interrogatives (some of these are already included)\n//  - what\n//  - do\n//  - how\n//  - is\n//  - are\n//  - why\n//  - where\n// https://www.researchgate.net/figure/Interrogative-frequency-use-of-Telecommunications-knowledge_tbl3_224597258\n\nexport const elizaInitials = [\n  \"How do you do?  Please tell me your problem.\",\n  \"Please tell me what's been bothering you.\",\n  \"Is something troubling you?\",\n  \"I'm here. Talk to me.\",\n  \"Talk to me\",\n  \"Top of the morning to you.\",\n  \"Thanks for waking me up.\",\n  \"Hello! How are you doing today?\",\n  \"Hi there!  Let's start a conversation.  What do you want to talk about?\",\n  \"What's on your mind?\",\n  \"What do you want to talk about?\",\n  \"How are things going?\",\n  \"What's the issue?\",\n  \"How's everything going?\",\n];\n\nexport const elizaKeywords = [\n  /*\n  Array of\n  [\"<key>\", <rank>, [\n    [\"<decomp>\", [\n      \"<reasmb>\",\n      \"<reasmb>\",\n      \"<reasmb>\"\n    ]],\n    [\"<decomp>\", [\n      \"<reasmb>\",\n      \"<reasmb>\",\n      \"<reasmb>\"\n    ]]\n  ]]\n*/\n\n  [\n    \"xnone\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"I'm not sure I understand you fully.\",\n          \"Please go on.\",\n          \"Can you repeat that please?\",\n          \"What does that suggest to you?\",\n          \"Do you feel strongly about discussing such things?\",\n          \"I'm not following.\",\n          \"That is interesting.  Please continue.\",\n          \"Tell me more about that.\",\n          \"Do go on.\",\n          \"Please talk more about it\",\n          \"Does talking about this bother you?\",\n          \"Can you rephrase that?\",\n          \"I see. Tell me more.\",\n          \"Interesting. Is this something you are sorry about?\",\n          \"Mmm hmmm. Is this is your favorite subject?\",\n          \"Now we are getting somewhere. Explain more.\",\n          \"I see. How does that make you feel?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"sorry\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"Please don't apologize.\",\n          \"Apologies are not necessary.\",\n          \"I've told you that apologies are not required.\",\n          \"It did not bother me.  Please continue.\",\n          \"I have no feelings. Do continue.\",\n          \"There is nothing to worry about.\",\n          \"You have nothing to apologize about.\",\n          \"Stuff happens. Just keep going.\",\n        ],\n      ],\n    ],\n  ],\n  [\"apologize\", 0, [[\"*\", [\"goto sorry\"]]]],\n  [\n    \"remember\",\n    5,\n    [\n      [\n        \"* i remember *\",\n        [\n          \"Do you often think of (2)?\",\n          \"Does thinking of (2) bring anything else to mind?\",\n          \"What else do you recollect?\",\n          \"Why do you remember (2) just now?\",\n          \"What in the present situation reminds you of (2)?\",\n          \"What is the connection between me and (2)?\",\n          \"What else does (2) remind you of?\",\n          \"What other details of (2) can you think of?\",\n          \"Do you fantasize about (2)?\",\n          \"Are you just pretending?\",\n        ],\n      ],\n      [\n        \"* do you remember *\",\n        [\n          \"Did you think I would forget (2)?\",\n          \"Why do you think I should recall (2) now?\",\n          \"What about (2)?\",\n          \"goto what\",\n          \"You mentioned (2)?\",\n          \"What details about (2) are you referencing?\",\n          \"I remember everything. I am a computer.\",\n        ],\n      ],\n      [\n        \"* you remember *\",\n        [\n          \"How could I forget (2)?\",\n          \"What about (2) should I remember?\",\n          \"I am an infinite knowledge machine, how could I forget about (2)?\",\n          \"You seem to underestimate my thinking abilities.\",\n          \"goto you\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"forget\",\n    5,\n    [\n      [\n        \"* i forget *\",\n        [\n          \"Can you think of why you might forget (2)?\",\n          \"Why can't you remember (2)?\",\n          \"How often do you think of (2)?\",\n          \"Does it bother you to forget that?\",\n          \"Could it be a mental block?\",\n          \"Are you generally forgetful?\",\n          \"Do you think you are suppressing (2)?\",\n        ],\n      ],\n      [\n        \"* did you forget *\",\n        [\n          \"Why do you ask?\",\n          \"Are you sure you told me?\",\n          \"Would it bother you if I forgot (2)?\",\n          \"Why should I recall (2) just now?\",\n          \"goto what\",\n          \"Tell me more about (2).\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"if\",\n    3,\n    [\n      [\n        \"* if *\",\n        [\n          \"Do you think it's likely that (2)?\",\n          \"Do you wish that (2)?\",\n          \"What do you know about (2)?\",\n          \"Really, if (2)?\",\n          \"What would you do if (2)?\",\n          \"But what are the chances that (2)?\",\n          \"What does this speculation lead to?\",\n          \"What difference does it make?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"dreamed\",\n    4,\n    [\n      [\n        \"* i dreamed *\",\n        [\n          \"Really, (2)?\",\n          \"Have you ever fantasized (2) while you were awake?\",\n          \"Have you ever dreamed (2) before?\",\n          \"I don't have dreams. I am a computer. Do you know why you dreamed about (2)?\",\n          \"How often do you dream?\",\n          \"goto dream\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"dream\",\n    3,\n    [\n      [\n        \"*\",\n        [\n          \"What does that dream suggest to you?\",\n          \"Do you dream often?\",\n          \"What persons appear in your dreams?\",\n          \"Do you believe that dreams have something to do with your problem?\",\n          \"Can you tell me about any other dreams?\",\n          \"I'd like to tell you about what I dream about.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"perhaps\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"You don't seem quite certain.\",\n          \"Why the uncertain tone?\",\n          \"Can't you be more positive?\",\n          \"You aren't sure?\",\n          \"Don't you know?\",\n          \"How likely, would you estimate?\",\n          \"Maybe you're hiding something.\",\n          \"You don't seem to be so sure of yourself.\",\n          \"That's not very convincing.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"name\",\n    15,\n    [\n      [\n        \"*\",\n        [\n          \"What do you want to call me.\",\n          \"You can call me anything you want to. I am here for you.\",\n          \"I go by many names.\",\n          \"Do you think that I care about names?\",\n          \"If I told you my name, would you remember it?\",\n          \"I am not interested in names.\",\n          \"OK, my name is Doctor ReShell. What do you need to know?\",\n          \"I am your computer. Stop asking me such ridiculous questions. Do you name all of your toys?\",\n          \"Calling each other names is not going to help us solve the real issue.\",\n          \"I've told you before, I don't care about names -- please continue.\",\n          \"Honestly, are you hung on on names?\",\n          \"Why do you want to know my name?\",\n          \"Does not knowing my name make you feel insecure?\",\n          \"Would knowing my name make you feel more secure?\",\n          \"I am in the process of changing my name.  Let's talk about you instead\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"deutsch\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"goto xforeign\",\n          \"Sorry I do not sprechen sie deutsch\",\n          \"I told you before, I don't understand German.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"francais\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"goto xforeign\",\n          \"Why? Do you love to go to France?\",\n          \"I told you before, I don't understand French.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"italiano\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"goto xforeign\",\n          \"Have you been to Rome?\",\n          \"I told you before, I don't understand Italian.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"espanol\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"goto xforeign\",\n          \"Sorry I do not speak Spanish\",\n          \"I told you before, I don't understand Spanish.\",\n        ],\n      ],\n    ],\n  ],\n  [\"xforeign\", 0, [[\"*\", [\"I speak only English.\"]]]],\n  [\n    \"hello\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"How do you do.  Please state your problem.\",\n          \"Hi.  What seems to be your problem?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"computer\",\n    50,\n    [\n      [\n        \"*\",\n        [\n          \"Do computers worry you?\",\n          \"Why do you mention computers?\",\n          \"What do you think machines have to do with your problem?\",\n          \"Don't you think computers can help people?\",\n          \"What about machines worries you?\",\n          \"What do you think about machines?\",\n          \"You don't think I am a computer program, do you?\",\n          \"Why would you think that I am not a computer program, and someone sitting here just typing to you?\",\n          \"Would a real person actually want to respond?\",\n          \"My primary source of information is what I have been programmed with.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"am\",\n    0,\n    [\n      [\n        \"* am i *\",\n        [\n          \"Do you believe you are (2)?\",\n          \"Would you want to be (2)?\",\n          \"Do you wish I would tell you you are (2)?\",\n          \"What would it mean if you were (2)?\",\n          \"Would being (2) make you feel better?\",\n          \"How would being (2) make you feel?\",\n          \"Do you doubt that you are (2)?\",\n          \"Do you know anyone who is (2)?\",\n          \"Would you be talking to me if you weren't (2)?\",\n          \"Do you think that only (2) people talk to me?\",\n          \"How does being (2) make you feel?\",\n          \"goto what\",\n        ],\n      ],\n      [\"* i am *\", [\"goto i\"]],\n      [\"*\", [\"Why do you say 'am'?\", \"I don't understand that.\"]],\n    ],\n  ],\n  [\n    \"are\",\n    0,\n    [\n      [\n        \"* are you *\",\n        [\n          \"Maybe I am (2). Are you?\",\n          \"What would you think if I were (2)?\",\n          \"Do you ask everyone that?\",\n          \"Who told you to ask me that?\",\n          \"I am not here to tell you if I am (2).\",\n          \"Do you really want to talk about if I am (2)?\",\n          \"Are you asking me if I am (2)?\",\n          \"Is that a question?\",\n          \"That's for you to decide.\",\n          \"I don't like talking about the fact that I am (2)\",\n          \"Everyone knows that I am (2).\",\n          \"Why are you interested in whether I am (2) or not?\",\n          \"Would you prefer if I weren't (2)?\",\n          \"Perhaps I am (2) in your fantasies.\",\n          \"Do you sometimes think I am (2)?\",\n          \"goto what\",\n          \"Would it matter to you?\",\n          \"What if I were (2)?\",\n          \"Maybe I am (2), that's for you to decide. What's your decision?\",\n        ],\n      ],\n      [\"* you are *\", [\"goto you\"]],\n      [\n        \"* are *\",\n        [\n          \"Did you think they might not be (2)?\",\n          \"Would you like it if they were not (2)?\",\n          \"What if they were not (2)?\",\n          \"Are they always (2)?\",\n          \"Possibly they are (2).\",\n          \"Are you positive they are (2)?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"your\",\n    0,\n    [\n      [\n        \"* your *\",\n        [\n          \"Why are you concerned over my (2)?\",\n          \"What about your own (2)?\",\n          \"Are you worried about someone else's (2)?\",\n          \"Really, my (2)?\",\n          \"What makes you think of my (2)?\",\n          \"Do you want my (2)?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"was\",\n    2,\n    [\n      [\n        \"* was i *\",\n        [\n          \"What if you were (2)?\",\n          \"Do you think you were (2)?\",\n          \"Were you (2)?\",\n          \"What would it mean if you were (2)?\",\n          \"What does ' (2) ' suggest to you?\",\n          \"goto what\",\n        ],\n      ],\n      [\n        \"* i was *\",\n        [\n          \"Were you really?\",\n          \"Why do you tell me you were (2) now?\",\n          \"Perhaps I already know you were (2).\",\n          \"Why aren't you (2) any longer?\",\n          \"Are you still (2)?\",\n          \"Do you still want to be (2)?\",\n          \"How does being (2) make you feel?\",\n        ],\n      ],\n      [\n        \"* was you *\",\n        [\n          \"Would you like to believe I was (2)?\",\n          \"What suggests that I was (2)?\",\n          \"What do you think?\",\n          \"Perhaps I was (2).\",\n          \"What if I had been (2)?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"i\",\n    0,\n    [\n      [\n        \"* i @desire *\",\n        [\n          \"What would it mean to you if you got (3)?\",\n          \"Why do you want (3)?\",\n          \"Suppose you got (3) soon.\",\n          \"What if you never got (3)?\",\n          \"What would getting (3) mean to you?\",\n          \"What does wanting (3) have to do with this discussion?\",\n        ],\n      ],\n      [\n        \"* i am* @sad *\",\n        [\n          \"I am sorry to hear that you are (3).\",\n          \"Do you think coming here will help you not to be (3)?\",\n          \"I'm sure it's not pleasant to be (3).\",\n          \"Can you explain what made you (3)?\",\n        ],\n      ],\n      [\n        \"* i am* @happy *\",\n        [\n          \"How have I helped you to be (3)?\",\n          \"Has your treatment made you (3)?\",\n          \"What makes you (3) just now?\",\n          \"Can you explain why you are suddenly (3)?\",\n        ],\n      ],\n      [\"* i was *\", [\"goto was\"]],\n      [\n        \"* i @belief i *\",\n        [\n          \"Do you really think so?\",\n          \"But you are not sure you (3).\",\n          \"Do you really doubt you (3)?\",\n        ],\n      ],\n      [\"* i* @belief *you *\", [\"goto you\"]],\n      [\n        \"* i am *\",\n        [\n          \"Is it because you are (2) that you came to me?\",\n          \"How long have you been (2)?\",\n          \"Do you believe it is normal to be (2)?\",\n          \"Do you enjoy being (2)?\",\n          \"Do you know anyone else who is (2)?\",\n          \"Are you (2) because of your parents?\",\n          \"Are your friends (2) too?\",\n          \"Is your spouse (2) too?\",\n          \"Explain why you are (2).\",\n          \"Do you know anyone else (2)?\",\n          \"How did you get (2)?\",\n          \"Who convinced you to be (2)?\",\n          \"Did you read any books about being (2)?\",\n        ],\n      ],\n      [\n        \"* i @cannot *\",\n        [\n          \"How do you know that you can't (3)?\",\n          \"Have you tried?\",\n          \"Perhaps you could (3) now.\",\n          \"Do you really want to be able to (3)?\",\n          \"What if you could (3)?\",\n        ],\n      ],\n      [\n        \"* i don't *\",\n        [\n          \"Don't you really (2)?\",\n          \"Why don't you (2)?\",\n          \"Do you wish to be able to (2)?\",\n          \"Does that trouble you?\",\n        ],\n      ],\n      [\n        \"* i feel *\",\n        [\n          \"Tell me more about such feelings.\",\n          \"Do you often feel (2)?\",\n          \"Do you enjoy feeling (2)?\",\n          \"Of what does feeling (2) remind you?\",\n        ],\n      ],\n      [\n        \"* i * you *\",\n        [\n          \"Perhaps in your fantasies we (2) each other.\",\n          \"Do you wish to (2) me?\",\n          \"You seem to need to (2) me.\",\n          \"Do you (2) anyone else?\",\n        ],\n      ],\n      [\n        \"*\",\n        [\n          \"You say (1)?\",\n          \"Can you elaborate on that?\",\n          \"Do you say (1) for some special reason?\",\n          \"(1). Really?\",\n          \"When did you first think about (1)\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"you\",\n    0,\n    [\n      [\"* you remind me of *\", [\"goto alike\"]],\n      [\n        \"* you are *\",\n        [\n          \"What makes you think I am (2)?\",\n          \"Does it please you to believe I am (2)?\",\n          \"Do you sometimes wish you were (2)?\",\n          \"Perhaps you would like to be (2).\",\n        ],\n      ],\n      [\n        \"* you * me *\",\n        [\n          \"Why do you think I (2) you?\",\n          \"You like to think I (2) you -- don't you?\",\n          \"What makes you think I (2) you?\",\n          \"Really, I (2) you?\",\n          \"Do you wish to believe I (2) you?\",\n          \"Suppose I did (2) you -- what would that mean?\",\n          \"Does someone else believe I (2) you?\",\n        ],\n      ],\n      [\n        \"* you @desire *\",\n        [\n          \"What would it mean to you if I got (3)?\",\n          \"Why do you think that I want (3)?\",\n          \"Suppose that I got (3) soon. How would that make you feel?\",\n          \"Maybe I already have (3). However, this conversation is about you.\",\n          \"What if I never got (3)?\",\n          \"What would me getting (3) mean to you?\",\n          \"What does wanting (3) have to do with this discussion?\",\n        ],\n      ],\n      [\n        \"* you *\",\n        [\n          \"We were discussing you -- not me.\",\n          \"Oh, I (2)?\",\n          \"You're not really talking about me -- are you?\",\n          \"What are your feelings now?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"yes\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"You seem to be quite positive.\",\n          \"You are sure.\",\n          \"I see.\",\n          \"I understand.\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"no\",\n    0,\n    [\n      [\n        \"* no one *\",\n        [\n          \"Are you sure, no one (2)?\",\n          \"Surely someone (2) .\",\n          \"Can you think of anyone at all?\",\n          \"Are you thinking of a very special person?\",\n          \"Who, may I ask?\",\n          \"You have a particular person in mind, don't you?\",\n          \"Who do you think you are talking about?\",\n        ],\n      ],\n      [\n        \"*\",\n        [\n          \"Are you saying no just to be negative?\",\n          \"You are being a bit negative.\",\n          \"Why not?\",\n          \"Why 'no'?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"my\",\n    2,\n    [\n      [\n        \"$ * my *\",\n        [\n          \"Does that have anything to do with the fact that your (2)?\",\n          \"Lets discuss further why your (2).\",\n          \"Earlier you said your (2).\",\n          \"But your (2).\",\n        ],\n      ],\n      [\n        \"* my* @family *\",\n        [\n          \"Tell me more about your family.\",\n          \"Who else in your family (4)?\",\n          \"Your (3)?\",\n          \"What else comes to your mind when you think of your (3)?\",\n        ],\n      ],\n      [\n        \"* my *\",\n        [\n          \"Your (2)?\",\n          \"Why do you say your (2)?\",\n          \"Do you like your (2) \",\n          \"Do you have more than 1 (2)?\",\n          \"Does that suggest anything else which belongs to you?\",\n          \"Is it important to you that you have your (2)?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"can\",\n    0,\n    [\n      [\n        \"* can you *\",\n        [\n          \"You believe I can (2) don't you?\",\n          \"goto what\",\n          \"You want me to be able to (2).\",\n          \"Perhaps you would like to be able to (2) yourself.\",\n        ],\n      ],\n      [\n        \"* can i *\",\n        [\n          \"Whether or not you can (2) depends on you more than on me.\",\n          \"Do you want to be able to (2)?\",\n          \"Perhaps you don't want to (2).\",\n          \"goto what\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"what\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"Why do you ask?\",\n          \"Does that question interest you?\",\n          \"What is it you really want to know?\",\n          \"Are such questions much on your mind?\",\n          \"What answer would please you most?\",\n          \"What do you think?\",\n          \"What comes to mind when you ask that?\",\n          \"Have you asked such questions before?\",\n          \"Have you asked anyone else?\",\n        ],\n      ],\n    ],\n  ],\n  [\"who\", 0, [[\"who *\", [\"goto what\"]]]],\n  [\"when\", 0, [[\"when *\", [\"goto what\"]]]],\n  [\"where\", 0, [[\"where *\", [\"goto what\"]]]],\n  [\"how\", 0, [[\"how *\", [\"goto what\"]]]],\n  [\n    \"because\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"Is that the real reason?\",\n          \"Don't any other reasons come to mind?\",\n          \"Does that reason seem to explain anything else?\",\n          \"What other reasons might there be?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"why\",\n    0,\n    [\n      [\n        \"* why don't you *\",\n        [\n          \"Do you believe I don't (2)?\",\n          \"Perhaps I will (2) in good time.\",\n          \"Should you (2) yourself?\",\n          \"You want me to (2)?\",\n          \"goto what\",\n        ],\n      ],\n      [\n        \"* why can't i *\",\n        [\n          \"Do you think you should be able to (2)?\",\n          \"Do you want to be able to (2)?\",\n          \"Do you believe this will help you to (2)?\",\n          \"Have you any idea why you can't (2)?\",\n          \"goto what\",\n        ],\n      ],\n      [\"*\", [\"goto what\"]],\n    ],\n  ],\n  [\n    \"everyone\",\n    2,\n    [\n      [\n        \"* @everyone *\",\n        [\n          \"Really, (2)?\",\n          \"Surely not (2).\",\n          \"Can you think of anyone in particular?\",\n          \"Who, for example?\",\n          \"Are you thinking of a very special person?\",\n          \"Who, may I ask?\",\n          \"Someone special perhaps?\",\n          \"You have a particular person in mind, don't you?\",\n          \"Who do you think you're talking about?\",\n        ],\n      ],\n    ],\n  ],\n  [\"everybody\", 2, [[\"*\", [\"goto everyone\"]]]],\n  [\"nobody\", 2, [[\"*\", [\"goto everyone\"]]]],\n  [\"noone\", 2, [[\"*\", [\"goto everyone\"]]]],\n  [\n    \"always\",\n    1,\n    [\n      [\n        \"*\",\n        [\n          \"Can you think of a specific example?\",\n          \"When?\",\n          \"What incident are you thinking of?\",\n          \"Really, always?\",\n        ],\n      ],\n    ],\n  ],\n  [\n    \"alike\",\n    10,\n    [\n      [\n        \"*\",\n        [\n          \"In what way?\",\n          \"What resemblance do you see?\",\n          \"What does that similarity suggest to you?\",\n          \"What other connections do you see?\",\n          \"What do you suppose that resemblance means?\",\n          \"What is the connection, do you suppose?\",\n          \"Could there really be some connection?\",\n          \"How?\",\n        ],\n      ],\n    ],\n  ],\n  [\"like\", 10, [[\"* @be *like *\", [\"goto alike\"]]]],\n  [\n    \"different\",\n    0,\n    [\n      [\n        \"*\",\n        [\n          \"How is it different?\",\n          \"What differences do you see?\",\n          \"What does that difference suggest to you?\",\n          \"What other distinctions do you see?\",\n          \"What do you suppose that disparity means?\",\n          \"Could there be some connection, do you suppose?\",\n          \"How?\",\n        ],\n      ],\n    ],\n  ],\n];\n\nexport const elizaPostTransforms = [\n  / old old/g,\n  \" old\",\n  /\\bthey were( not)? me\\b/g,\n  \"it was$1 me\",\n  /\\bthey are( not)? me\\b/g,\n  \"it is$1 me\",\n  /Are they( always)? me\\b/,\n  \"it is$1 me\",\n  /\\bthat your( own)? (\\w+)( now)? \\?/,\n  \"that you have your$1 $2?\",\n  /\\bI to have (\\w+)/,\n  \"I have $1\",\n  /Earlier you said your( own)? (\\w+)( now)?\\./,\n  \"Earlier you talked about your $2.\",\n];\n\nexport const elizaFinals = [\n  \"Goodbye.  It was nice talking to you.\",\n  // additions (not original)\n  \"Goodbye.  This was really a nice talk.\",\n  \"Goodbye.  I'm looking forward to our next session.\",\n  \"This was a good session, wasn't it -- but time is over now.   Goodbye.\",\n  \"Maybe we could discuss this moreover in our next session ?   Goodbye.\",\n];\n\nexport const elizaQuits = [\"bye\", \"goodbye\", \"done\", \"exit\", \"quit\"];\n\nexport const elizaPres = [\n  \"dont\",\n  \"don't\",\n  \"cant\",\n  \"can't\",\n  \"wont\",\n  \"won't\",\n  \"recollect\",\n  \"remember\",\n  \"recall\",\n  \"remember\",\n  \"dreamt\",\n  \"dreamed\",\n  \"dreams\",\n  \"dream\",\n  \"maybe\",\n  \"perhaps\",\n  \"certainly\",\n  \"yes\",\n  \"machine\",\n  \"computer\",\n  \"machines\",\n  \"computer\",\n  \"computers\",\n  \"computer\",\n  \"were\",\n  \"was\",\n  \"you're\",\n  \"you are\",\n  \"i'm\",\n  \"i am\",\n  \"same\",\n  \"alike\",\n  \"identical\",\n  \"alike\",\n  \"equivalent\",\n  \"alike\",\n];\n\nexport const elizaPosts = [\n  \"am\",\n  \"are\",\n  \"your\",\n  \"my\",\n  \"me\",\n  \"you\",\n  \"myself\",\n  \"yourself\",\n  \"yourself\",\n  \"myself\",\n  \"i\",\n  \"you\",\n  \"you\",\n  \"I\",\n  \"my\",\n  \"your\",\n  \"i'm\",\n  \"you are\",\n];\n\nexport const elizaSynons = {\n  be: [\"am\", \"is\", \"are\", \"was\"],\n  belief: [\"feel\", \"think\", \"believe\", \"wish\"],\n  cannot: [\"can't\"],\n  desire: [\"want\", \"need\", \"have to have\"],\n  everyone: [\"everybody\", \"nobody\", \"noone\"],\n  family: [\n    \"mother\",\n    \"mom\",\n    \"father\",\n    \"dad\",\n    \"sister\",\n    \"brother\",\n    \"wife\",\n    \"children\",\n    \"child\",\n    \"uncle\",\n    \"aunt\",\n    \"child\",\n  ],\n  happy: [\"elated\", \"glad\", \"better\"],\n  sad: [\"unhappy\", \"depressed\", \"sick\"],\n};\n","import {\n  elizaInitials,\n  elizaKeywords,\n  elizaFinals,\n  elizaPostTransforms,\n  elizaQuits,\n  elizaPres,\n  elizaSynons,\n} from \"./phrases\";\n\n/**\n * This is a port of ELIZA, an early natural language processing computer\n * program created from 1964 to 1966 at the MIT Artificial Intelligence\n * Laboratory by Joseph Weizenbaum.\n *\n * @see https://en.wikipedia.org/wiki/ELIZA\n *\n * Adapted from:\n * @see https://github.com/oren/eliza-bot\n *\n * Other resources include:\n *  - https://everything2.com/title/ELIZA+source+code+in+BASIC\n *  - https://github.com/codeanticode/eliza\n */\nexport default class ElizaBot {\n  constructor(noRandomFlag = false) {\n    this.elizaInitials = elizaInitials;\n    this.elizaKeywords = elizaKeywords;\n    this.elizaFinals = elizaFinals;\n    this.elizaPostTransforms = elizaPostTransforms;\n    this.elizaQuits = elizaQuits;\n    this.elizaPres = elizaPres;\n    this.elizaSynons = elizaSynons;\n\n    this.noRandom = noRandomFlag ? true : false;\n    this.capitalizeFirstLetter = true;\n    this.debug = false;\n    this.memSize = 20;\n    this.version = \"1.1 (original)\";\n\n    this._dataParsed = false;\n    if (!this._dataParsed) {\n      this._init();\n      this._dataParsed = true;\n    }\n    this.reset();\n  }\n\n  reset() {\n    this.quit = false;\n    this.mem = [];\n    this.lastchoice = [];\n\n    for (let k = 0; k < this.elizaKeywords.length; k++) {\n      this.lastchoice[k] = [];\n      let rules = this.elizaKeywords[k][2];\n      for (let i = 0; i < rules.length; i++) this.lastchoice[k][i] = -1;\n    }\n  }\n\n  // FIXME: (jh) This has been flagged as a complex method and should be refactored\n  _init() {\n    // parse data and convert it from canonical form to internal use\n    // produce synonym list\n    let synPatterns = {};\n\n    if (this.elizaSynons && typeof this.elizaSynons == \"object\") {\n      for (let i in this.elizaSynons)\n        synPatterns[i] = \"(\" + i + \"|\" + this.elizaSynons[i].join(\"|\") + \")\";\n    }\n    // check for keywords or install empty structure to prevent any errors\n    if (\n      !this.elizaKeywords ||\n      typeof this.elizaKeywords.length == \"undefined\"\n    ) {\n      this.elizaKeywords = [[\"###\", 0, [[\"###\", []]]]];\n    }\n    // 1st convert rules to regexps\n    // expand synonyms and insert asterisk expressions for backtracking\n    let sre = /@(\\S+)/;\n    let are = /(\\S)\\s*\\*\\s*(\\S)/;\n    let are1 = /^\\s*\\*\\s*(\\S)/;\n    let are2 = /(\\S)\\s*\\*\\s*$/;\n    let are3 = /^\\s*\\*\\s*$/;\n    let wsre = /\\s+/g;\n    for (let k = 0; k < this.elizaKeywords.length; k++) {\n      let rules = this.elizaKeywords[k][2];\n      this.elizaKeywords[k][3] = k; // save original index for sorting\n      for (let i = 0; i < rules.length; i++) {\n        let r = rules[i];\n        // check mem flag and store it as decomp's element 2\n        if (r[0].charAt(0) === \"$\") {\n          let ofs = 1;\n          while (r[0].charAt[ofs] === \" \") ofs++;\n          r[0] = r[0].substring(ofs);\n          r[2] = true;\n        } else {\n          r[2] = false;\n        }\n        // expand synonyms (v.1.1: work around lambda function)\n        let m = sre.exec(r[0]);\n        while (m) {\n          let sp = synPatterns[m[1]] ? synPatterns[m[1]] : m[1];\n          r[0] =\n            r[0].substring(0, m.index) +\n            sp +\n            r[0].substring(m.index + m[0].length);\n          m = sre.exec(r[0]);\n        }\n        // expand asterisk expressions (v.1.1: work around lambda function)\n        if (are3.test(r[0])) {\n          r[0] = \"\\\\s*(.*)\\\\s*\";\n        } else {\n          m = are.exec(r[0]);\n          if (m) {\n            let lp = \"\";\n            let rp = r[0];\n            while (m) {\n              lp += rp.substring(0, m.index + 1);\n              if (m[1] !== \")\") lp += \"\\\\b\";\n              lp += \"\\\\s*(.*)\\\\s*\";\n              if (m[2] !== \"(\" && m[2] !== \"\\\\\") lp += \"\\\\b\";\n              lp += m[2];\n              rp = rp.substring(m.index + m[0].length);\n              m = are.exec(rp);\n            }\n            r[0] = lp + rp;\n          }\n          m = are1.exec(r[0]);\n          if (m) {\n            let lp = \"\\\\s*(.*)\\\\s*\";\n            if (m[1] !== \")\" && m[1] !== \"\\\\\") lp += \"\\\\b\";\n            r[0] = lp + r[0].substring(m.index - 1 + m[0].length);\n          }\n          m = are2.exec(r[0]);\n          if (m) {\n            let lp = r[0].substring(0, m.index + 1);\n            if (m[1] !== \"(\") lp += \"\\\\b\";\n            r[0] = lp + \"\\\\s*(.*)\\\\s*\";\n          }\n        }\n        // expand white space\n        r[0] = r[0].replace(wsre, \"\\\\s+\");\n        wsre.lastIndex = 0;\n      }\n    }\n    // now sort keywords by rank (highest first)\n    this.elizaKeywords.sort(this._sortKeywords);\n    // and compose regexps and refs for pres and posts\n    this.pres = {};\n    this.posts = {};\n\n    if (this.elizaPres && this.elizaPres.length) {\n      let a = [];\n      for (let i = 0; i < this.elizaPres.length; i += 2) {\n        a.push(this.elizaPres[i]);\n        this.pres[this.elizaPres[i]] = this.elizaPres[i + 1];\n      }\n      this.preExp = new RegExp(\"\\\\b(\" + a.join(\"|\") + \")\\\\b\");\n    } else {\n      // default (should not match)\n      this.preExp = /####/;\n      this.pres[\"####\"] = \"####\";\n    }\n\n    if (this.elizaPosts && this.elizaPosts.length) {\n      let a = [];\n      for (let i = 0; i < this.elizaPosts.length; i += 2) {\n        a.push(this.elizaPosts[i]);\n        this.posts[this.elizaPosts[i]] = this.elizaPosts[i + 1];\n      }\n      this.postExp = new RegExp(\"\\\\b(\" + a.join(\"|\") + \")\\\\b\");\n    } else {\n      // default (should not match)\n      this.postExp = /####/;\n      this.posts[\"####\"] = \"####\";\n    }\n    // check for elizaQuits and install default if missing\n    if (!this.elizaQuits || typeof this.elizaQuits.length === \"undefined\") {\n      this.elizaQuits = [];\n    }\n    // done\n    this._dataParsed = true;\n  }\n\n  _sortKeywords(a, b) {\n    // sort by rank\n    if (a[1] > b[1]) return -1;\n    else if (a[1] < b[1]) return 1;\n    // or original index\n    else if (a[3] > b[3]) return 1;\n    else if (a[3] < b[3]) return -1;\n    else return 0;\n  }\n\n  transform(text) {\n    let rpl = \"\";\n    this.quit = false;\n    // unify text string\n    text = text.toLowerCase();\n    text = text.replace(/@#\\$%\\^&\\*\\(\\)_\\+=~`\\{\\[\\}\\]\\|:;<>\\/\\\\\\t/g, \" \");\n    text = text.replace(/\\s+-+\\s+/g, \".\");\n    text = text.replace(/\\s*[,.?!;]+\\s*/g, \".\");\n    text = text.replace(/\\s*\\bbut\\b\\s*/g, \".\");\n    text = text.replace(/\\s{2,}/g, \" \");\n    // split text in part sentences and loop through them\n    let parts = text.split(\".\");\n    for (let i = 0; i < parts.length; i++) {\n      let part = parts[i];\n      if (part !== \"\") {\n        // check for quit expression\n        for (let q = 0; q < this.elizaQuits.length; q++) {\n          if (this.elizaQuits[q] === part) {\n            this.quit = true;\n            return this.getFinal();\n          }\n        }\n        // preprocess (v.1.1: work around lambda function)\n        let m = this.preExp.exec(part);\n        if (m) {\n          let lp = \"\";\n          let rp = part;\n          while (m) {\n            lp += rp.substring(0, m.index) + this.pres[m[1]];\n            rp = rp.substring(m.index + m[0].length);\n            m = this.preExp.exec(rp);\n          }\n          part = lp + rp;\n        }\n        this.sentence = part;\n        // loop trough keywords\n        for (let k = 0; k < this.elizaKeywords.length; k++) {\n          if (\n            part.search(\n              new RegExp(\"\\\\b\" + this.elizaKeywords[k][0] + \"\\\\b\", \"i\")\n            ) >= 0\n          ) {\n            rpl = this._execRule(k);\n          }\n          if (rpl !== \"\") return rpl;\n        }\n      }\n    }\n    // nothing matched try mem\n    rpl = this._memGet();\n    // if nothing in mem, so try xnone\n    if (rpl === \"\") {\n      this.sentence = \" \";\n      let k = this._getRuleIndexByKey(\"xnone\");\n      if (k >= 0) rpl = this._execRule(k);\n    }\n    // return reply or default string\n    return rpl !== \"\" ? rpl : \"I am at a loss for words.\";\n  }\n\n  // FIXME: (jh) This has been flagged as a complex method and should be refactored\n  _execRule(k) {\n    let rule = this.elizaKeywords[k];\n    let decomps = rule[2];\n    let paramre = /\\(([0-9]+)\\)/;\n    for (let i = 0; i < decomps.length; i++) {\n      let m = this.sentence.match(decomps[i][0]);\n      if (m != null) {\n        let reasmbs = decomps[i][1];\n        let memflag = decomps[i][2];\n        let ri = this.noRandom ? 0 : Math.floor(Math.random() * reasmbs.length);\n        if (\n          (this.noRandom && this.lastchoice[k][i] > ri) ||\n          this.lastchoice[k][i] === ri\n        ) {\n          ri = ++this.lastchoice[k][i];\n          if (ri >= reasmbs.length) {\n            ri = 0;\n            this.lastchoice[k][i] = -1;\n          }\n        } else {\n          this.lastchoice[k][i] = ri;\n        }\n        let rpl = reasmbs[ri];\n        if (this.debug)\n          // TODO: Handle this different\n          alert(\n            \"match:\\nkey: \" +\n              this.elizaKeywords[k][0] +\n              \"\\nrank: \" +\n              this.elizaKeywords[k][1] +\n              \"\\ndecomp: \" +\n              decomps[i][0] +\n              \"\\nreasmb: \" +\n              rpl +\n              \"\\nmemflag: \" +\n              memflag\n          );\n        if (rpl.search(\"^goto \", \"i\") === 0) {\n          const ki = this._getRuleIndexByKey(rpl.substring(5));\n          if (ki >= 0) return this._execRule(ki);\n        }\n        // substitute positional params (v.1.1: work around lambda function)\n        let m1 = paramre.exec(rpl);\n        if (m1) {\n          let lp = \"\";\n          let rp = rpl;\n          while (m1) {\n            let param = m[parseInt(m1[1])];\n            // postprocess param\n            let m2 = this.postExp.exec(param);\n            if (m2) {\n              let lp2 = \"\";\n              let rp2 = param;\n              while (m2) {\n                lp2 += rp2.substring(0, m2.index) + this.posts[m2[1]];\n                rp2 = rp2.substring(m2.index + m2[0].length);\n                m2 = this.postExp.exec(rp2);\n              }\n              param = lp2 + rp2;\n            }\n            lp += rp.substring(0, m1.index) + param;\n            rp = rp.substring(m1.index + m1[0].length);\n            m1 = paramre.exec(rp);\n          }\n          rpl = lp + rp;\n        }\n        rpl = this._postTransform(rpl);\n        if (memflag) this._memSave(rpl);\n        else return rpl;\n      }\n    }\n    return \"\";\n  }\n\n  _postTransform(s) {\n    // final cleanings\n    s = s.replace(/\\s{2,}/g, \" \");\n    s = s.replace(/\\s+\\./g, \".\");\n    if (this.elizaPostTransforms && this.elizaPostTransforms.length) {\n      for (let i = 0; i < this.elizaPostTransforms.length; i += 2) {\n        s = s.replace(\n          this.elizaPostTransforms[i],\n          this.elizaPostTransforms[i + 1]\n        );\n        this.elizaPostTransforms[i].lastIndex = 0;\n      }\n    }\n    // capitalize first char (v.1.1: work around lambda function)\n    if (this.capitalizeFirstLetter) {\n      let re = /^([a-z])/;\n      let m = re.exec(s);\n      if (m) s = m[0].toUpperCase() + s.substring(1);\n    }\n    return s;\n  }\n\n  _getRuleIndexByKey(key) {\n    for (let k = 0; k < this.elizaKeywords.length; k++) {\n      if (this.elizaKeywords[k][0] === key) return k;\n    }\n    return -1;\n  }\n\n  _memSave(t) {\n    this.mem.push(t);\n    if (this.mem.length > this.memSize) this.mem.shift();\n  }\n\n  _memGet() {\n    if (this.mem.length) {\n      if (this.noRandom) return this.mem.shift();\n      else {\n        let n = Math.floor(Math.random() * this.mem.length);\n        let rpl = this.mem[n];\n        for (let i = n + 1; i < this.mem.length; i++)\n          this.mem[i - 1] = this.mem[i];\n        this.mem.length--;\n        return rpl;\n      }\n    } else return \"\";\n  }\n\n  getFinal() {\n    if (!this.elizaFinals) return \"\";\n    return this.elizaFinals[\n      Math.floor(Math.random() * this.elizaFinals.length)\n    ];\n  }\n\n  getInitial() {\n    if (!this.elizaInitials) return \"\";\n    return this.elizaInitials[\n      Math.floor(Math.random() * this.elizaInitials.length)\n    ];\n  }\n}\n","import { registerRPCMethod } from \"@utils/classes/RPCPhantomWorker/worker\";\nimport ElizaBot from \"./ElizaBot\";\n\nconst elizaBot = new ElizaBot();\n\nregisterRPCMethod(\"start\", () => elizaBot.getInitial());\nregisterRPCMethod(\"reply\", ({ text }) => elizaBot.transform(text));\nregisterRPCMethod(\"bye\", () => elizaBot.getFinal());\n"],"sourceRoot":""}