(this.webpackJsonpreshell=this.webpackJsonpreshell||[]).push([[2],{103:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var r=n(45),a=n(1),c=n.n(a),i=n(9),o=n(3),s=n(4),l=n(14),u=n(23),f=n(17),p=n(5),v=n(6),h=n(106),d=n(258),g=(n(274),n(15)),y=n.n(g),m=n(28),b=n.n(m),S=n(110),w=n.n(S),_=n(22);var j=function TearDownView(e){var t=e.onForceReload;return Object(_.jsx)("div",{style:{margin:10,textAlign:"center",fontWeight:"bold"},children:Object(_.jsxs)("div",{children:["The system is shutting down.",Object(_.jsx)("div",{style:{marginTop:40},children:Object(_.jsx)("button",{onClick:t,children:"Force Reload"})})]})})},k=n(178),E=n(58),O=function(e){Object(p.a)(BrowserShutdownInterceptorService,e);var t=Object(v.a)(BrowserShutdownInterceptorService);function BrowserShutdownInterceptorService(){var e;Object(o.a)(this,BrowserShutdownInterceptorService);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).setTitle("Browser Shutdown Interceptor Service"),window.onbeforeunload=function(e){return e.preventDefault(),!1},e.registerCleanupHandler((function(){window.onbeforeunload=null})),e}return BrowserShutdownInterceptorService}(E.c),x=n(73),I=n(266),C={getInMemoryLocalIdentity:function getInMemoryLocalIdentity(){return null},setInMemoryLocalIdentity:function setInMemoryLocalIdentity(e){return e}},T=C.getInMemoryLocalIdentity,L=C.setInMemoryLocalIdentity,D=function(e){Object(p.a)(LocalDeviceIdentificationService,e);var t=Object(v.a)(LocalDeviceIdentificationService);function LocalDeviceIdentificationService(){var e;Object(o.a)(this,LocalDeviceIdentificationService);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).setTitle("Local Device Identification Service"),e._keyVaultService=e.useServiceClass(x.a),e}return Object(s.a)(LocalDeviceIdentificationService,[{key:"initLocalIdentity",value:function(){var e=Object(i.a)(c.a.mark((function _callee(){return c.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchLocalIdentity();case 2:case"end":return e.stop()}}),_callee,this)})));return function initLocalIdentity(){return e.apply(this,arguments)}}()},{key:"fetchLocalIdentity",value:function(){var e=Object(i.a)(c.a.mark((function _callee2(){var e,t,n;return c.a.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!(e=T())){r.next=5;break}return r.abrupt("return",e);case 5:return t=this._keyVaultService.getSecureLocalStorageEngine(),r.next=8,t.fetchItem("id0");case 8:if(n=r.sent){r.next=13;break}return n=this._generateLocalIdentity(),r.next=13,t.setItem("id0",n);case 13:return L(n),r.abrupt("return",n);case 15:case"end":return r.stop()}}),_callee2,this)})));return function fetchLocalIdentity(){return e.apply(this,arguments)}}()},{key:"_generateLocalIdentity",value:function _generateLocalIdentity(){var e=I.a.createIdentity();return{address:e.address,privateKey:e.privateKey,publicKey:e.publicKey}}},{key:"fetchLocalAddress",value:function(){var e=Object(i.a)(c.a.mark((function _callee3(){var e,t;return c.a.wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.fetchLocalIdentity();case 2:if(e=n.sent,t=e.address){n.next=6;break}throw new ReferenceError("Could not obtain address from local identity");case 6:return n.abrupt("return",t);case 7:case"end":return n.stop()}}),_callee3,this)})));return function fetchLocalAddress(){return e.apply(this,arguments)}}()},{key:"fetchDeviceAddress",value:function(){var e=Object(i.a)(c.a.mark((function _callee4(){return c.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchLocalAddress());case 1:case"end":return e.stop()}}),_callee4,this)})));return function fetchDeviceAddress(){return e.apply(this,arguments)}}()},{key:"fetchLocalPublicKey",value:function(){var e=Object(i.a)(c.a.mark((function _callee5(){var e,t;return c.a.wrap((function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.fetchLocalIdentity();case 2:if(e=n.sent,t=e.publicKey){n.next=6;break}throw new ReferenceError("Could not obtain public key from local identity");case 6:return n.abrupt("return",t);case 7:case"end":return n.stop()}}),_callee5,this)})));return function fetchLocalPublicKey(){return e.apply(this,arguments)}}()}]),LocalDeviceIdentificationService}(E.c),M=n(153);var P=function BaseView(e){var t=e.portal,r=Object(m.useState)(!1),a=Object(M.a)(r,2),c=a[0],i=a[1];Object(m.useEffect)((function(){n.e(8).then(n.t.bind(null,866,7)).then((function(){return i(!0)})).catch((function(e){return console.error(e)}))}),[]);var o=Object(m.useMemo)((function(){return b.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(7)]).then(n.bind(null,869))}))}),[]);return c?Object(_.jsx)(b.a.Suspense,{fallback:Object(_.jsx)("div",{children:"Loading core utilities..."}),children:Object(_.jsx)(o,{portal:t})}):null},R=n(265),U=n.n(R),V=n(247),$=n(257).version;var K="reshell-default-portal",A=null,N=Object(d.a)("portals"),z=function(e){Object(p.a)(ReShellCore,e);var t=Object(v.a)(ReShellCore);function ReShellCore(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Object(o.a)(this,ReShellCore),A)throw new ReferenceError("UIServiceManager cannot have multiple instances");return e=t.call(this,{isAsync:!0}),A=Object(l.a)(e),e._uiServiceManager=new k.c,e._uiServiceManager.startServiceClass(O),e._uiServiceManager.startServiceClass(x.a),e._uiServiceManager.startServiceClass(D),e._init(n),e}return Object(s.a)(ReShellCore,[{key:"_init",value:function(){var e=Object(i.a)(c.a.mark((function _callee2(e){var t,n,a=this;return c.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(t=this._uiServiceManager.getServiceInstance(x.a).getSessionStorageEngine(),e){o.next=8;break}return o.next=4,t.fetchItem(K);case 4:if(o.t0=o.sent,o.t0){o.next=7;break}o.t0="default";case 7:e=o.t0;case 8:if(n=Object(h.a)(ReShellCore,N)[N][e]){o.next=11;break}throw new ReferenceError("Unable to init portal with name: ".concat(e));case 11:return o.next=13,t.setItem(K,e);case 13:return Object(V.a)().then((function(e){e||window.confirm("It appears you are not running the latest version.  Reload?")&&ReShellCore.forceUpdate()})),o.next=16,Object(i.a)(c.a.mark((function _callee(){var e;return c.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=a._uiServiceManager.getServiceInstance(D),t.next=3,e.initLocalIdentity();case 3:case"end":return t.stop()}}),_callee)})))();case 16:this._activePortalName=e,Object(r.a)(document.body.children).forEach((function(e){"SCRIPT"!==e.tagName.toUpperCase()&&e.parentNode.removeChild(e)})),function(){var e=Object(r.a)(document.getElementsByTagName("style"));setTimeout((function(){e.forEach((function(e){return e.parentNode.removeChild(e)}))}),1e3)}(),this._elBase=document.createElement("div"),document.body.appendChild(this._elBase),w.a.render(Object(_.jsx)(b.a.StrictMode,{children:Object(_.jsx)(P,{portal:n})}),this._elBase),Object(u.a)(Object(f.a)(ReShellCore.prototype),"_init",this).call(this);case 23:case"end":return o.stop()}}),_callee2,this)})));return function _init(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=Object(i.a)(c.a.mark((function _callee4(){var e=this;return c.a.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return w.a.render(Object(_.jsx)(j,{onForceReload:ReShellCore.forceReload}),this._elBase),t.abrupt("return",Object(u.a)(Object(f.a)(ReShellCore.prototype),"destroy",this).call(this,Object(i.a)(c.a.mark((function _callee3(){return c.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._uiServiceManager.destroy();case 2:A=null;case 3:case"end":return t.stop()}}),_callee3)})))));case 2:case"end":return t.stop()}}),_callee4,this)})));return function destroy(){return e.apply(this,arguments)}}()},{key:"switchToPortal",value:function(){var e=Object(i.a)(c.a.mark((function _callee5(e){var t,n;return c.a.wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return t=this._uiServiceManager.getServiceInstance(x.a).getSessionStorageEngine(),r.next=3,t.setItem(K,e);case 3:return r.next=5,this.destroy();case 5:n=U.a.stringify({portalName:e}),window.location.href="".concat("","?").concat(n);case 7:case"end":return r.stop()}}),_callee5,this)})));return function switchToPortal(t){return e.apply(this,arguments)}}()},{key:"getUIServiceManager",value:function getUIServiceManager(){return this._uiServiceManager}},{key:"getPortalName",value:function getPortalName(){return this._activePortalName}}],[{key:"getReShellVersion",value:function getReShellVersion(){return function getReShellVersion_getReShellVersion(){return $}()}},{key:"forceUpdate",value:function(){var e=Object(i.a)(c.a.mark((function _callee6(){return c.a.wrap((function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=3;break}return e.next=3,A.destroy();case 3:window.location.href="".concat("","?__forceReboot=").concat((new Date).getTime());case 4:case"end":return e.stop()}}),_callee6)})));return function forceUpdate(){return e.apply(this,arguments)}}()},{key:"registerPortals",value:function registerPortals(e){Object(h.a)(ReShellCore,N)[N]=e}},{key:"getPortals",value:function getPortals(){return Object(h.a)(ReShellCore,N)[N]}},{key:"init",value:function(){var e=Object(i.a)(c.a.mark((function _callee7(){var e,t=arguments;return c.a.wrap((function _callee7$(n){for(;;)switch(n.prev=n.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:null,n.abrupt("return",new ReShellCore(e));case 2:case"end":return n.stop()}}),_callee7)})));return function init(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=Object(i.a)(c.a.mark((function _callee8(){var e;return c.a.wrap((function _callee8$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=A)||void 0===e?void 0:e.destroy());case 1:case"end":return t.stop()}}),_callee8)})));return function destroy(){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=Object(i.a)(c.a.mark((function _callee9(){var e,t,n=arguments;return c.a.wrap((function _callee9$(r){for(;;)switch(r.prev=r.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0]){r.next=6;break}return r.next=4,null===(t=A)||void 0===t?void 0:t.destroy();case 4:r.next=8;break;case 6:document.body.innerHTML="",document.write("[Force reload operation proceeding]");case 8:window.location.reload(e);case 9:case"end":return r.stop()}}),_callee9)})));return function reload(){return e.apply(this,arguments)}}()},{key:"forceReload",value:function(){var e=Object(i.a)(c.a.mark((function _callee10(){return c.a.wrap((function _callee10$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ReShellCore.reload(!0));case 1:case"end":return e.stop()}}),_callee10)})));return function forceReload(){return e.apply(this,arguments)}}()},{key:"switchToPortal",value:function(){var e=Object(i.a)(c.a.mark((function _callee11(e){var t;return c.a.wrap((function _callee11$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=A)||void 0===t?void 0:t.switchToPortal(e);case 2:case"end":return n.stop()}}),_callee11)})));return function switchToPortal(t){return e.apply(this,arguments)}}()},{key:"getUIServiceManager",value:function getUIServiceManager(){var e;return null===(e=A)||void 0===e?void 0:e.getUIServiceManager()}},{key:"getPortalName",value:function getPortalName(){var e;return null===(e=A)||void 0===e?void 0:e.getPortalName()}},{key:"getReShellUptime",value:function getReShellUptime(){var e;return(null===(e=A)||void 0===e?void 0:e.getInstanceUptime())||0}}]),ReShellCore}(y.a);Object.defineProperty(z,N,{writable:!0,value:{}})},156:function(e,t,n){"use strict";var r=n(103);window.ReShell=r.a;t.a=r.a},178:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f}));var r=n(3),a=n(14),c=n(5),i=n(6),o=n(15),s=o.PhantomServiceManager.EVT_CHILD_INSTANCE_ADDED,l=o.PhantomServiceManager.EVT_CHILD_INSTANCE_REMOVED,u=(o.PhantomServiceManager.EVT_UPDATED,o.PhantomServiceManager.EVT_DESTROYED,null),f=function(e){Object(c.a)(UIServiceManager,e);var t=Object(i.a)(UIServiceManager);function UIServiceManager(){var e;if(Object(r.a)(this,UIServiceManager),u)throw new ReferenceError("UIServiceManager cannot have multiple instances");for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),u=Object(a.a)(e),e}return UIServiceManager}(o.PhantomServiceManager)},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return fetchIsLatestVersion}));var r=n(1),a=n.n(r),c=n(75),i=n(45),o=n(9),s=n(248),l=n.n(s);function fetchIsLatestVersion(){return _fetchIsLatestVersion.apply(this,arguments)}function _fetchIsLatestVersion(){return(_fetchIsLatestVersion=Object(o.a)(a.a.mark((function _callee(){var e,t,n,r,i,o,s,u;return a.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return e=_getStaticTags(),a.next=3,l.a.get("".concat("","/?__t=").concat((new Date).getTime()));case 3:if(t=a.sent,n=new window.DOMParser,r=n.parseFromString(t.data,"text/html"),0!==(i=_getStaticTags(r)).length){a.next=9;break}throw new Error("Unable to acquire remote info");case 9:o=Object(c.a)(i),a.prev=10,o.s();case 12:if((s=o.n()).done){a.next=18;break}if(u=s.value,e.includes(u)){a.next=16;break}return a.abrupt("return",!1);case 16:a.next=12;break;case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(10),o.e(a.t0);case 23:return a.prev=23,o.f(),a.finish(23);case 26:return a.abrupt("return",!0);case 27:case"end":return a.stop()}}),_callee,null,[[10,20,23,26]])})))).apply(this,arguments)}function _getStaticTags(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document,t=Object(i.a)(e.getElementsByTagName("script")),n=t.filter((function(e){var t;return null===(t=e.getAttribute("src"))||void 0===t?void 0:t.startsWith("/static")})).map((function(e){return e.getAttribute("src")}));return n}},257:function(e){e.exports=JSON.parse('{"name":"reshell","version":"0.1.89","author":{"name":"zenOSmosis","email":"info@zenosmosis.com","url":"https://zenosmosis.com"},"license":"MIT","private":true,"dependencies":{"@craco/craco":"^6.2.0","@shelf/fast-chunk-string":"^1.1.1","@szhsin/react-menu":"^2.3.4","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@use-gesture/react":"^10.1.4","anchorme":"^2.1.2","animate.css":"^4.1.1","axios":"^0.23.0","classnames":"^2.3.1","concurrently":"^6.2.1","dayjs":"^1.10.7","debounce":"^1.2.1","deep-object-diff":"^1.1.7","eth-crypto":"^2.1.0","howler":"^2.2.3","media-stream-track-controller":"github:zenosmosis/media-stream-track-controller#v4.0.5","microsoft-cognitiveservices-speech-sdk":"^1.20.0","object-hash":"^2.2.0","phantom-core":"github:zenosmosis/phantom-core#v2.7.3","polarity":"^4.0.0","preload-it":"^1.4.0","query-string":"^7.0.1","react":"^17.0.2","react-dom":"^17.0.2","react-json-view":"^1.21.3","react-router-dom":"^5.3.0","react-scripts":"4.0.3","request-skippable-animation-frame":"github:jzombie/request-skippable-animation-frame","resize-observer":"^1.0.2","retext":"^8.1.0","retext-english":"^4.1.0","retext-pos":"^4.1.0","retext-stringify":"^3.1.0","sanitize-html":"^2.6.1","sdp-transform":"^2.14.1","secure-ls":"^1.2.6","sentencer":"^0.2.1","socket.io-client":"^4.3.0","spark-md5":"^3.0.2","sync-object":"github:zenosmosis/sync-object#v1.2.5","unified":"^10.1.2","unist-util-inspect":"^7.0.0","unist-util-visit":"^4.1.0","uuid":"^8.3.2","web-vitals":"^1.0.1","webrtc-peer":"github:zenosmosis/webrtc-peer#v1.0.2","worker-plugin":"^5.0.1","xterm":"^4.14.1","xterm-addon-fit":"^0.5.0","xterm-addon-web-links":"^0.4.0"},"scripts":{"help":"npm run list-commands","list-commands":"zx reshell-scripts.mjs list-commands","list-portals":"zx reshell-scripts.mjs list-portals","list-portal-scripts":"zx reshell-scripts.mjs list-portal-scripts","start":"zx reshell-scripts.mjs start","start:no-ssl":"zx reshell-scripts.mjs start:no-ssl","exec":"zx reshell-scripts.mjs exec","build":"zx reshell-scripts.mjs build","test":"zx reshell-scripts.mjs test","lint":"prettier --write \'(**/)*.js\'"},"old_scripts":{"// start:docker.dev":"npm run stop:docker.dev && docker-compose -f docker-compose.dev.yml up","// stop:docker.dev":"docker-compose -f docker-compose.dev.yml down --remove-orphans","// build:docker.dev":"docker-compose -f docker-compose.dev.yml build","// start:frontend-with-hostbridge-proxy":"concurrently \\"npm run start:host-bridge\\" \\"npm run start\\"","// start:host-bridge":"cd host.bridge-prototype && npm install node-pty && npm run start:dev","// build:no-profiling":"craco build","// eject":"craco eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"prettier":"^2.4.1","symlink-dir":"^5.0.1","zx":"^5.0.0"}}')},274:function(e,t,n){var r=n(158),a=n(275);r.extend(a);var c=n(276);r.extend(c)},318:function(e,t){},322:function(e,t){},323:function(e,t){},347:function(e,t){},349:function(e,t){},359:function(e,t){},361:function(e,t){},372:function(e,t){},374:function(e,t){},404:function(e,t){},406:function(e,t){},411:function(e,t){},413:function(e,t){},420:function(e,t){},432:function(e,t){},435:function(e,t){},440:function(e,t){},498:function(e,t){},499:function(e,t){},521:function(e,t,n){"use strict";n.r(t);var r=function reportWebVitals(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,852)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},a=n(28),c=n.n(a),i=n(156),o={default:c.a.lazy((function(){return Promise.all([n.e(1),n.e(5),n.e(0),n.e(6)]).then(n.bind(null,867))}))};i.a.registerPortals(o),r((function(e){var t=e.id,n=e.name,r=e.value;console.log({webVitalsReport:{id:t,name:n,value:r}})}))},58:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(3),a=n(4),c=n(5),i=n(6),o=n(15),s=o.PhantomServiceCore.EVT_UPDATED,l=o.PhantomServiceCore.EVT_DESTROYED,u=function(e){Object(c.a)(UIServiceCore,e);var t=Object(i.a)(UIServiceCore);function UIServiceCore(){if(Object(r.a)(this,UIServiceCore),void 0===window)throw new Error("UIServiceCore can only be run on the main thread in a browser window");for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.call.apply(t,[this].concat(n))}return Object(a.a)(UIServiceCore,[{key:"addNativeEventListener",value:function addNativeEventListener(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return window.addEventListener(e,t,n),this.registerCleanupHandler((function(){return window.removeEventListener(e,t,n)})),{eventName:e,eventHandler:t,eventOptions:n}}},{key:"removeNativeEventListener",value:function removeNativeEventListener(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.removeEventListener(e,t,n)}}]),UIServiceCore}(o.PhantomServiceCore)},73:function(e,t,n){"use strict";var r=n(23),a=n(17),c=n(75),i=n(1),o=n.n(i),s=n(9),l=n(3),u=n(4),f=n(5),p=n(6),v=n(15),h=n.n(v),d=n(58),g=n(84),y=function(e){Object(f.a)(BaseStorageEngine,e);var t=Object(p.a)(BaseStorageEngine);function BaseStorageEngine(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.a)(this,BaseStorageEngine);var r={encryptionType:null};return(e=t.call(this,h.a.mergeOptions(Object(g.a)({DEFAULT_OPTIONS:r},h.a.mergeOptions(Object(g.a)(Object(g.a)({},n),{},{isAsync:!1}))))))._encryptionType=e.getOptions().encryptionType,e}return Object(u.a)(BaseStorageEngine,[{key:"getEncryptionType",value:function getEncryptionType(){return this._encryptionType}},{key:"setItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee(e,t){return o.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:throw new ReferenceError("setItem must be overridden");case 1:case"end":return e.stop()}}),_callee)})));return function setItem(t,n){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee2(e){return o.a.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:throw new ReferenceError("removeItem must be overridden");case 1:case"end":return e.stop()}}),_callee2)})));return function removeItem(t){return e.apply(this,arguments)}}()},{key:"fetchItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee3(e){return o.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:throw new ReferenceError("fetchItem must be overridden");case 1:case"end":return e.stop()}}),_callee3)})));return function fetchItem(t){return e.apply(this,arguments)}}()},{key:"fetchKeys",value:function(){var e=Object(s.a)(o.a.mark((function _callee4(){return o.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:throw new ReferenceError("fetchKeys must be overridden");case 1:case"end":return e.stop()}}),_callee4)})));return function fetchKeys(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(s.a)(o.a.mark((function _callee5(){return o.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:throw new ReferenceError("clear must be overridden");case 1:case"end":return e.stop()}}),_callee5)})));return function clear(){return e.apply(this,arguments)}}()}]),BaseStorageEngine}(h.a),m=function(e){Object(f.a)(SessionStorageEngine,e);var t=Object(p.a)(SessionStorageEngine);function SessionStorageEngine(){var e;Object(l.a)(this,SessionStorageEngine);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).setTitle("SessionStorageEngine"),e}return Object(u.a)(SessionStorageEngine,[{key:"setItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee(e,t){return o.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:window.sessionStorage.setItem(e,t),this.emit(v.EVT_UPDATED);case 2:case"end":return n.stop()}}),_callee,this)})));return function setItem(t,n){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee2(e){return o.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:window.sessionStorage.removeItem(e),this.emit(v.EVT_UPDATED);case 2:case"end":return t.stop()}}),_callee2,this)})));return function removeItem(t){return e.apply(this,arguments)}}()},{key:"fetchItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee3(e){return o.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.sessionStorage.getItem(e));case 1:case"end":return t.stop()}}),_callee3)})));return function fetchItem(t){return e.apply(this,arguments)}}()},{key:"fetchKeys",value:function(){var e=Object(s.a)(o.a.mark((function _callee4(){return o.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(window.sessionStorage));case 1:case"end":return e.stop()}}),_callee4)})));return function fetchKeys(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(s.a)(o.a.mark((function _callee5(){return o.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:window.sessionStorage.clear(),this.emit(v.EVT_UPDATED);case 2:case"end":return e.stop()}}),_callee5,this)})));return function clear(){return e.apply(this,arguments)}}()}]),SessionStorageEngine}(y),b=n(259),S=n.n(b),w=function(e){Object(f.a)(SecureLocalStorageEngine,e);var t=Object(p.a)(SecureLocalStorageEngine);function SecureLocalStorageEngine(e){var n;Object(l.a)(this,SecureLocalStorageEngine);return(n=t.call(this,h.a.mergeOptions({encryptionType:"AES"},e)))._ls=new S.a({encodingType:n.getEncryptionType()}),n.setTitle("SecureLocalStorageEngine"),n}return Object(u.a)(SecureLocalStorageEngine,[{key:"setItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee(e,t){return o.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:this._ls.set(e,t),this.emit(v.EVT_UPDATED);case 2:case"end":return n.stop()}}),_callee,this)})));return function setItem(t,n){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee2(e){return o.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:this._ls.remove(e),this.emit(v.EVT_UPDATED);case 2:case"end":return t.stop()}}),_callee2,this)})));return function removeItem(t){return e.apply(this,arguments)}}()},{key:"fetchItem",value:function(){var e=Object(s.a)(o.a.mark((function _callee3(e){return o.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:if(this._ls.getAllKeys().includes(e)){t.next=3;break}return t.abrupt("return",void 0);case 3:return t.prev=3,t.abrupt("return",this._ls.get(e));case 7:t.prev=7,t.t0=t.catch(3),console.error(t.t0);case 10:case"end":return t.stop()}}),_callee3,this,[[3,7]])})));return function fetchItem(t){return e.apply(this,arguments)}}()},{key:"fetchKeys",value:function(){var e=Object(s.a)(o.a.mark((function _callee4(){return o.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._ls.getAllKeys());case 1:case"end":return e.stop()}}),_callee4,this)})));return function fetchKeys(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(s.a)(o.a.mark((function _callee5(){return o.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:this._ls.clear(),this.emit(v.EVT_UPDATED);case 2:case"end":return e.stop()}}),_callee5,this)})));return function clear(){return e.apply(this,arguments)}}()}]),SecureLocalStorageEngine}(y),_=function(e){Object(f.a)(KeyVaultService,e);var t=Object(p.a)(KeyVaultService);function KeyVaultService(){var e;Object(l.a)(this,KeyVaultService);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).setTitle("Key Vault Service"),e.setState({keyStorageEngineMaps:[]}),e._storageEngineCollection=e.bindCollectionClass(j),e._storageEngineCollection.on(v.EVT_UPDATED,Object(s.a)(o.a.mark((function _callee(){var t;return o.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e._fetchKeyStorageEngineMaps();case 2:t=n.sent,e.setState({keyStorageEngineMaps:t});case 4:case"end":return n.stop()}}),_callee)})))),e.addStorageEngineClass(m),e.addStorageEngineClass(w),e}return Object(u.a)(KeyVaultService,[{key:"getKeyStorageEngineMaps",value:function getKeyStorageEngineMaps(){return this.getState().keyStorageEngineMaps}},{key:"_fetchKeyStorageEngineMaps",value:function(){var e=Object(s.a)(o.a.mark((function _callee2(){var e,t,n,r,a,i,s,l,u;return o.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:e=this._storageEngineCollection.getStorageEngines(),t=[],n=Object(c.a)(e),o.prev=3,n.s();case 5:if((r=n.n()).done){o.next=14;break}return a=r.value,o.next=9,a.fetchKeys();case 9:i=o.sent,s=Object(c.a)(i);try{for(s.s();!(l=s.n()).done;)u=l.value,t.push([u,a])}catch(f){s.e(f)}finally{s.f()}case 12:o.next=5;break;case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(3),n.e(o.t0);case 19:return o.prev=19,n.f(),o.finish(19);case 22:return o.abrupt("return",t);case 23:case"end":return o.stop()}}),_callee2,this,[[3,16,19,22]])})));return function _fetchKeyStorageEngineMaps(){return e.apply(this,arguments)}}()},{key:"_fetchKeys",value:function(){var e=Object(s.a)(o.a.mark((function _callee3(){return o.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchKeyStorageEngineMaps();case 2:return e.abrupt("return",e.sent.map((function(e){return e[0]})));case 3:case"end":return e.stop()}}),_callee3,this)})));return function _fetchKeys(){return e.apply(this,arguments)}}()},{key:"addStorageEngineClass",value:function addStorageEngineClass(e){this._storageEngineCollection.addStorageEngineClass(e)}},{key:"removeStorageEngineClass",value:function removeStorageEngineClass(e){this._storageEngineCollection.removeStorageEngineClass(e)}},{key:"getStorageEngines",value:function getStorageEngines(){return this._storageEngineCollection.getChildren()}},{key:"getStorageEngineWithShortUUID",value:function getStorageEngineWithShortUUID(e){return this.getStorageEngines().find((function(t){return t.getShortUUID()===e}))}},{key:"getSecureLocalStorageEngine",value:function getSecureLocalStorageEngine(){return this._storageEngineCollection.getChildWithKey(w)}},{key:"getSessionStorageEngine",value:function getSessionStorageEngine(){return this._storageEngineCollection.getChildWithKey(m)}},{key:"clearAllStorageEngines",value:function(){var e=Object(s.a)(o.a.mark((function _callee4(){return o.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getStorageEngines().map((function(e){return e.clear()})));case 2:case"end":return e.stop()}}),_callee4,this)})));return function clearAllStorageEngines(){return e.apply(this,arguments)}}()}]),KeyVaultService}(d.c),j=function(e){Object(f.a)(StorageEngineCollection,e);var t=Object(p.a)(StorageEngineCollection);function StorageEngineCollection(){return Object(l.a)(this,StorageEngineCollection),t.apply(this,arguments)}return Object(u.a)(StorageEngineCollection,[{key:"addChild",value:function addChild(e){if(this.getChildWithKey(e))throw new ReferenceError("StorageEngineClass is already registered");var t=new e;if(!(t instanceof y))throw new TypeError("storageEngine is not of StorageEngine type");return Object(r.a)(Object(a.a)(StorageEngineCollection.prototype),"addChild",this).call(this,t,e)}},{key:"removeChild",value:function removeChild(e){return e&&e.destroy(),Object(r.a)(Object(a.a)(StorageEngineCollection.prototype),"removeChild",this).call(this,e)}},{key:"addStorageEngineClass",value:function addStorageEngineClass(e){return this.addChild(e)}},{key:"removeStorageEngineClass",value:function removeStorageEngineClass(e){return this.removeChild(e)}},{key:"getStorageEngines",value:function getStorageEngines(){return this.getChildren()}}]),StorageEngineCollection}(v.PhantomCollection);t.a=_}},[[521,3,4]]]);
//# sourceMappingURL=main.9506456f.chunk.js.map